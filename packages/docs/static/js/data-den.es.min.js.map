{"version":3,"file":"data-den.es.min.js","sources":["../../src/utils/dom.ts","../../src/utils/filter.ts","../../src/utils/deep-copy.ts","../../src/utils/date.ts","../../src/utils/stringUtils.ts","../../src/modules/rendering/cell/data-den-cell.ts","../../src/modules/rendering/cell/data-den-default-cell-renderer.ts","../../src/modules/rendering/cell/data-den-default-header-cell-renderer.ts","../../src/modules/rendering/sorter/data-den-header-sorter-renderer.interface.ts","../../src/context.ts","../../src/modules/rendering/sorter/data-den-header-default-sorter-renderer.ts","../../src/modules/rendering/resizer/data-den-header-resizer-renderer.interface.ts","../../src/modules/rendering/resizer/data-den-header-default-resizer-renderer.ts","../../../../node_modules/@popperjs/core/lib/enums.js","../../../../node_modules/@popperjs/core/lib/dom-utils/getNodeName.js","../../../../node_modules/@popperjs/core/lib/dom-utils/getWindow.js","../../../../node_modules/@popperjs/core/lib/dom-utils/instanceOf.js","../../../../node_modules/@popperjs/core/lib/modifiers/applyStyles.js","../../../../node_modules/@popperjs/core/lib/utils/getBasePlacement.js","../../../../node_modules/@popperjs/core/lib/utils/math.js","../../../../node_modules/@popperjs/core/lib/utils/userAgent.js","../../../../node_modules/@popperjs/core/lib/dom-utils/isLayoutViewport.js","../../../../node_modules/@popperjs/core/lib/dom-utils/getBoundingClientRect.js","../../../../node_modules/@popperjs/core/lib/dom-utils/getLayoutRect.js","../../../../node_modules/@popperjs/core/lib/dom-utils/contains.js","../../../../node_modules/@popperjs/core/lib/dom-utils/getComputedStyle.js","../../../../node_modules/@popperjs/core/lib/dom-utils/isTableElement.js","../../../../node_modules/@popperjs/core/lib/dom-utils/getDocumentElement.js","../../../../node_modules/@popperjs/core/lib/dom-utils/getParentNode.js","../../../../node_modules/@popperjs/core/lib/dom-utils/getOffsetParent.js","../../../../node_modules/@popperjs/core/lib/utils/getMainAxisFromPlacement.js","../../../../node_modules/@popperjs/core/lib/utils/within.js","../../../../node_modules/@popperjs/core/lib/utils/getFreshSideObject.js","../../../../node_modules/@popperjs/core/lib/utils/mergePaddingObject.js","../../../../node_modules/@popperjs/core/lib/utils/expandToHashMap.js","../../../../node_modules/@popperjs/core/lib/modifiers/arrow.js","../../../../node_modules/@popperjs/core/lib/utils/getVariation.js","../../../../node_modules/@popperjs/core/lib/modifiers/computeStyles.js","../../../../node_modules/@popperjs/core/lib/modifiers/eventListeners.js","../../../../node_modules/@popperjs/core/lib/utils/getOppositePlacement.js","../../../../node_modules/@popperjs/core/lib/utils/getOppositeVariationPlacement.js","../../../../node_modules/@popperjs/core/lib/dom-utils/getWindowScroll.js","../../../../node_modules/@popperjs/core/lib/dom-utils/getWindowScrollBarX.js","../../../../node_modules/@popperjs/core/lib/dom-utils/getViewportRect.js","../../../../node_modules/@popperjs/core/lib/dom-utils/getDocumentRect.js","../../../../node_modules/@popperjs/core/lib/dom-utils/isScrollParent.js","../../../../node_modules/@popperjs/core/lib/dom-utils/getScrollParent.js","../../../../node_modules/@popperjs/core/lib/dom-utils/listScrollParents.js","../../../../node_modules/@popperjs/core/lib/utils/rectToClientRect.js","../../../../node_modules/@popperjs/core/lib/dom-utils/getClippingRect.js","../../../../node_modules/@popperjs/core/lib/utils/computeOffsets.js","../../../../node_modules/@popperjs/core/lib/utils/detectOverflow.js","../../../../node_modules/@popperjs/core/lib/utils/computeAutoPlacement.js","../../../../node_modules/@popperjs/core/lib/modifiers/flip.js","../../../../node_modules/@popperjs/core/lib/modifiers/hide.js","../../../../node_modules/@popperjs/core/lib/modifiers/offset.js","../../../../node_modules/@popperjs/core/lib/modifiers/popperOffsets.js","../../../../node_modules/@popperjs/core/lib/utils/getAltAxis.js","../../../../node_modules/@popperjs/core/lib/modifiers/preventOverflow.js","../../../../node_modules/@popperjs/core/lib/dom-utils/getHTMLElementScroll.js","../../../../node_modules/@popperjs/core/lib/dom-utils/getNodeScroll.js","../../../../node_modules/@popperjs/core/lib/dom-utils/getCompositeRect.js","../../../../node_modules/@popperjs/core/lib/utils/orderModifiers.js","../../../../node_modules/@popperjs/core/lib/utils/debounce.js","../../../../node_modules/@popperjs/core/lib/utils/mergeByName.js","../../../../node_modules/@popperjs/core/lib/createPopper.js","../../../../node_modules/@popperjs/core/lib/popper.js","../../src/modules/rendering/menu/data-den-header-menu-renderer.ts","../../src/modules/rendering/cell/data-den-header-cell.ts","../../src/modules/rendering/filter/data-den-header-filter-renderer.interface.ts","../../src/modules/rendering/filter/data-den-header-text-filter-renderer.ts","../../src/modules/rendering/filter/data-den-header-number-filter-renderer.ts","../../src/modules/rendering/filter/data-den-header-date-filter-renderer.ts","../../src/modules/rendering/filter/data-den-header-select-filter-renderer.ts","../../src/modules/rendering/row/data-den-row.ts","../../src/modules/rendering/row/data-den-header-row.ts","../../src/modules/rendering/pagination/data-den-pagination-renderer.ts","../../src/utils/columns-order.ts","../../src/modules/pinning/data-den-pinning-previous-state.ts","../../src/data-den-event-emitter.ts","../../src/modules/rendering/data-den-rendering-service.ts","../../src/modules/pagination/data-den-pagination-service.ts","../../src/modules/dragging/data-den-dragging-service.ts","../../src/modules/resizing/data-den-resizing-service.ts","../../src/modules/filtering/data-den-filtering-service.ts","../../src/modules/filtering/data-den-active-default-quick-filter.ts","../../src/modules/sorting/data-den-sorting-previous-state.ts","../../src/modules/sorting/data-den-sorting-service.ts","../../src/modules/fetch/strategy/data-den-data-loader-strategy.ts","../../src/modules/fetch/strategy/data-den-client-data-loader-strategy-client.ts","../../src/modules/fetch/strategy/data-den-server-data-loader-strategy-server.ts","../../src/modules/fetch/data-den-fetch-service.ts","../../src/data-den-event.ts","../../src/data-den-pub-sub.ts","../../src/modules/rendering/editor/data-den-cell-text-editor.ts","../../src/default-options.interface.ts","../../src/utils/object.ts","../../src/utils/deep-merge.ts","../../src/data-den.ts"],"sourcesContent":["export function createHtmlElement(template: string, elementName = 'div'): HTMLElement {\n  const placeholder = document.createElement(elementName);\n  placeholder.innerHTML = template;\n\n  return placeholder.firstElementChild as HTMLElement;\n}\n","export function debounce(callback: any, debounceTime: number) {\n  let timeout: ReturnType<typeof setTimeout>;\n\n  return (...args: any) => {\n    const debounceFn = () => {\n      clearTimeout(timeout);\n      callback(...args);\n    };\n\n    clearTimeout(timeout);\n    timeout = setTimeout(debounceFn, debounceTime);\n  };\n}\n","type Obj<T = string> = { [key: string]: T };\n\nexport const deepCopy = (obj: any) => {\n  if (typeof obj !== 'object' || obj === null) {\n    return obj;\n  }\n\n  if (obj instanceof Date) {\n    return new Date(obj.getTime());\n  }\n\n  if (obj instanceof Array) {\n    return obj.reduce((arr, item, i) => {\n      arr[i] = deepCopy(item);\n      return arr;\n    }, []);\n  }\n\n  if (obj instanceof Object) {\n    return Object.keys(obj).reduce((newObj: Obj, key) => {\n      newObj[key] = deepCopy(obj[key]);\n      return newObj;\n    }, {});\n  }\n};\n","export function parseDate(dateString: string) {\n  const dateParts = dateString.split('-').map((part) => Number(part));\n  const [year, month, day] = dateParts;\n\n  return new Date(year, month - 1, day);\n}\n\nexport function isSameDate(date1: Date, date2: Date): boolean {\n  date1.setHours(0, 0, 0, 0);\n  date2.setHours(0, 0, 0, 0);\n\n  return date1.getTime() === date2.getTime();\n}\n","export function escapeHtml(html: any) {\n  var text = document.createTextNode(html);\n  var div = document.createElement('div');\n  div.appendChild(text);\n  return div.innerHTML;\n}","import { DataDenCellEditor, DataDenCellEditorParams } from '../editor';\nimport { DataDenCellRenderer } from './data-den-cell-renderer.interface';\nimport { DataDenCellRendererParams } from './data-den-cell-renderer-params.interface';\nimport { createHtmlElement } from '../../../utils';\nimport { DataDenInternalOptions } from '../../../data-den-options.interface';\n\nexport class DataDenCell {\n  colIndex: number;\n  rowIndex: number;\n  width: number;\n  #value: any;\n  #options: DataDenInternalOptions;\n  #renderer!: DataDenCellRenderer;\n  #editor!: DataDenCellEditor;\n  #left: string;\n  pinned: string;\n  cellElement: HTMLElement;\n  cellElements: DataDenCell[] = [];\n  isBlurByKey: boolean = false;\n  prevValue: any;\n\n  constructor(\n    value: any,\n    colIndex: number,\n    rowIndex: number,\n    left: number,\n    width: number,\n    pinned: string,\n    options: DataDenInternalOptions\n  ) {\n    this.colIndex = colIndex;\n    this.rowIndex = rowIndex;\n    this.width = width;\n    this.#value = value;\n    this.#options = options;\n    this.#left = pinned ? 'auto' : `${left}px`;\n    this.pinned = pinned;\n    this.#initRenderers();\n  }\n\n  #initRenderers() {\n    const colDef = this.#options.columns[this.colIndex];\n    const cellRenderer = colDef.cellRenderer!;\n    const cellEditor = colDef.cellEditor!;\n\n    const cellRendererParams = this.#getCellRendererParams();\n    const cellEditorParams = this.#getCellEditorParams();\n\n    this.#renderer = new cellRenderer(cellRendererParams);\n    this.#editor = new cellEditor(cellEditorParams);\n  }\n\n  #getCellRendererParams(): DataDenCellRendererParams {\n    return {\n      value: this.#value,\n      cssPrefix: this.#options.cssPrefix,\n    };\n  }\n\n  #getCellEditorParams(): DataDenCellEditorParams {\n    return {\n      value: this.#value,\n      cssPrefix: this.#options.cssPrefix,\n      onKeyUp: this.#onKeyUp.bind(this),\n      stopEditMode: this.#stopEditMode.bind(this),\n    };\n  }\n\n  #onBlur(e: KeyboardEvent | MouseEvent): void {\n    const target = e.target as HTMLElement;\n\n    if (!this.isBlurByKey && target.classList.contains(`${this.#options.cssPrefix}cell-editor`)) {\n      return;\n    }\n\n    this.#stopEditMode();\n  }\n\n  #onKeyUp(e: KeyboardEvent): void {\n    if (e.key === 'Enter') {\n      this.isBlurByKey = true;\n\n      this.#onBlur(e);\n    } else if (e.key === 'Escape') {\n      this.#cancelEditMode();\n    }\n  }\n\n  documentListener = (e: MouseEvent) => {\n    const target = e.target as HTMLElement;\n\n    if (target.classList.contains(`${this.#options.cssPrefix}cell-editor`)) return;\n\n    this.#onBlur(e);\n\n    document.removeEventListener('click', this.documentListener);\n  };\n\n  startEditMode(selectedCell: DataDenCell, cells: DataDenCell[]) {\n    this.prevValue = this.#value;\n    this.cellElements = cells;\n    const editor = this.#editor.getGui();\n    this.cellElement.replaceChildren(editor);\n\n    if (selectedCell !== this) return;\n\n    document.addEventListener('click', this.documentListener);\n\n    this.#editor.afterUiRender();\n  }\n\n  #cancelEditMode() {\n    this.cellElements.forEach((cell) => {\n      const cellRenderer = this.#options.columns[cell.colIndex].cellRenderer!;\n      const cellEditor = this.#options.columns[cell.colIndex].cellEditor!;\n\n      cell.#value = cell.prevValue ?? cell.#value;\n      cell.#editor = new cellEditor(cell.#getCellEditorParams());\n\n      const cellRendererParams = cell.#getCellRendererParams();\n\n      this.#renderer = new cellRenderer(cellRendererParams);\n      cell.cellElement.replaceChildren(this.#renderer.getGui());\n    });\n  }\n\n  #stopEditMode() {\n    this.cellElements.forEach((cell) => {\n      cell.#value = cell.#editor.getValue();\n      const cellRenderer = this.#options.columns[cell.colIndex].cellRenderer!;\n      const cellRendererParams = cell.#getCellRendererParams();\n\n      this.#renderer = new cellRenderer(cellRendererParams);\n      cell.cellElement.replaceChildren(this.#renderer.getGui());\n    });\n  }\n\n  setValue(value: any) {\n    this.#value = value;\n  }\n\n  render(): HTMLElement {\n    const template =\n      /* HTML */\n      `\n        <div\n          class=\"${this.#options.cssPrefix}cell ${this.#options.draggable && !this.pinned\n        ? `${this.#options.cssPrefix}cell-draggable`\n        : ''} ${this.pinned === 'left' ? `${this.#options.cssPrefix}cell-pinned-left` : ''} ${this.pinned ===\n          'right'\n          ? `${this.#options.cssPrefix}cell-pinned-right`\n          : ''}\"\n          rowIndex=\"${this.rowIndex}\"\n          colIndex=\"${this.colIndex}\"\n          role=\"gridcell\"\n          ref=\"cell\"\n          style=\"left: ${this.#left}; width: ${this.width}px;\"\n        ></div>\n      `;\n\n    const cellElement = createHtmlElement(template);\n    cellElement.appendChild(this.#renderer.getGui());\n\n    this.cellElement = cellElement;\n\n    return cellElement;\n  }\n}\n","import { createHtmlElement } from '../../../utils';\nimport { escapeHtml } from '../../../utils/stringUtils';\nimport { DataDenCellRendererParams } from './data-den-cell-renderer-params.interface';\nimport { DataDenCellRenderer } from './data-den-cell-renderer.interface';\n\nexport class DataDenDefaultCellRenderer implements DataDenCellRenderer {\n  element: HTMLElement;\n  value: string;\n  cssPrefix: string;\n\n  constructor(params: DataDenCellRendererParams) {\n    this.value = params.value;\n    this.cssPrefix = params.cssPrefix;\n    this.element = createHtmlElement(`<span class=\"${this.cssPrefix}cell-content\">${escapeHtml(this.value)}</span>`);\n  }\n\n  getGui(): HTMLElement {\n    return this.element;\n  }\n}\n","import { DataDenCellRendererParams } from './data-den-cell-renderer-params.interface';\nimport { DataDenCellRenderer } from './data-den-cell-renderer.interface';\nimport { createHtmlElement } from '../../../utils/dom';\n\nexport class DataDenDefaultHeaderCellRenderer implements DataDenCellRenderer {\n  element: HTMLElement;\n  #cssPrefix: string;\n\n  constructor(params: DataDenCellRendererParams) {\n    this.#cssPrefix = params.cssPrefix;\n\n    const template = `<div class=\"${this.#cssPrefix}header-cell-value\">${params.value}</div>`;\n\n    this.element = createHtmlElement(template);\n  }\n\n  getGui(): HTMLElement {\n    return this.element;\n  }\n}\n","export abstract class DataDenHeaderSorterRenderer {\n  abstract getGui(): HTMLElement;\n  abstract destroy?(): void;\n}\n","export class Context {\n  constructor(public action: string) {}\n}\n","import { createHtmlElement } from '../../../utils';\nimport { DataDenHeaderSorterRenderer } from './data-den-header-sorter-renderer.interface';\nimport { DataDenPubSub } from './../../../data-den-pub-sub';\nimport { Context } from '../../../context';\nimport { DataDenSortOrder } from '../../sorting/data-den-sorting.interface';\nimport { DataDenActiveSorter } from '../../sorting';\nimport { DataDenEvent } from '../../../data-den-event';\nimport { DataDenInternalOptions } from '../../../data-den-options.interface';\n\nexport class DataDenHeaderDefaultSorterRenderer extends DataDenHeaderSorterRenderer {\n  arrowElement: HTMLElement;\n  element: HTMLElement;\n  #field: string;\n  #cssPrefix: string;\n  #multiSortKey: 'shift' | 'ctrl';\n  #multiSortActive: boolean;\n  #arrowDirection: 'up' | 'down';\n  #sortSequence: DataDenSortOrder[];\n\n  constructor(field: string, order: DataDenSortOrder, private PubSub: DataDenPubSub, options: DataDenInternalOptions) {\n    super();\n    this.#cssPrefix = options.cssPrefix;\n    this.#sortSequence = options.columns.find((x) => x.field === field).sortOrder;\n\n    this.#arrowDirection = this.#getArrowDirection(order);\n\n    const template = `\n      <div class=\"${this.#cssPrefix}header-sorter\">\n        <div\n          ref=\"sorterArrow\"\n          class=\"${this.#cssPrefix}header-sorter-arrow ${this.#cssPrefix}header-sorter-arrow-${this.#arrowDirection}\"\n        >\n          <svg \n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 24 24\"\n            stroke-width=\"1.5\"\n            style=\"transform: rotate(${this.#arrowDirection === 'up' ? '0' : '180'}deg);\"\n            class=\"${this.#cssPrefix}header-sorter-arrow-svg\"\n          >\n            <path\n              stroke=\"currentColor\"\n              stroke-linecap=\"round\"\n              stroke-linejoin=\"round\"\n              d=\"M7.25 9.75 12 3m0 0 4.75 6.75M12 3v18\"\n            />\n          </svg>\n        </div>\n        <div ref=\"sorterIndex\" class=\"${this.#cssPrefix}header-sorter-index\"></div>\n      </div>\n    `;\n    this.#field = field;\n\n    this.#multiSortActive = options.multiSort;\n    this.#multiSortKey = options.multiSortKey;\n    this.element = createHtmlElement(template);\n    this.arrowElement = this.element.querySelector('[ref=\"sorterArrow\"]')!;\n    this.element.addEventListener('click', (event: any) => {\n      const isMultiSortKeyPressed = this.#multiSortKey === 'shift' ? event.shiftKey : event.ctrlKey;\n      const isMultiSort = this.#multiSortActive && isMultiSortKeyPressed;\n\n      // Prevent text selection\n      window.getSelection().removeAllRanges();\n\n      this.sort(isMultiSort);\n    });\n    this.#subscribeSortingStartEvent();\n  }\n\n  destroy?(): void {\n    throw new Error('Method not implemented.');\n  }\n\n  getGui(): HTMLElement {\n    return this.element;\n  }\n\n  sort(isMultiSort: boolean): void {\n    const command = 'command:sorting:start';\n    this.PubSub.publish(command, {\n      caller: this,\n      context: new Context(command),\n      field: this.#field,\n      isMultiSort,\n    });\n  }\n\n  #subscribeSortingStartEvent(): void {\n    this.PubSub.subscribe('command:fetch:sort-start', (event: DataDenEvent) => {\n      const { field, order, isMultiSort, activeSorters } = event.data;\n\n      if (this.#field === field) {\n        this.#updateArrowDirectionAfterSort(order, isMultiSort);\n      }\n\n      this.#updateSortIndexOrder(activeSorters);\n    });\n  }\n\n  #updateArrowDirectionAfterSort(order: DataDenSortOrder, isMultiSort: boolean): void {\n    let arrowElements: Element[] = [];\n\n    if (!isMultiSort) {\n      arrowElements = [...document.querySelectorAll('[ref=\"sorterArrow\"]')];\n    } else {\n      arrowElements.push(this.arrowElement);\n    }\n\n    arrowElements.forEach((arrowElement) => {\n      arrowElement.classList.remove(\n        `${this.#cssPrefix}header-sorter-arrow-active`,\n        `${this.#cssPrefix}header-sorter-arrow-up`,\n        `${this.#cssPrefix}header-sorter-arrow-down`,\n      );\n    })\n\n    if (order) {\n      this.arrowElement.classList.add(\n        `${this.#cssPrefix}header-sorter-arrow-active`,\n      );\n    }\n\n    this.arrowElement.classList.add(\n      `${this.#cssPrefix}header-sorter-arrow-${this.#getArrowDirection(order)}`\n    );\n  }\n\n  #getArrowDirection(order: DataDenSortOrder): 'up' | 'down' {\n    const nextOrderIdx = (this.#sortSequence.indexOf(order) + (order === null ? 1 : 0)) % this.#sortSequence.length;\n    const nextOrder = this.#sortSequence[nextOrderIdx];\n\n    return nextOrder === 'asc' ? 'up' : 'down';\n  }\n\n  #updateSortIndexOrder(activeSorters: DataDenActiveSorter[]) {\n    const indexElement = this.element.querySelector('[ref=\"sorterIndex\"]');\n    const activeSorter = activeSorters.find((sorter: DataDenActiveSorter) => sorter.field === this.#field);\n\n    if (activeSorters.length > 1 && activeSorter) {\n      const sortIndexNumber = activeSorter.sortIndex + 1;\n      indexElement.textContent = sortIndexNumber.toString();\n    } else {\n      indexElement.textContent = '';\n    }\n  }\n}\n","export abstract class DataDenHeaderResizerRenderer {\n  abstract getGui(): HTMLElement;\n  abstract destroy?(): void;\n}\n","import { createHtmlElement } from '../../../utils';\nimport { DataDenHeaderResizerRenderer } from './data-den-header-resizer-renderer.interface';\nimport { DataDenPubSub } from '../../../data-den-pub-sub';\nimport { Context } from '../../../context';\nimport { DataDenColDef } from '../../../data-den-options.interface';\n\nexport class DataDenHeaderDefaultResizerRenderer extends DataDenHeaderResizerRenderer {\n  element: HTMLElement;\n  #cssPrefix: string;\n  #isPinnedRight: boolean;\n\n  constructor(cssPrefix: string, colDef: DataDenColDef, private PubSub: DataDenPubSub) {\n    super();\n\n    this.#cssPrefix = cssPrefix;\n    this.#isPinnedRight = colDef.pinned === 'right';\n\n    const template = `<div class=\"${this.#cssPrefix}header-resizer ${\n      this.#isPinnedRight ? this.#cssPrefix + 'header-resizer-left' : ''\n    }\"></div>`;\n\n    this.element = createHtmlElement(template);\n    this.element.addEventListener('mousedown', this.#onMouseDown.bind(this));\n  }\n\n  getGui(): HTMLElement {\n    return this.element;\n  }\n\n  destroy() {}\n\n  #onMouseDown(event: MouseEvent): void {\n    event.stopPropagation();\n\n    this.PubSub.publish('info:resizing:mousedown', {\n      target: event.target,\n      isPinnedRight: this.#isPinnedRight,\n      context: new Context('info:resizing:mousedown'),\n    });\n  }\n}\n","export var top = 'top';\nexport var bottom = 'bottom';\nexport var right = 'right';\nexport var left = 'left';\nexport var auto = 'auto';\nexport var basePlacements = [top, bottom, right, left];\nexport var start = 'start';\nexport var end = 'end';\nexport var clippingParents = 'clippingParents';\nexport var viewport = 'viewport';\nexport var popper = 'popper';\nexport var reference = 'reference';\nexport var variationPlacements = /*#__PURE__*/basePlacements.reduce(function (acc, placement) {\n  return acc.concat([placement + \"-\" + start, placement + \"-\" + end]);\n}, []);\nexport var placements = /*#__PURE__*/[].concat(basePlacements, [auto]).reduce(function (acc, placement) {\n  return acc.concat([placement, placement + \"-\" + start, placement + \"-\" + end]);\n}, []); // modifiers that need to read the DOM\n\nexport var beforeRead = 'beforeRead';\nexport var read = 'read';\nexport var afterRead = 'afterRead'; // pure-logic modifiers\n\nexport var beforeMain = 'beforeMain';\nexport var main = 'main';\nexport var afterMain = 'afterMain'; // modifier with the purpose to write to the DOM (or write into a framework state)\n\nexport var beforeWrite = 'beforeWrite';\nexport var write = 'write';\nexport var afterWrite = 'afterWrite';\nexport var modifierPhases = [beforeRead, read, afterRead, beforeMain, main, afterMain, beforeWrite, write, afterWrite];","export default function getNodeName(element) {\n  return element ? (element.nodeName || '').toLowerCase() : null;\n}","export default function getWindow(node) {\n  if (node == null) {\n    return window;\n  }\n\n  if (node.toString() !== '[object Window]') {\n    var ownerDocument = node.ownerDocument;\n    return ownerDocument ? ownerDocument.defaultView || window : window;\n  }\n\n  return node;\n}","import getWindow from \"./getWindow.js\";\n\nfunction isElement(node) {\n  var OwnElement = getWindow(node).Element;\n  return node instanceof OwnElement || node instanceof Element;\n}\n\nfunction isHTMLElement(node) {\n  var OwnElement = getWindow(node).HTMLElement;\n  return node instanceof OwnElement || node instanceof HTMLElement;\n}\n\nfunction isShadowRoot(node) {\n  // IE 11 has no ShadowRoot\n  if (typeof ShadowRoot === 'undefined') {\n    return false;\n  }\n\n  var OwnElement = getWindow(node).ShadowRoot;\n  return node instanceof OwnElement || node instanceof ShadowRoot;\n}\n\nexport { isElement, isHTMLElement, isShadowRoot };","import getNodeName from \"../dom-utils/getNodeName.js\";\nimport { isHTMLElement } from \"../dom-utils/instanceOf.js\"; // This modifier takes the styles prepared by the `computeStyles` modifier\n// and applies them to the HTMLElements such as popper and arrow\n\nfunction applyStyles(_ref) {\n  var state = _ref.state;\n  Object.keys(state.elements).forEach(function (name) {\n    var style = state.styles[name] || {};\n    var attributes = state.attributes[name] || {};\n    var element = state.elements[name]; // arrow is optional + virtual elements\n\n    if (!isHTMLElement(element) || !getNodeName(element)) {\n      return;\n    } // Flow doesn't support to extend this property, but it's the most\n    // effective way to apply styles to an HTMLElement\n    // $FlowFixMe[cannot-write]\n\n\n    Object.assign(element.style, style);\n    Object.keys(attributes).forEach(function (name) {\n      var value = attributes[name];\n\n      if (value === false) {\n        element.removeAttribute(name);\n      } else {\n        element.setAttribute(name, value === true ? '' : value);\n      }\n    });\n  });\n}\n\nfunction effect(_ref2) {\n  var state = _ref2.state;\n  var initialStyles = {\n    popper: {\n      position: state.options.strategy,\n      left: '0',\n      top: '0',\n      margin: '0'\n    },\n    arrow: {\n      position: 'absolute'\n    },\n    reference: {}\n  };\n  Object.assign(state.elements.popper.style, initialStyles.popper);\n  state.styles = initialStyles;\n\n  if (state.elements.arrow) {\n    Object.assign(state.elements.arrow.style, initialStyles.arrow);\n  }\n\n  return function () {\n    Object.keys(state.elements).forEach(function (name) {\n      var element = state.elements[name];\n      var attributes = state.attributes[name] || {};\n      var styleProperties = Object.keys(state.styles.hasOwnProperty(name) ? state.styles[name] : initialStyles[name]); // Set all values to an empty string to unset them\n\n      var style = styleProperties.reduce(function (style, property) {\n        style[property] = '';\n        return style;\n      }, {}); // arrow is optional + virtual elements\n\n      if (!isHTMLElement(element) || !getNodeName(element)) {\n        return;\n      }\n\n      Object.assign(element.style, style);\n      Object.keys(attributes).forEach(function (attribute) {\n        element.removeAttribute(attribute);\n      });\n    });\n  };\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'applyStyles',\n  enabled: true,\n  phase: 'write',\n  fn: applyStyles,\n  effect: effect,\n  requires: ['computeStyles']\n};","import { auto } from \"../enums.js\";\nexport default function getBasePlacement(placement) {\n  return placement.split('-')[0];\n}","export var max = Math.max;\nexport var min = Math.min;\nexport var round = Math.round;","export default function getUAString() {\n  var uaData = navigator.userAgentData;\n\n  if (uaData != null && uaData.brands && Array.isArray(uaData.brands)) {\n    return uaData.brands.map(function (item) {\n      return item.brand + \"/\" + item.version;\n    }).join(' ');\n  }\n\n  return navigator.userAgent;\n}","import getUAString from \"../utils/userAgent.js\";\nexport default function isLayoutViewport() {\n  return !/^((?!chrome|android).)*safari/i.test(getUAString());\n}","import { isElement, isHTMLElement } from \"./instanceOf.js\";\nimport { round } from \"../utils/math.js\";\nimport getWindow from \"./getWindow.js\";\nimport isLayoutViewport from \"./isLayoutViewport.js\";\nexport default function getBoundingClientRect(element, includeScale, isFixedStrategy) {\n  if (includeScale === void 0) {\n    includeScale = false;\n  }\n\n  if (isFixedStrategy === void 0) {\n    isFixedStrategy = false;\n  }\n\n  var clientRect = element.getBoundingClientRect();\n  var scaleX = 1;\n  var scaleY = 1;\n\n  if (includeScale && isHTMLElement(element)) {\n    scaleX = element.offsetWidth > 0 ? round(clientRect.width) / element.offsetWidth || 1 : 1;\n    scaleY = element.offsetHeight > 0 ? round(clientRect.height) / element.offsetHeight || 1 : 1;\n  }\n\n  var _ref = isElement(element) ? getWindow(element) : window,\n      visualViewport = _ref.visualViewport;\n\n  var addVisualOffsets = !isLayoutViewport() && isFixedStrategy;\n  var x = (clientRect.left + (addVisualOffsets && visualViewport ? visualViewport.offsetLeft : 0)) / scaleX;\n  var y = (clientRect.top + (addVisualOffsets && visualViewport ? visualViewport.offsetTop : 0)) / scaleY;\n  var width = clientRect.width / scaleX;\n  var height = clientRect.height / scaleY;\n  return {\n    width: width,\n    height: height,\n    top: y,\n    right: x + width,\n    bottom: y + height,\n    left: x,\n    x: x,\n    y: y\n  };\n}","import getBoundingClientRect from \"./getBoundingClientRect.js\"; // Returns the layout rect of an element relative to its offsetParent. Layout\n// means it doesn't take into account transforms.\n\nexport default function getLayoutRect(element) {\n  var clientRect = getBoundingClientRect(element); // Use the clientRect sizes if it's not been transformed.\n  // Fixes https://github.com/popperjs/popper-core/issues/1223\n\n  var width = element.offsetWidth;\n  var height = element.offsetHeight;\n\n  if (Math.abs(clientRect.width - width) <= 1) {\n    width = clientRect.width;\n  }\n\n  if (Math.abs(clientRect.height - height) <= 1) {\n    height = clientRect.height;\n  }\n\n  return {\n    x: element.offsetLeft,\n    y: element.offsetTop,\n    width: width,\n    height: height\n  };\n}","import { isShadowRoot } from \"./instanceOf.js\";\nexport default function contains(parent, child) {\n  var rootNode = child.getRootNode && child.getRootNode(); // First, attempt with faster native method\n\n  if (parent.contains(child)) {\n    return true;\n  } // then fallback to custom implementation with Shadow DOM support\n  else if (rootNode && isShadowRoot(rootNode)) {\n      var next = child;\n\n      do {\n        if (next && parent.isSameNode(next)) {\n          return true;\n        } // $FlowFixMe[prop-missing]: need a better way to handle this...\n\n\n        next = next.parentNode || next.host;\n      } while (next);\n    } // Give up, the result is false\n\n\n  return false;\n}","import getWindow from \"./getWindow.js\";\nexport default function getComputedStyle(element) {\n  return getWindow(element).getComputedStyle(element);\n}","import getNodeName from \"./getNodeName.js\";\nexport default function isTableElement(element) {\n  return ['table', 'td', 'th'].indexOf(getNodeName(element)) >= 0;\n}","import { isElement } from \"./instanceOf.js\";\nexport default function getDocumentElement(element) {\n  // $FlowFixMe[incompatible-return]: assume body is always available\n  return ((isElement(element) ? element.ownerDocument : // $FlowFixMe[prop-missing]\n  element.document) || window.document).documentElement;\n}","import getNodeName from \"./getNodeName.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport { isShadowRoot } from \"./instanceOf.js\";\nexport default function getParentNode(element) {\n  if (getNodeName(element) === 'html') {\n    return element;\n  }\n\n  return (// this is a quicker (but less type safe) way to save quite some bytes from the bundle\n    // $FlowFixMe[incompatible-return]\n    // $FlowFixMe[prop-missing]\n    element.assignedSlot || // step into the shadow DOM of the parent of a slotted node\n    element.parentNode || ( // DOM Element detected\n    isShadowRoot(element) ? element.host : null) || // ShadowRoot detected\n    // $FlowFixMe[incompatible-call]: HTMLElement is a Node\n    getDocumentElement(element) // fallback\n\n  );\n}","import getWindow from \"./getWindow.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport getComputedStyle from \"./getComputedStyle.js\";\nimport { isHTMLElement, isShadowRoot } from \"./instanceOf.js\";\nimport isTableElement from \"./isTableElement.js\";\nimport getParentNode from \"./getParentNode.js\";\nimport getUAString from \"../utils/userAgent.js\";\n\nfunction getTrueOffsetParent(element) {\n  if (!isHTMLElement(element) || // https://github.com/popperjs/popper-core/issues/837\n  getComputedStyle(element).position === 'fixed') {\n    return null;\n  }\n\n  return element.offsetParent;\n} // `.offsetParent` reports `null` for fixed elements, while absolute elements\n// return the containing block\n\n\nfunction getContainingBlock(element) {\n  var isFirefox = /firefox/i.test(getUAString());\n  var isIE = /Trident/i.test(getUAString());\n\n  if (isIE && isHTMLElement(element)) {\n    // In IE 9, 10 and 11 fixed elements containing block is always established by the viewport\n    var elementCss = getComputedStyle(element);\n\n    if (elementCss.position === 'fixed') {\n      return null;\n    }\n  }\n\n  var currentNode = getParentNode(element);\n\n  if (isShadowRoot(currentNode)) {\n    currentNode = currentNode.host;\n  }\n\n  while (isHTMLElement(currentNode) && ['html', 'body'].indexOf(getNodeName(currentNode)) < 0) {\n    var css = getComputedStyle(currentNode); // This is non-exhaustive but covers the most common CSS properties that\n    // create a containing block.\n    // https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_block#identifying_the_containing_block\n\n    if (css.transform !== 'none' || css.perspective !== 'none' || css.contain === 'paint' || ['transform', 'perspective'].indexOf(css.willChange) !== -1 || isFirefox && css.willChange === 'filter' || isFirefox && css.filter && css.filter !== 'none') {\n      return currentNode;\n    } else {\n      currentNode = currentNode.parentNode;\n    }\n  }\n\n  return null;\n} // Gets the closest ancestor positioned element. Handles some edge cases,\n// such as table ancestors and cross browser bugs.\n\n\nexport default function getOffsetParent(element) {\n  var window = getWindow(element);\n  var offsetParent = getTrueOffsetParent(element);\n\n  while (offsetParent && isTableElement(offsetParent) && getComputedStyle(offsetParent).position === 'static') {\n    offsetParent = getTrueOffsetParent(offsetParent);\n  }\n\n  if (offsetParent && (getNodeName(offsetParent) === 'html' || getNodeName(offsetParent) === 'body' && getComputedStyle(offsetParent).position === 'static')) {\n    return window;\n  }\n\n  return offsetParent || getContainingBlock(element) || window;\n}","export default function getMainAxisFromPlacement(placement) {\n  return ['top', 'bottom'].indexOf(placement) >= 0 ? 'x' : 'y';\n}","import { max as mathMax, min as mathMin } from \"./math.js\";\nexport function within(min, value, max) {\n  return mathMax(min, mathMin(value, max));\n}\nexport function withinMaxClamp(min, value, max) {\n  var v = within(min, value, max);\n  return v > max ? max : v;\n}","export default function getFreshSideObject() {\n  return {\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0\n  };\n}","import getFreshSideObject from \"./getFreshSideObject.js\";\nexport default function mergePaddingObject(paddingObject) {\n  return Object.assign({}, getFreshSideObject(), paddingObject);\n}","export default function expandToHashMap(value, keys) {\n  return keys.reduce(function (hashMap, key) {\n    hashMap[key] = value;\n    return hashMap;\n  }, {});\n}","import getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getLayoutRect from \"../dom-utils/getLayoutRect.js\";\nimport contains from \"../dom-utils/contains.js\";\nimport getOffsetParent from \"../dom-utils/getOffsetParent.js\";\nimport getMainAxisFromPlacement from \"../utils/getMainAxisFromPlacement.js\";\nimport { within } from \"../utils/within.js\";\nimport mergePaddingObject from \"../utils/mergePaddingObject.js\";\nimport expandToHashMap from \"../utils/expandToHashMap.js\";\nimport { left, right, basePlacements, top, bottom } from \"../enums.js\"; // eslint-disable-next-line import/no-unused-modules\n\nvar toPaddingObject = function toPaddingObject(padding, state) {\n  padding = typeof padding === 'function' ? padding(Object.assign({}, state.rects, {\n    placement: state.placement\n  })) : padding;\n  return mergePaddingObject(typeof padding !== 'number' ? padding : expandToHashMap(padding, basePlacements));\n};\n\nfunction arrow(_ref) {\n  var _state$modifiersData$;\n\n  var state = _ref.state,\n      name = _ref.name,\n      options = _ref.options;\n  var arrowElement = state.elements.arrow;\n  var popperOffsets = state.modifiersData.popperOffsets;\n  var basePlacement = getBasePlacement(state.placement);\n  var axis = getMainAxisFromPlacement(basePlacement);\n  var isVertical = [left, right].indexOf(basePlacement) >= 0;\n  var len = isVertical ? 'height' : 'width';\n\n  if (!arrowElement || !popperOffsets) {\n    return;\n  }\n\n  var paddingObject = toPaddingObject(options.padding, state);\n  var arrowRect = getLayoutRect(arrowElement);\n  var minProp = axis === 'y' ? top : left;\n  var maxProp = axis === 'y' ? bottom : right;\n  var endDiff = state.rects.reference[len] + state.rects.reference[axis] - popperOffsets[axis] - state.rects.popper[len];\n  var startDiff = popperOffsets[axis] - state.rects.reference[axis];\n  var arrowOffsetParent = getOffsetParent(arrowElement);\n  var clientSize = arrowOffsetParent ? axis === 'y' ? arrowOffsetParent.clientHeight || 0 : arrowOffsetParent.clientWidth || 0 : 0;\n  var centerToReference = endDiff / 2 - startDiff / 2; // Make sure the arrow doesn't overflow the popper if the center point is\n  // outside of the popper bounds\n\n  var min = paddingObject[minProp];\n  var max = clientSize - arrowRect[len] - paddingObject[maxProp];\n  var center = clientSize / 2 - arrowRect[len] / 2 + centerToReference;\n  var offset = within(min, center, max); // Prevents breaking syntax highlighting...\n\n  var axisProp = axis;\n  state.modifiersData[name] = (_state$modifiersData$ = {}, _state$modifiersData$[axisProp] = offset, _state$modifiersData$.centerOffset = offset - center, _state$modifiersData$);\n}\n\nfunction effect(_ref2) {\n  var state = _ref2.state,\n      options = _ref2.options;\n  var _options$element = options.element,\n      arrowElement = _options$element === void 0 ? '[data-popper-arrow]' : _options$element;\n\n  if (arrowElement == null) {\n    return;\n  } // CSS selector\n\n\n  if (typeof arrowElement === 'string') {\n    arrowElement = state.elements.popper.querySelector(arrowElement);\n\n    if (!arrowElement) {\n      return;\n    }\n  }\n\n  if (!contains(state.elements.popper, arrowElement)) {\n    return;\n  }\n\n  state.elements.arrow = arrowElement;\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'arrow',\n  enabled: true,\n  phase: 'main',\n  fn: arrow,\n  effect: effect,\n  requires: ['popperOffsets'],\n  requiresIfExists: ['preventOverflow']\n};","export default function getVariation(placement) {\n  return placement.split('-')[1];\n}","import { top, left, right, bottom, end } from \"../enums.js\";\nimport getOffsetParent from \"../dom-utils/getOffsetParent.js\";\nimport getWindow from \"../dom-utils/getWindow.js\";\nimport getDocumentElement from \"../dom-utils/getDocumentElement.js\";\nimport getComputedStyle from \"../dom-utils/getComputedStyle.js\";\nimport getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getVariation from \"../utils/getVariation.js\";\nimport { round } from \"../utils/math.js\"; // eslint-disable-next-line import/no-unused-modules\n\nvar unsetSides = {\n  top: 'auto',\n  right: 'auto',\n  bottom: 'auto',\n  left: 'auto'\n}; // Round the offsets to the nearest suitable subpixel based on the DPR.\n// Zooming can change the DPR, but it seems to report a value that will\n// cleanly divide the values into the appropriate subpixels.\n\nfunction roundOffsetsByDPR(_ref, win) {\n  var x = _ref.x,\n      y = _ref.y;\n  var dpr = win.devicePixelRatio || 1;\n  return {\n    x: round(x * dpr) / dpr || 0,\n    y: round(y * dpr) / dpr || 0\n  };\n}\n\nexport function mapToStyles(_ref2) {\n  var _Object$assign2;\n\n  var popper = _ref2.popper,\n      popperRect = _ref2.popperRect,\n      placement = _ref2.placement,\n      variation = _ref2.variation,\n      offsets = _ref2.offsets,\n      position = _ref2.position,\n      gpuAcceleration = _ref2.gpuAcceleration,\n      adaptive = _ref2.adaptive,\n      roundOffsets = _ref2.roundOffsets,\n      isFixed = _ref2.isFixed;\n  var _offsets$x = offsets.x,\n      x = _offsets$x === void 0 ? 0 : _offsets$x,\n      _offsets$y = offsets.y,\n      y = _offsets$y === void 0 ? 0 : _offsets$y;\n\n  var _ref3 = typeof roundOffsets === 'function' ? roundOffsets({\n    x: x,\n    y: y\n  }) : {\n    x: x,\n    y: y\n  };\n\n  x = _ref3.x;\n  y = _ref3.y;\n  var hasX = offsets.hasOwnProperty('x');\n  var hasY = offsets.hasOwnProperty('y');\n  var sideX = left;\n  var sideY = top;\n  var win = window;\n\n  if (adaptive) {\n    var offsetParent = getOffsetParent(popper);\n    var heightProp = 'clientHeight';\n    var widthProp = 'clientWidth';\n\n    if (offsetParent === getWindow(popper)) {\n      offsetParent = getDocumentElement(popper);\n\n      if (getComputedStyle(offsetParent).position !== 'static' && position === 'absolute') {\n        heightProp = 'scrollHeight';\n        widthProp = 'scrollWidth';\n      }\n    } // $FlowFixMe[incompatible-cast]: force type refinement, we compare offsetParent with window above, but Flow doesn't detect it\n\n\n    offsetParent = offsetParent;\n\n    if (placement === top || (placement === left || placement === right) && variation === end) {\n      sideY = bottom;\n      var offsetY = isFixed && offsetParent === win && win.visualViewport ? win.visualViewport.height : // $FlowFixMe[prop-missing]\n      offsetParent[heightProp];\n      y -= offsetY - popperRect.height;\n      y *= gpuAcceleration ? 1 : -1;\n    }\n\n    if (placement === left || (placement === top || placement === bottom) && variation === end) {\n      sideX = right;\n      var offsetX = isFixed && offsetParent === win && win.visualViewport ? win.visualViewport.width : // $FlowFixMe[prop-missing]\n      offsetParent[widthProp];\n      x -= offsetX - popperRect.width;\n      x *= gpuAcceleration ? 1 : -1;\n    }\n  }\n\n  var commonStyles = Object.assign({\n    position: position\n  }, adaptive && unsetSides);\n\n  var _ref4 = roundOffsets === true ? roundOffsetsByDPR({\n    x: x,\n    y: y\n  }, getWindow(popper)) : {\n    x: x,\n    y: y\n  };\n\n  x = _ref4.x;\n  y = _ref4.y;\n\n  if (gpuAcceleration) {\n    var _Object$assign;\n\n    return Object.assign({}, commonStyles, (_Object$assign = {}, _Object$assign[sideY] = hasY ? '0' : '', _Object$assign[sideX] = hasX ? '0' : '', _Object$assign.transform = (win.devicePixelRatio || 1) <= 1 ? \"translate(\" + x + \"px, \" + y + \"px)\" : \"translate3d(\" + x + \"px, \" + y + \"px, 0)\", _Object$assign));\n  }\n\n  return Object.assign({}, commonStyles, (_Object$assign2 = {}, _Object$assign2[sideY] = hasY ? y + \"px\" : '', _Object$assign2[sideX] = hasX ? x + \"px\" : '', _Object$assign2.transform = '', _Object$assign2));\n}\n\nfunction computeStyles(_ref5) {\n  var state = _ref5.state,\n      options = _ref5.options;\n  var _options$gpuAccelerat = options.gpuAcceleration,\n      gpuAcceleration = _options$gpuAccelerat === void 0 ? true : _options$gpuAccelerat,\n      _options$adaptive = options.adaptive,\n      adaptive = _options$adaptive === void 0 ? true : _options$adaptive,\n      _options$roundOffsets = options.roundOffsets,\n      roundOffsets = _options$roundOffsets === void 0 ? true : _options$roundOffsets;\n  var commonStyles = {\n    placement: getBasePlacement(state.placement),\n    variation: getVariation(state.placement),\n    popper: state.elements.popper,\n    popperRect: state.rects.popper,\n    gpuAcceleration: gpuAcceleration,\n    isFixed: state.options.strategy === 'fixed'\n  };\n\n  if (state.modifiersData.popperOffsets != null) {\n    state.styles.popper = Object.assign({}, state.styles.popper, mapToStyles(Object.assign({}, commonStyles, {\n      offsets: state.modifiersData.popperOffsets,\n      position: state.options.strategy,\n      adaptive: adaptive,\n      roundOffsets: roundOffsets\n    })));\n  }\n\n  if (state.modifiersData.arrow != null) {\n    state.styles.arrow = Object.assign({}, state.styles.arrow, mapToStyles(Object.assign({}, commonStyles, {\n      offsets: state.modifiersData.arrow,\n      position: 'absolute',\n      adaptive: false,\n      roundOffsets: roundOffsets\n    })));\n  }\n\n  state.attributes.popper = Object.assign({}, state.attributes.popper, {\n    'data-popper-placement': state.placement\n  });\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'computeStyles',\n  enabled: true,\n  phase: 'beforeWrite',\n  fn: computeStyles,\n  data: {}\n};","import getWindow from \"../dom-utils/getWindow.js\"; // eslint-disable-next-line import/no-unused-modules\n\nvar passive = {\n  passive: true\n};\n\nfunction effect(_ref) {\n  var state = _ref.state,\n      instance = _ref.instance,\n      options = _ref.options;\n  var _options$scroll = options.scroll,\n      scroll = _options$scroll === void 0 ? true : _options$scroll,\n      _options$resize = options.resize,\n      resize = _options$resize === void 0 ? true : _options$resize;\n  var window = getWindow(state.elements.popper);\n  var scrollParents = [].concat(state.scrollParents.reference, state.scrollParents.popper);\n\n  if (scroll) {\n    scrollParents.forEach(function (scrollParent) {\n      scrollParent.addEventListener('scroll', instance.update, passive);\n    });\n  }\n\n  if (resize) {\n    window.addEventListener('resize', instance.update, passive);\n  }\n\n  return function () {\n    if (scroll) {\n      scrollParents.forEach(function (scrollParent) {\n        scrollParent.removeEventListener('scroll', instance.update, passive);\n      });\n    }\n\n    if (resize) {\n      window.removeEventListener('resize', instance.update, passive);\n    }\n  };\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'eventListeners',\n  enabled: true,\n  phase: 'write',\n  fn: function fn() {},\n  effect: effect,\n  data: {}\n};","var hash = {\n  left: 'right',\n  right: 'left',\n  bottom: 'top',\n  top: 'bottom'\n};\nexport default function getOppositePlacement(placement) {\n  return placement.replace(/left|right|bottom|top/g, function (matched) {\n    return hash[matched];\n  });\n}","var hash = {\n  start: 'end',\n  end: 'start'\n};\nexport default function getOppositeVariationPlacement(placement) {\n  return placement.replace(/start|end/g, function (matched) {\n    return hash[matched];\n  });\n}","import getWindow from \"./getWindow.js\";\nexport default function getWindowScroll(node) {\n  var win = getWindow(node);\n  var scrollLeft = win.pageXOffset;\n  var scrollTop = win.pageYOffset;\n  return {\n    scrollLeft: scrollLeft,\n    scrollTop: scrollTop\n  };\n}","import getBoundingClientRect from \"./getBoundingClientRect.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport getWindowScroll from \"./getWindowScroll.js\";\nexport default function getWindowScrollBarX(element) {\n  // If <html> has a CSS width greater than the viewport, then this will be\n  // incorrect for RTL.\n  // Popper 1 is broken in this case and never had a bug report so let's assume\n  // it's not an issue. I don't think anyone ever specifies width on <html>\n  // anyway.\n  // Browsers where the left scrollbar doesn't cause an issue report `0` for\n  // this (e.g. Edge 2019, IE11, Safari)\n  return getBoundingClientRect(getDocumentElement(element)).left + getWindowScroll(element).scrollLeft;\n}","import getWindow from \"./getWindow.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport getWindowScrollBarX from \"./getWindowScrollBarX.js\";\nimport isLayoutViewport from \"./isLayoutViewport.js\";\nexport default function getViewportRect(element, strategy) {\n  var win = getWindow(element);\n  var html = getDocumentElement(element);\n  var visualViewport = win.visualViewport;\n  var width = html.clientWidth;\n  var height = html.clientHeight;\n  var x = 0;\n  var y = 0;\n\n  if (visualViewport) {\n    width = visualViewport.width;\n    height = visualViewport.height;\n    var layoutViewport = isLayoutViewport();\n\n    if (layoutViewport || !layoutViewport && strategy === 'fixed') {\n      x = visualViewport.offsetLeft;\n      y = visualViewport.offsetTop;\n    }\n  }\n\n  return {\n    width: width,\n    height: height,\n    x: x + getWindowScrollBarX(element),\n    y: y\n  };\n}","import getDocumentElement from \"./getDocumentElement.js\";\nimport getComputedStyle from \"./getComputedStyle.js\";\nimport getWindowScrollBarX from \"./getWindowScrollBarX.js\";\nimport getWindowScroll from \"./getWindowScroll.js\";\nimport { max } from \"../utils/math.js\"; // Gets the entire size of the scrollable document area, even extending outside\n// of the `<html>` and `<body>` rect bounds if horizontally scrollable\n\nexport default function getDocumentRect(element) {\n  var _element$ownerDocumen;\n\n  var html = getDocumentElement(element);\n  var winScroll = getWindowScroll(element);\n  var body = (_element$ownerDocumen = element.ownerDocument) == null ? void 0 : _element$ownerDocumen.body;\n  var width = max(html.scrollWidth, html.clientWidth, body ? body.scrollWidth : 0, body ? body.clientWidth : 0);\n  var height = max(html.scrollHeight, html.clientHeight, body ? body.scrollHeight : 0, body ? body.clientHeight : 0);\n  var x = -winScroll.scrollLeft + getWindowScrollBarX(element);\n  var y = -winScroll.scrollTop;\n\n  if (getComputedStyle(body || html).direction === 'rtl') {\n    x += max(html.clientWidth, body ? body.clientWidth : 0) - width;\n  }\n\n  return {\n    width: width,\n    height: height,\n    x: x,\n    y: y\n  };\n}","import getComputedStyle from \"./getComputedStyle.js\";\nexport default function isScrollParent(element) {\n  // Firefox wants us to check `-x` and `-y` variations as well\n  var _getComputedStyle = getComputedStyle(element),\n      overflow = _getComputedStyle.overflow,\n      overflowX = _getComputedStyle.overflowX,\n      overflowY = _getComputedStyle.overflowY;\n\n  return /auto|scroll|overlay|hidden/.test(overflow + overflowY + overflowX);\n}","import getParentNode from \"./getParentNode.js\";\nimport isScrollParent from \"./isScrollParent.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\nexport default function getScrollParent(node) {\n  if (['html', 'body', '#document'].indexOf(getNodeName(node)) >= 0) {\n    // $FlowFixMe[incompatible-return]: assume body is always available\n    return node.ownerDocument.body;\n  }\n\n  if (isHTMLElement(node) && isScrollParent(node)) {\n    return node;\n  }\n\n  return getScrollParent(getParentNode(node));\n}","import getScrollParent from \"./getScrollParent.js\";\nimport getParentNode from \"./getParentNode.js\";\nimport getWindow from \"./getWindow.js\";\nimport isScrollParent from \"./isScrollParent.js\";\n/*\ngiven a DOM element, return the list of all scroll parents, up the list of ancesors\nuntil we get to the top window object. This list is what we attach scroll listeners\nto, because if any of these parent elements scroll, we'll need to re-calculate the\nreference element's position.\n*/\n\nexport default function listScrollParents(element, list) {\n  var _element$ownerDocumen;\n\n  if (list === void 0) {\n    list = [];\n  }\n\n  var scrollParent = getScrollParent(element);\n  var isBody = scrollParent === ((_element$ownerDocumen = element.ownerDocument) == null ? void 0 : _element$ownerDocumen.body);\n  var win = getWindow(scrollParent);\n  var target = isBody ? [win].concat(win.visualViewport || [], isScrollParent(scrollParent) ? scrollParent : []) : scrollParent;\n  var updatedList = list.concat(target);\n  return isBody ? updatedList : // $FlowFixMe[incompatible-call]: isBody tells us target will be an HTMLElement here\n  updatedList.concat(listScrollParents(getParentNode(target)));\n}","export default function rectToClientRect(rect) {\n  return Object.assign({}, rect, {\n    left: rect.x,\n    top: rect.y,\n    right: rect.x + rect.width,\n    bottom: rect.y + rect.height\n  });\n}","import { viewport } from \"../enums.js\";\nimport getViewportRect from \"./getViewportRect.js\";\nimport getDocumentRect from \"./getDocumentRect.js\";\nimport listScrollParents from \"./listScrollParents.js\";\nimport getOffsetParent from \"./getOffsetParent.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport getComputedStyle from \"./getComputedStyle.js\";\nimport { isElement, isHTMLElement } from \"./instanceOf.js\";\nimport getBoundingClientRect from \"./getBoundingClientRect.js\";\nimport getParentNode from \"./getParentNode.js\";\nimport contains from \"./contains.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport rectToClientRect from \"../utils/rectToClientRect.js\";\nimport { max, min } from \"../utils/math.js\";\n\nfunction getInnerBoundingClientRect(element, strategy) {\n  var rect = getBoundingClientRect(element, false, strategy === 'fixed');\n  rect.top = rect.top + element.clientTop;\n  rect.left = rect.left + element.clientLeft;\n  rect.bottom = rect.top + element.clientHeight;\n  rect.right = rect.left + element.clientWidth;\n  rect.width = element.clientWidth;\n  rect.height = element.clientHeight;\n  rect.x = rect.left;\n  rect.y = rect.top;\n  return rect;\n}\n\nfunction getClientRectFromMixedType(element, clippingParent, strategy) {\n  return clippingParent === viewport ? rectToClientRect(getViewportRect(element, strategy)) : isElement(clippingParent) ? getInnerBoundingClientRect(clippingParent, strategy) : rectToClientRect(getDocumentRect(getDocumentElement(element)));\n} // A \"clipping parent\" is an overflowable container with the characteristic of\n// clipping (or hiding) overflowing elements with a position different from\n// `initial`\n\n\nfunction getClippingParents(element) {\n  var clippingParents = listScrollParents(getParentNode(element));\n  var canEscapeClipping = ['absolute', 'fixed'].indexOf(getComputedStyle(element).position) >= 0;\n  var clipperElement = canEscapeClipping && isHTMLElement(element) ? getOffsetParent(element) : element;\n\n  if (!isElement(clipperElement)) {\n    return [];\n  } // $FlowFixMe[incompatible-return]: https://github.com/facebook/flow/issues/1414\n\n\n  return clippingParents.filter(function (clippingParent) {\n    return isElement(clippingParent) && contains(clippingParent, clipperElement) && getNodeName(clippingParent) !== 'body';\n  });\n} // Gets the maximum area that the element is visible in due to any number of\n// clipping parents\n\n\nexport default function getClippingRect(element, boundary, rootBoundary, strategy) {\n  var mainClippingParents = boundary === 'clippingParents' ? getClippingParents(element) : [].concat(boundary);\n  var clippingParents = [].concat(mainClippingParents, [rootBoundary]);\n  var firstClippingParent = clippingParents[0];\n  var clippingRect = clippingParents.reduce(function (accRect, clippingParent) {\n    var rect = getClientRectFromMixedType(element, clippingParent, strategy);\n    accRect.top = max(rect.top, accRect.top);\n    accRect.right = min(rect.right, accRect.right);\n    accRect.bottom = min(rect.bottom, accRect.bottom);\n    accRect.left = max(rect.left, accRect.left);\n    return accRect;\n  }, getClientRectFromMixedType(element, firstClippingParent, strategy));\n  clippingRect.width = clippingRect.right - clippingRect.left;\n  clippingRect.height = clippingRect.bottom - clippingRect.top;\n  clippingRect.x = clippingRect.left;\n  clippingRect.y = clippingRect.top;\n  return clippingRect;\n}","import getBasePlacement from \"./getBasePlacement.js\";\nimport getVariation from \"./getVariation.js\";\nimport getMainAxisFromPlacement from \"./getMainAxisFromPlacement.js\";\nimport { top, right, bottom, left, start, end } from \"../enums.js\";\nexport default function computeOffsets(_ref) {\n  var reference = _ref.reference,\n      element = _ref.element,\n      placement = _ref.placement;\n  var basePlacement = placement ? getBasePlacement(placement) : null;\n  var variation = placement ? getVariation(placement) : null;\n  var commonX = reference.x + reference.width / 2 - element.width / 2;\n  var commonY = reference.y + reference.height / 2 - element.height / 2;\n  var offsets;\n\n  switch (basePlacement) {\n    case top:\n      offsets = {\n        x: commonX,\n        y: reference.y - element.height\n      };\n      break;\n\n    case bottom:\n      offsets = {\n        x: commonX,\n        y: reference.y + reference.height\n      };\n      break;\n\n    case right:\n      offsets = {\n        x: reference.x + reference.width,\n        y: commonY\n      };\n      break;\n\n    case left:\n      offsets = {\n        x: reference.x - element.width,\n        y: commonY\n      };\n      break;\n\n    default:\n      offsets = {\n        x: reference.x,\n        y: reference.y\n      };\n  }\n\n  var mainAxis = basePlacement ? getMainAxisFromPlacement(basePlacement) : null;\n\n  if (mainAxis != null) {\n    var len = mainAxis === 'y' ? 'height' : 'width';\n\n    switch (variation) {\n      case start:\n        offsets[mainAxis] = offsets[mainAxis] - (reference[len] / 2 - element[len] / 2);\n        break;\n\n      case end:\n        offsets[mainAxis] = offsets[mainAxis] + (reference[len] / 2 - element[len] / 2);\n        break;\n\n      default:\n    }\n  }\n\n  return offsets;\n}","import getClippingRect from \"../dom-utils/getClippingRect.js\";\nimport getDocumentElement from \"../dom-utils/getDocumentElement.js\";\nimport getBoundingClientRect from \"../dom-utils/getBoundingClientRect.js\";\nimport computeOffsets from \"./computeOffsets.js\";\nimport rectToClientRect from \"./rectToClientRect.js\";\nimport { clippingParents, reference, popper, bottom, top, right, basePlacements, viewport } from \"../enums.js\";\nimport { isElement } from \"../dom-utils/instanceOf.js\";\nimport mergePaddingObject from \"./mergePaddingObject.js\";\nimport expandToHashMap from \"./expandToHashMap.js\"; // eslint-disable-next-line import/no-unused-modules\n\nexport default function detectOverflow(state, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _options = options,\n      _options$placement = _options.placement,\n      placement = _options$placement === void 0 ? state.placement : _options$placement,\n      _options$strategy = _options.strategy,\n      strategy = _options$strategy === void 0 ? state.strategy : _options$strategy,\n      _options$boundary = _options.boundary,\n      boundary = _options$boundary === void 0 ? clippingParents : _options$boundary,\n      _options$rootBoundary = _options.rootBoundary,\n      rootBoundary = _options$rootBoundary === void 0 ? viewport : _options$rootBoundary,\n      _options$elementConte = _options.elementContext,\n      elementContext = _options$elementConte === void 0 ? popper : _options$elementConte,\n      _options$altBoundary = _options.altBoundary,\n      altBoundary = _options$altBoundary === void 0 ? false : _options$altBoundary,\n      _options$padding = _options.padding,\n      padding = _options$padding === void 0 ? 0 : _options$padding;\n  var paddingObject = mergePaddingObject(typeof padding !== 'number' ? padding : expandToHashMap(padding, basePlacements));\n  var altContext = elementContext === popper ? reference : popper;\n  var popperRect = state.rects.popper;\n  var element = state.elements[altBoundary ? altContext : elementContext];\n  var clippingClientRect = getClippingRect(isElement(element) ? element : element.contextElement || getDocumentElement(state.elements.popper), boundary, rootBoundary, strategy);\n  var referenceClientRect = getBoundingClientRect(state.elements.reference);\n  var popperOffsets = computeOffsets({\n    reference: referenceClientRect,\n    element: popperRect,\n    strategy: 'absolute',\n    placement: placement\n  });\n  var popperClientRect = rectToClientRect(Object.assign({}, popperRect, popperOffsets));\n  var elementClientRect = elementContext === popper ? popperClientRect : referenceClientRect; // positive = overflowing the clipping rect\n  // 0 or negative = within the clipping rect\n\n  var overflowOffsets = {\n    top: clippingClientRect.top - elementClientRect.top + paddingObject.top,\n    bottom: elementClientRect.bottom - clippingClientRect.bottom + paddingObject.bottom,\n    left: clippingClientRect.left - elementClientRect.left + paddingObject.left,\n    right: elementClientRect.right - clippingClientRect.right + paddingObject.right\n  };\n  var offsetData = state.modifiersData.offset; // Offsets can be applied only to the popper element\n\n  if (elementContext === popper && offsetData) {\n    var offset = offsetData[placement];\n    Object.keys(overflowOffsets).forEach(function (key) {\n      var multiply = [right, bottom].indexOf(key) >= 0 ? 1 : -1;\n      var axis = [top, bottom].indexOf(key) >= 0 ? 'y' : 'x';\n      overflowOffsets[key] += offset[axis] * multiply;\n    });\n  }\n\n  return overflowOffsets;\n}","import getVariation from \"./getVariation.js\";\nimport { variationPlacements, basePlacements, placements as allPlacements } from \"../enums.js\";\nimport detectOverflow from \"./detectOverflow.js\";\nimport getBasePlacement from \"./getBasePlacement.js\";\nexport default function computeAutoPlacement(state, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _options = options,\n      placement = _options.placement,\n      boundary = _options.boundary,\n      rootBoundary = _options.rootBoundary,\n      padding = _options.padding,\n      flipVariations = _options.flipVariations,\n      _options$allowedAutoP = _options.allowedAutoPlacements,\n      allowedAutoPlacements = _options$allowedAutoP === void 0 ? allPlacements : _options$allowedAutoP;\n  var variation = getVariation(placement);\n  var placements = variation ? flipVariations ? variationPlacements : variationPlacements.filter(function (placement) {\n    return getVariation(placement) === variation;\n  }) : basePlacements;\n  var allowedPlacements = placements.filter(function (placement) {\n    return allowedAutoPlacements.indexOf(placement) >= 0;\n  });\n\n  if (allowedPlacements.length === 0) {\n    allowedPlacements = placements;\n  } // $FlowFixMe[incompatible-type]: Flow seems to have problems with two array unions...\n\n\n  var overflows = allowedPlacements.reduce(function (acc, placement) {\n    acc[placement] = detectOverflow(state, {\n      placement: placement,\n      boundary: boundary,\n      rootBoundary: rootBoundary,\n      padding: padding\n    })[getBasePlacement(placement)];\n    return acc;\n  }, {});\n  return Object.keys(overflows).sort(function (a, b) {\n    return overflows[a] - overflows[b];\n  });\n}","import getOppositePlacement from \"../utils/getOppositePlacement.js\";\nimport getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getOppositeVariationPlacement from \"../utils/getOppositeVariationPlacement.js\";\nimport detectOverflow from \"../utils/detectOverflow.js\";\nimport computeAutoPlacement from \"../utils/computeAutoPlacement.js\";\nimport { bottom, top, start, right, left, auto } from \"../enums.js\";\nimport getVariation from \"../utils/getVariation.js\"; // eslint-disable-next-line import/no-unused-modules\n\nfunction getExpandedFallbackPlacements(placement) {\n  if (getBasePlacement(placement) === auto) {\n    return [];\n  }\n\n  var oppositePlacement = getOppositePlacement(placement);\n  return [getOppositeVariationPlacement(placement), oppositePlacement, getOppositeVariationPlacement(oppositePlacement)];\n}\n\nfunction flip(_ref) {\n  var state = _ref.state,\n      options = _ref.options,\n      name = _ref.name;\n\n  if (state.modifiersData[name]._skip) {\n    return;\n  }\n\n  var _options$mainAxis = options.mainAxis,\n      checkMainAxis = _options$mainAxis === void 0 ? true : _options$mainAxis,\n      _options$altAxis = options.altAxis,\n      checkAltAxis = _options$altAxis === void 0 ? true : _options$altAxis,\n      specifiedFallbackPlacements = options.fallbackPlacements,\n      padding = options.padding,\n      boundary = options.boundary,\n      rootBoundary = options.rootBoundary,\n      altBoundary = options.altBoundary,\n      _options$flipVariatio = options.flipVariations,\n      flipVariations = _options$flipVariatio === void 0 ? true : _options$flipVariatio,\n      allowedAutoPlacements = options.allowedAutoPlacements;\n  var preferredPlacement = state.options.placement;\n  var basePlacement = getBasePlacement(preferredPlacement);\n  var isBasePlacement = basePlacement === preferredPlacement;\n  var fallbackPlacements = specifiedFallbackPlacements || (isBasePlacement || !flipVariations ? [getOppositePlacement(preferredPlacement)] : getExpandedFallbackPlacements(preferredPlacement));\n  var placements = [preferredPlacement].concat(fallbackPlacements).reduce(function (acc, placement) {\n    return acc.concat(getBasePlacement(placement) === auto ? computeAutoPlacement(state, {\n      placement: placement,\n      boundary: boundary,\n      rootBoundary: rootBoundary,\n      padding: padding,\n      flipVariations: flipVariations,\n      allowedAutoPlacements: allowedAutoPlacements\n    }) : placement);\n  }, []);\n  var referenceRect = state.rects.reference;\n  var popperRect = state.rects.popper;\n  var checksMap = new Map();\n  var makeFallbackChecks = true;\n  var firstFittingPlacement = placements[0];\n\n  for (var i = 0; i < placements.length; i++) {\n    var placement = placements[i];\n\n    var _basePlacement = getBasePlacement(placement);\n\n    var isStartVariation = getVariation(placement) === start;\n    var isVertical = [top, bottom].indexOf(_basePlacement) >= 0;\n    var len = isVertical ? 'width' : 'height';\n    var overflow = detectOverflow(state, {\n      placement: placement,\n      boundary: boundary,\n      rootBoundary: rootBoundary,\n      altBoundary: altBoundary,\n      padding: padding\n    });\n    var mainVariationSide = isVertical ? isStartVariation ? right : left : isStartVariation ? bottom : top;\n\n    if (referenceRect[len] > popperRect[len]) {\n      mainVariationSide = getOppositePlacement(mainVariationSide);\n    }\n\n    var altVariationSide = getOppositePlacement(mainVariationSide);\n    var checks = [];\n\n    if (checkMainAxis) {\n      checks.push(overflow[_basePlacement] <= 0);\n    }\n\n    if (checkAltAxis) {\n      checks.push(overflow[mainVariationSide] <= 0, overflow[altVariationSide] <= 0);\n    }\n\n    if (checks.every(function (check) {\n      return check;\n    })) {\n      firstFittingPlacement = placement;\n      makeFallbackChecks = false;\n      break;\n    }\n\n    checksMap.set(placement, checks);\n  }\n\n  if (makeFallbackChecks) {\n    // `2` may be desired in some cases – research later\n    var numberOfChecks = flipVariations ? 3 : 1;\n\n    var _loop = function _loop(_i) {\n      var fittingPlacement = placements.find(function (placement) {\n        var checks = checksMap.get(placement);\n\n        if (checks) {\n          return checks.slice(0, _i).every(function (check) {\n            return check;\n          });\n        }\n      });\n\n      if (fittingPlacement) {\n        firstFittingPlacement = fittingPlacement;\n        return \"break\";\n      }\n    };\n\n    for (var _i = numberOfChecks; _i > 0; _i--) {\n      var _ret = _loop(_i);\n\n      if (_ret === \"break\") break;\n    }\n  }\n\n  if (state.placement !== firstFittingPlacement) {\n    state.modifiersData[name]._skip = true;\n    state.placement = firstFittingPlacement;\n    state.reset = true;\n  }\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'flip',\n  enabled: true,\n  phase: 'main',\n  fn: flip,\n  requiresIfExists: ['offset'],\n  data: {\n    _skip: false\n  }\n};","import { top, bottom, left, right } from \"../enums.js\";\nimport detectOverflow from \"../utils/detectOverflow.js\";\n\nfunction getSideOffsets(overflow, rect, preventedOffsets) {\n  if (preventedOffsets === void 0) {\n    preventedOffsets = {\n      x: 0,\n      y: 0\n    };\n  }\n\n  return {\n    top: overflow.top - rect.height - preventedOffsets.y,\n    right: overflow.right - rect.width + preventedOffsets.x,\n    bottom: overflow.bottom - rect.height + preventedOffsets.y,\n    left: overflow.left - rect.width - preventedOffsets.x\n  };\n}\n\nfunction isAnySideFullyClipped(overflow) {\n  return [top, right, bottom, left].some(function (side) {\n    return overflow[side] >= 0;\n  });\n}\n\nfunction hide(_ref) {\n  var state = _ref.state,\n      name = _ref.name;\n  var referenceRect = state.rects.reference;\n  var popperRect = state.rects.popper;\n  var preventedOffsets = state.modifiersData.preventOverflow;\n  var referenceOverflow = detectOverflow(state, {\n    elementContext: 'reference'\n  });\n  var popperAltOverflow = detectOverflow(state, {\n    altBoundary: true\n  });\n  var referenceClippingOffsets = getSideOffsets(referenceOverflow, referenceRect);\n  var popperEscapeOffsets = getSideOffsets(popperAltOverflow, popperRect, preventedOffsets);\n  var isReferenceHidden = isAnySideFullyClipped(referenceClippingOffsets);\n  var hasPopperEscaped = isAnySideFullyClipped(popperEscapeOffsets);\n  state.modifiersData[name] = {\n    referenceClippingOffsets: referenceClippingOffsets,\n    popperEscapeOffsets: popperEscapeOffsets,\n    isReferenceHidden: isReferenceHidden,\n    hasPopperEscaped: hasPopperEscaped\n  };\n  state.attributes.popper = Object.assign({}, state.attributes.popper, {\n    'data-popper-reference-hidden': isReferenceHidden,\n    'data-popper-escaped': hasPopperEscaped\n  });\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'hide',\n  enabled: true,\n  phase: 'main',\n  requiresIfExists: ['preventOverflow'],\n  fn: hide\n};","import getBasePlacement from \"../utils/getBasePlacement.js\";\nimport { top, left, right, placements } from \"../enums.js\"; // eslint-disable-next-line import/no-unused-modules\n\nexport function distanceAndSkiddingToXY(placement, rects, offset) {\n  var basePlacement = getBasePlacement(placement);\n  var invertDistance = [left, top].indexOf(basePlacement) >= 0 ? -1 : 1;\n\n  var _ref = typeof offset === 'function' ? offset(Object.assign({}, rects, {\n    placement: placement\n  })) : offset,\n      skidding = _ref[0],\n      distance = _ref[1];\n\n  skidding = skidding || 0;\n  distance = (distance || 0) * invertDistance;\n  return [left, right].indexOf(basePlacement) >= 0 ? {\n    x: distance,\n    y: skidding\n  } : {\n    x: skidding,\n    y: distance\n  };\n}\n\nfunction offset(_ref2) {\n  var state = _ref2.state,\n      options = _ref2.options,\n      name = _ref2.name;\n  var _options$offset = options.offset,\n      offset = _options$offset === void 0 ? [0, 0] : _options$offset;\n  var data = placements.reduce(function (acc, placement) {\n    acc[placement] = distanceAndSkiddingToXY(placement, state.rects, offset);\n    return acc;\n  }, {});\n  var _data$state$placement = data[state.placement],\n      x = _data$state$placement.x,\n      y = _data$state$placement.y;\n\n  if (state.modifiersData.popperOffsets != null) {\n    state.modifiersData.popperOffsets.x += x;\n    state.modifiersData.popperOffsets.y += y;\n  }\n\n  state.modifiersData[name] = data;\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'offset',\n  enabled: true,\n  phase: 'main',\n  requires: ['popperOffsets'],\n  fn: offset\n};","import computeOffsets from \"../utils/computeOffsets.js\";\n\nfunction popperOffsets(_ref) {\n  var state = _ref.state,\n      name = _ref.name;\n  // Offsets are the actual position the popper needs to have to be\n  // properly positioned near its reference element\n  // This is the most basic placement, and will be adjusted by\n  // the modifiers in the next step\n  state.modifiersData[name] = computeOffsets({\n    reference: state.rects.reference,\n    element: state.rects.popper,\n    strategy: 'absolute',\n    placement: state.placement\n  });\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'popperOffsets',\n  enabled: true,\n  phase: 'read',\n  fn: popperOffsets,\n  data: {}\n};","export default function getAltAxis(axis) {\n  return axis === 'x' ? 'y' : 'x';\n}","import { top, left, right, bottom, start } from \"../enums.js\";\nimport getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getMainAxisFromPlacement from \"../utils/getMainAxisFromPlacement.js\";\nimport getAltAxis from \"../utils/getAltAxis.js\";\nimport { within, withinMaxClamp } from \"../utils/within.js\";\nimport getLayoutRect from \"../dom-utils/getLayoutRect.js\";\nimport getOffsetParent from \"../dom-utils/getOffsetParent.js\";\nimport detectOverflow from \"../utils/detectOverflow.js\";\nimport getVariation from \"../utils/getVariation.js\";\nimport getFreshSideObject from \"../utils/getFreshSideObject.js\";\nimport { min as mathMin, max as mathMax } from \"../utils/math.js\";\n\nfunction preventOverflow(_ref) {\n  var state = _ref.state,\n      options = _ref.options,\n      name = _ref.name;\n  var _options$mainAxis = options.mainAxis,\n      checkMainAxis = _options$mainAxis === void 0 ? true : _options$mainAxis,\n      _options$altAxis = options.altAxis,\n      checkAltAxis = _options$altAxis === void 0 ? false : _options$altAxis,\n      boundary = options.boundary,\n      rootBoundary = options.rootBoundary,\n      altBoundary = options.altBoundary,\n      padding = options.padding,\n      _options$tether = options.tether,\n      tether = _options$tether === void 0 ? true : _options$tether,\n      _options$tetherOffset = options.tetherOffset,\n      tetherOffset = _options$tetherOffset === void 0 ? 0 : _options$tetherOffset;\n  var overflow = detectOverflow(state, {\n    boundary: boundary,\n    rootBoundary: rootBoundary,\n    padding: padding,\n    altBoundary: altBoundary\n  });\n  var basePlacement = getBasePlacement(state.placement);\n  var variation = getVariation(state.placement);\n  var isBasePlacement = !variation;\n  var mainAxis = getMainAxisFromPlacement(basePlacement);\n  var altAxis = getAltAxis(mainAxis);\n  var popperOffsets = state.modifiersData.popperOffsets;\n  var referenceRect = state.rects.reference;\n  var popperRect = state.rects.popper;\n  var tetherOffsetValue = typeof tetherOffset === 'function' ? tetherOffset(Object.assign({}, state.rects, {\n    placement: state.placement\n  })) : tetherOffset;\n  var normalizedTetherOffsetValue = typeof tetherOffsetValue === 'number' ? {\n    mainAxis: tetherOffsetValue,\n    altAxis: tetherOffsetValue\n  } : Object.assign({\n    mainAxis: 0,\n    altAxis: 0\n  }, tetherOffsetValue);\n  var offsetModifierState = state.modifiersData.offset ? state.modifiersData.offset[state.placement] : null;\n  var data = {\n    x: 0,\n    y: 0\n  };\n\n  if (!popperOffsets) {\n    return;\n  }\n\n  if (checkMainAxis) {\n    var _offsetModifierState$;\n\n    var mainSide = mainAxis === 'y' ? top : left;\n    var altSide = mainAxis === 'y' ? bottom : right;\n    var len = mainAxis === 'y' ? 'height' : 'width';\n    var offset = popperOffsets[mainAxis];\n    var min = offset + overflow[mainSide];\n    var max = offset - overflow[altSide];\n    var additive = tether ? -popperRect[len] / 2 : 0;\n    var minLen = variation === start ? referenceRect[len] : popperRect[len];\n    var maxLen = variation === start ? -popperRect[len] : -referenceRect[len]; // We need to include the arrow in the calculation so the arrow doesn't go\n    // outside the reference bounds\n\n    var arrowElement = state.elements.arrow;\n    var arrowRect = tether && arrowElement ? getLayoutRect(arrowElement) : {\n      width: 0,\n      height: 0\n    };\n    var arrowPaddingObject = state.modifiersData['arrow#persistent'] ? state.modifiersData['arrow#persistent'].padding : getFreshSideObject();\n    var arrowPaddingMin = arrowPaddingObject[mainSide];\n    var arrowPaddingMax = arrowPaddingObject[altSide]; // If the reference length is smaller than the arrow length, we don't want\n    // to include its full size in the calculation. If the reference is small\n    // and near the edge of a boundary, the popper can overflow even if the\n    // reference is not overflowing as well (e.g. virtual elements with no\n    // width or height)\n\n    var arrowLen = within(0, referenceRect[len], arrowRect[len]);\n    var minOffset = isBasePlacement ? referenceRect[len] / 2 - additive - arrowLen - arrowPaddingMin - normalizedTetherOffsetValue.mainAxis : minLen - arrowLen - arrowPaddingMin - normalizedTetherOffsetValue.mainAxis;\n    var maxOffset = isBasePlacement ? -referenceRect[len] / 2 + additive + arrowLen + arrowPaddingMax + normalizedTetherOffsetValue.mainAxis : maxLen + arrowLen + arrowPaddingMax + normalizedTetherOffsetValue.mainAxis;\n    var arrowOffsetParent = state.elements.arrow && getOffsetParent(state.elements.arrow);\n    var clientOffset = arrowOffsetParent ? mainAxis === 'y' ? arrowOffsetParent.clientTop || 0 : arrowOffsetParent.clientLeft || 0 : 0;\n    var offsetModifierValue = (_offsetModifierState$ = offsetModifierState == null ? void 0 : offsetModifierState[mainAxis]) != null ? _offsetModifierState$ : 0;\n    var tetherMin = offset + minOffset - offsetModifierValue - clientOffset;\n    var tetherMax = offset + maxOffset - offsetModifierValue;\n    var preventedOffset = within(tether ? mathMin(min, tetherMin) : min, offset, tether ? mathMax(max, tetherMax) : max);\n    popperOffsets[mainAxis] = preventedOffset;\n    data[mainAxis] = preventedOffset - offset;\n  }\n\n  if (checkAltAxis) {\n    var _offsetModifierState$2;\n\n    var _mainSide = mainAxis === 'x' ? top : left;\n\n    var _altSide = mainAxis === 'x' ? bottom : right;\n\n    var _offset = popperOffsets[altAxis];\n\n    var _len = altAxis === 'y' ? 'height' : 'width';\n\n    var _min = _offset + overflow[_mainSide];\n\n    var _max = _offset - overflow[_altSide];\n\n    var isOriginSide = [top, left].indexOf(basePlacement) !== -1;\n\n    var _offsetModifierValue = (_offsetModifierState$2 = offsetModifierState == null ? void 0 : offsetModifierState[altAxis]) != null ? _offsetModifierState$2 : 0;\n\n    var _tetherMin = isOriginSide ? _min : _offset - referenceRect[_len] - popperRect[_len] - _offsetModifierValue + normalizedTetherOffsetValue.altAxis;\n\n    var _tetherMax = isOriginSide ? _offset + referenceRect[_len] + popperRect[_len] - _offsetModifierValue - normalizedTetherOffsetValue.altAxis : _max;\n\n    var _preventedOffset = tether && isOriginSide ? withinMaxClamp(_tetherMin, _offset, _tetherMax) : within(tether ? _tetherMin : _min, _offset, tether ? _tetherMax : _max);\n\n    popperOffsets[altAxis] = _preventedOffset;\n    data[altAxis] = _preventedOffset - _offset;\n  }\n\n  state.modifiersData[name] = data;\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'preventOverflow',\n  enabled: true,\n  phase: 'main',\n  fn: preventOverflow,\n  requiresIfExists: ['offset']\n};","export default function getHTMLElementScroll(element) {\n  return {\n    scrollLeft: element.scrollLeft,\n    scrollTop: element.scrollTop\n  };\n}","import getWindowScroll from \"./getWindowScroll.js\";\nimport getWindow from \"./getWindow.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\nimport getHTMLElementScroll from \"./getHTMLElementScroll.js\";\nexport default function getNodeScroll(node) {\n  if (node === getWindow(node) || !isHTMLElement(node)) {\n    return getWindowScroll(node);\n  } else {\n    return getHTMLElementScroll(node);\n  }\n}","import getBoundingClientRect from \"./getBoundingClientRect.js\";\nimport getNodeScroll from \"./getNodeScroll.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\nimport getWindowScrollBarX from \"./getWindowScrollBarX.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport isScrollParent from \"./isScrollParent.js\";\nimport { round } from \"../utils/math.js\";\n\nfunction isElementScaled(element) {\n  var rect = element.getBoundingClientRect();\n  var scaleX = round(rect.width) / element.offsetWidth || 1;\n  var scaleY = round(rect.height) / element.offsetHeight || 1;\n  return scaleX !== 1 || scaleY !== 1;\n} // Returns the composite rect of an element relative to its offsetParent.\n// Composite means it takes into account transforms as well as layout.\n\n\nexport default function getCompositeRect(elementOrVirtualElement, offsetParent, isFixed) {\n  if (isFixed === void 0) {\n    isFixed = false;\n  }\n\n  var isOffsetParentAnElement = isHTMLElement(offsetParent);\n  var offsetParentIsScaled = isHTMLElement(offsetParent) && isElementScaled(offsetParent);\n  var documentElement = getDocumentElement(offsetParent);\n  var rect = getBoundingClientRect(elementOrVirtualElement, offsetParentIsScaled, isFixed);\n  var scroll = {\n    scrollLeft: 0,\n    scrollTop: 0\n  };\n  var offsets = {\n    x: 0,\n    y: 0\n  };\n\n  if (isOffsetParentAnElement || !isOffsetParentAnElement && !isFixed) {\n    if (getNodeName(offsetParent) !== 'body' || // https://github.com/popperjs/popper-core/issues/1078\n    isScrollParent(documentElement)) {\n      scroll = getNodeScroll(offsetParent);\n    }\n\n    if (isHTMLElement(offsetParent)) {\n      offsets = getBoundingClientRect(offsetParent, true);\n      offsets.x += offsetParent.clientLeft;\n      offsets.y += offsetParent.clientTop;\n    } else if (documentElement) {\n      offsets.x = getWindowScrollBarX(documentElement);\n    }\n  }\n\n  return {\n    x: rect.left + scroll.scrollLeft - offsets.x,\n    y: rect.top + scroll.scrollTop - offsets.y,\n    width: rect.width,\n    height: rect.height\n  };\n}","import { modifierPhases } from \"../enums.js\"; // source: https://stackoverflow.com/questions/49875255\n\nfunction order(modifiers) {\n  var map = new Map();\n  var visited = new Set();\n  var result = [];\n  modifiers.forEach(function (modifier) {\n    map.set(modifier.name, modifier);\n  }); // On visiting object, check for its dependencies and visit them recursively\n\n  function sort(modifier) {\n    visited.add(modifier.name);\n    var requires = [].concat(modifier.requires || [], modifier.requiresIfExists || []);\n    requires.forEach(function (dep) {\n      if (!visited.has(dep)) {\n        var depModifier = map.get(dep);\n\n        if (depModifier) {\n          sort(depModifier);\n        }\n      }\n    });\n    result.push(modifier);\n  }\n\n  modifiers.forEach(function (modifier) {\n    if (!visited.has(modifier.name)) {\n      // check for visited object\n      sort(modifier);\n    }\n  });\n  return result;\n}\n\nexport default function orderModifiers(modifiers) {\n  // order based on dependencies\n  var orderedModifiers = order(modifiers); // order based on phase\n\n  return modifierPhases.reduce(function (acc, phase) {\n    return acc.concat(orderedModifiers.filter(function (modifier) {\n      return modifier.phase === phase;\n    }));\n  }, []);\n}","export default function debounce(fn) {\n  var pending;\n  return function () {\n    if (!pending) {\n      pending = new Promise(function (resolve) {\n        Promise.resolve().then(function () {\n          pending = undefined;\n          resolve(fn());\n        });\n      });\n    }\n\n    return pending;\n  };\n}","export default function mergeByName(modifiers) {\n  var merged = modifiers.reduce(function (merged, current) {\n    var existing = merged[current.name];\n    merged[current.name] = existing ? Object.assign({}, existing, current, {\n      options: Object.assign({}, existing.options, current.options),\n      data: Object.assign({}, existing.data, current.data)\n    }) : current;\n    return merged;\n  }, {}); // IE11 does not support Object.values\n\n  return Object.keys(merged).map(function (key) {\n    return merged[key];\n  });\n}","import getCompositeRect from \"./dom-utils/getCompositeRect.js\";\nimport getLayoutRect from \"./dom-utils/getLayoutRect.js\";\nimport listScrollParents from \"./dom-utils/listScrollParents.js\";\nimport getOffsetParent from \"./dom-utils/getOffsetParent.js\";\nimport orderModifiers from \"./utils/orderModifiers.js\";\nimport debounce from \"./utils/debounce.js\";\nimport mergeByName from \"./utils/mergeByName.js\";\nimport detectOverflow from \"./utils/detectOverflow.js\";\nimport { isElement } from \"./dom-utils/instanceOf.js\";\nvar DEFAULT_OPTIONS = {\n  placement: 'bottom',\n  modifiers: [],\n  strategy: 'absolute'\n};\n\nfunction areValidElements() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  return !args.some(function (element) {\n    return !(element && typeof element.getBoundingClientRect === 'function');\n  });\n}\n\nexport function popperGenerator(generatorOptions) {\n  if (generatorOptions === void 0) {\n    generatorOptions = {};\n  }\n\n  var _generatorOptions = generatorOptions,\n      _generatorOptions$def = _generatorOptions.defaultModifiers,\n      defaultModifiers = _generatorOptions$def === void 0 ? [] : _generatorOptions$def,\n      _generatorOptions$def2 = _generatorOptions.defaultOptions,\n      defaultOptions = _generatorOptions$def2 === void 0 ? DEFAULT_OPTIONS : _generatorOptions$def2;\n  return function createPopper(reference, popper, options) {\n    if (options === void 0) {\n      options = defaultOptions;\n    }\n\n    var state = {\n      placement: 'bottom',\n      orderedModifiers: [],\n      options: Object.assign({}, DEFAULT_OPTIONS, defaultOptions),\n      modifiersData: {},\n      elements: {\n        reference: reference,\n        popper: popper\n      },\n      attributes: {},\n      styles: {}\n    };\n    var effectCleanupFns = [];\n    var isDestroyed = false;\n    var instance = {\n      state: state,\n      setOptions: function setOptions(setOptionsAction) {\n        var options = typeof setOptionsAction === 'function' ? setOptionsAction(state.options) : setOptionsAction;\n        cleanupModifierEffects();\n        state.options = Object.assign({}, defaultOptions, state.options, options);\n        state.scrollParents = {\n          reference: isElement(reference) ? listScrollParents(reference) : reference.contextElement ? listScrollParents(reference.contextElement) : [],\n          popper: listScrollParents(popper)\n        }; // Orders the modifiers based on their dependencies and `phase`\n        // properties\n\n        var orderedModifiers = orderModifiers(mergeByName([].concat(defaultModifiers, state.options.modifiers))); // Strip out disabled modifiers\n\n        state.orderedModifiers = orderedModifiers.filter(function (m) {\n          return m.enabled;\n        });\n        runModifierEffects();\n        return instance.update();\n      },\n      // Sync update – it will always be executed, even if not necessary. This\n      // is useful for low frequency updates where sync behavior simplifies the\n      // logic.\n      // For high frequency updates (e.g. `resize` and `scroll` events), always\n      // prefer the async Popper#update method\n      forceUpdate: function forceUpdate() {\n        if (isDestroyed) {\n          return;\n        }\n\n        var _state$elements = state.elements,\n            reference = _state$elements.reference,\n            popper = _state$elements.popper; // Don't proceed if `reference` or `popper` are not valid elements\n        // anymore\n\n        if (!areValidElements(reference, popper)) {\n          return;\n        } // Store the reference and popper rects to be read by modifiers\n\n\n        state.rects = {\n          reference: getCompositeRect(reference, getOffsetParent(popper), state.options.strategy === 'fixed'),\n          popper: getLayoutRect(popper)\n        }; // Modifiers have the ability to reset the current update cycle. The\n        // most common use case for this is the `flip` modifier changing the\n        // placement, which then needs to re-run all the modifiers, because the\n        // logic was previously ran for the previous placement and is therefore\n        // stale/incorrect\n\n        state.reset = false;\n        state.placement = state.options.placement; // On each update cycle, the `modifiersData` property for each modifier\n        // is filled with the initial data specified by the modifier. This means\n        // it doesn't persist and is fresh on each update.\n        // To ensure persistent data, use `${name}#persistent`\n\n        state.orderedModifiers.forEach(function (modifier) {\n          return state.modifiersData[modifier.name] = Object.assign({}, modifier.data);\n        });\n\n        for (var index = 0; index < state.orderedModifiers.length; index++) {\n          if (state.reset === true) {\n            state.reset = false;\n            index = -1;\n            continue;\n          }\n\n          var _state$orderedModifie = state.orderedModifiers[index],\n              fn = _state$orderedModifie.fn,\n              _state$orderedModifie2 = _state$orderedModifie.options,\n              _options = _state$orderedModifie2 === void 0 ? {} : _state$orderedModifie2,\n              name = _state$orderedModifie.name;\n\n          if (typeof fn === 'function') {\n            state = fn({\n              state: state,\n              options: _options,\n              name: name,\n              instance: instance\n            }) || state;\n          }\n        }\n      },\n      // Async and optimistically optimized update – it will not be executed if\n      // not necessary (debounced to run at most once-per-tick)\n      update: debounce(function () {\n        return new Promise(function (resolve) {\n          instance.forceUpdate();\n          resolve(state);\n        });\n      }),\n      destroy: function destroy() {\n        cleanupModifierEffects();\n        isDestroyed = true;\n      }\n    };\n\n    if (!areValidElements(reference, popper)) {\n      return instance;\n    }\n\n    instance.setOptions(options).then(function (state) {\n      if (!isDestroyed && options.onFirstUpdate) {\n        options.onFirstUpdate(state);\n      }\n    }); // Modifiers have the ability to execute arbitrary code before the first\n    // update cycle runs. They will be executed in the same order as the update\n    // cycle. This is useful when a modifier adds some persistent data that\n    // other modifiers need to use, but the modifier is run after the dependent\n    // one.\n\n    function runModifierEffects() {\n      state.orderedModifiers.forEach(function (_ref) {\n        var name = _ref.name,\n            _ref$options = _ref.options,\n            options = _ref$options === void 0 ? {} : _ref$options,\n            effect = _ref.effect;\n\n        if (typeof effect === 'function') {\n          var cleanupFn = effect({\n            state: state,\n            name: name,\n            instance: instance,\n            options: options\n          });\n\n          var noopFn = function noopFn() {};\n\n          effectCleanupFns.push(cleanupFn || noopFn);\n        }\n      });\n    }\n\n    function cleanupModifierEffects() {\n      effectCleanupFns.forEach(function (fn) {\n        return fn();\n      });\n      effectCleanupFns = [];\n    }\n\n    return instance;\n  };\n}\nexport var createPopper = /*#__PURE__*/popperGenerator(); // eslint-disable-next-line import/no-unused-modules\n\nexport { detectOverflow };","import { popperGenerator, detectOverflow } from \"./createPopper.js\";\nimport eventListeners from \"./modifiers/eventListeners.js\";\nimport popperOffsets from \"./modifiers/popperOffsets.js\";\nimport computeStyles from \"./modifiers/computeStyles.js\";\nimport applyStyles from \"./modifiers/applyStyles.js\";\nimport offset from \"./modifiers/offset.js\";\nimport flip from \"./modifiers/flip.js\";\nimport preventOverflow from \"./modifiers/preventOverflow.js\";\nimport arrow from \"./modifiers/arrow.js\";\nimport hide from \"./modifiers/hide.js\";\nvar defaultModifiers = [eventListeners, popperOffsets, computeStyles, applyStyles, offset, flip, preventOverflow, arrow, hide];\nvar createPopper = /*#__PURE__*/popperGenerator({\n  defaultModifiers: defaultModifiers\n}); // eslint-disable-next-line import/no-unused-modules\n\nexport { createPopper, popperGenerator, defaultModifiers, detectOverflow }; // eslint-disable-next-line import/no-unused-modules\n\nexport { createPopper as createPopperLite } from \"./popper-lite.js\"; // eslint-disable-next-line import/no-unused-modules\n\nexport * from \"./modifiers/index.js\";","import { createHtmlElement } from '../../../utils';\nimport { DataDenColDef } from '../../../data-den-options.interface';\nimport { DataDenPubSub } from '../../../data-den-pub-sub';\nimport { Context } from '../../../context';\nimport { createPopper } from '@popperjs/core';\n\nexport class DataDenHeaderMenuRenderer {\n  toggler: HTMLElement;\n  dropdown: HTMLElement;\n  #cssPrefix: string;\n  colDef: DataDenColDef;\n  colIndex: number;\n  popper: any = null;\n  isDropdownOpen = false;\n\n  constructor(cssPrefix: string, colDef: DataDenColDef, colIndex: number, private PubSub: DataDenPubSub) {\n    this.#cssPrefix = cssPrefix;\n    this.colDef = colDef;\n    this.colIndex = colIndex;\n\n    const template = `<button class=\"${this.#cssPrefix}header-menu-toggler\">\n      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16px\" height=\"100%\" viewBox=\"0 0 16 16\" fill=\"currenColor\" class=\"${\n        this.#cssPrefix\n      }header-menu-toggler-icon\">\n        <path stroke=\"currentColor\" fill=\"currentColor\" d=\"M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z\"/>\n      </svg>\n    </button>\n    `;\n\n    const dropdownTemplate = `<div class=\"${this.#cssPrefix}header-menu-dropdown\">\n      ${\n        this.colDef.pinned\n          ? `<a href=\"#\" class=\"${this.#cssPrefix}header-menu-dropdown-item\" ref=\"unPinColTrigger\">Unpin</a>`\n          : ''\n      }\n      ${\n        this.colDef.pinned === 'right' || !this.colDef.pinned\n          ? `<a href=\"#\" class=\"${\n              this.#cssPrefix\n            }header-menu-dropdown-item\" ref=\"pinLeftPinColTrigger\">Pin to the left</a>`\n          : ''\n      }\n      ${\n        this.colDef.pinned === 'left' || !this.colDef.pinned\n          ? `<a href=\"#\" class=\"${\n              this.#cssPrefix\n            }header-menu-dropdown-item\" ref=\"pinRightPinColTrigger\">Pin to the right</a>`\n          : ''\n      }\n    </div>`;\n\n    this.toggler = createHtmlElement(template);\n    this.dropdown = createHtmlElement(dropdownTemplate);\n\n    this.#initDropdown();\n  }\n\n  #toggleDropdown() {\n    if (this.isDropdownOpen) {\n      this.#closeDropdown();\n    } else {\n      this.#openDropdown();\n    }\n  }\n\n  #openDropdown() {\n    if (!this.isDropdownOpen) {\n      this.popper = createPopper(this.toggler, this.dropdown, {\n        placement: 'bottom-end',\n      });\n      this.dropdown.classList.toggle('active');\n      this.isDropdownOpen = true;\n    }\n  }\n\n  #closeDropdown() {\n    if (this.isDropdownOpen) {\n      this.popper.destroy();\n      this.popper = null;\n      this.dropdown.classList.toggle('active');\n      this.isDropdownOpen = false;\n    }\n  }\n\n  #initDropdown() {\n    this.toggler.addEventListener('click', () => {\n      this.#toggleDropdown();\n    });\n\n    const unPinTrigger = this.dropdown.querySelector('[ref=\"unPinColTrigger\"]');\n    const pinLeftTrigger = this.dropdown.querySelector('[ref=\"pinLeftPinColTrigger\"]');\n    const pinRightTrigger = this.dropdown.querySelector('[ref=\"pinRightPinColTrigger\"]');\n\n    unPinTrigger?.addEventListener('click', (event) => {\n      event.preventDefault();\n      this.PubSub.publish('command:pin-column:start', {\n        pin: false,\n        colIndex: this.colIndex,\n        context: new Context('command:pin-column:start'),\n      });\n    });\n\n    pinLeftTrigger?.addEventListener('click', (event) => {\n      event.preventDefault();\n      this.PubSub.publish('command:pin-column:start', {\n        pin: 'left',\n        colIndex: this.colIndex,\n        context: new Context('command:pin-column:start'),\n      });\n    });\n\n    pinRightTrigger?.addEventListener('click', (event) => {\n      event.preventDefault();\n      this.PubSub.publish('command:pin-column:start', {\n        pin: 'right',\n        colIndex: this.colIndex,\n        context: new Context('command:pin-column:start'),\n      });\n    });\n\n    document.addEventListener('click', (event) => {\n      if (!this.toggler.contains(event.target as Node)) {\n        this.#closeDropdown();\n      }\n    });\n\n    document.addEventListener('keydown', (event) => {\n      if (event.key === 'Escape') {\n        this.dropdown.classList.remove('active');\n      }\n    });\n  }\n\n  getGui(): HTMLElement {\n    return this.toggler;\n  }\n\n  getDropdownGui(): HTMLElement {\n    return this.dropdown;\n  }\n\n  destroy() {}\n}\n","import { DataDenHeaderFilterChangeEvent, DataDenHeaderFilterRenderer } from '../filter';\nimport { DataDenHeaderDefaultSorterRenderer, DataDenHeaderSorterRenderer } from '../sorter';\nimport { DataDenHeaderDefaultResizerRenderer, DataDenHeaderResizerRenderer } from '../resizer';\nimport { DataDenHeaderMenuRenderer } from '../menu';\nimport { DataDenCell } from './data-den-cell';\nimport { DataDenCellRenderer } from './data-den-cell-renderer.interface';\nimport { DataDenColDef, DataDenInternalOptions } from '../../../data-den-options.interface';\nimport { DataDenHeaderFilterRendererParams } from '../filter/data-den-header-filter-renderer-params.interface';\nimport { DataDenSortOrder } from '../../sorting';\nimport { DataDenCellRendererParams } from './data-den-cell-renderer-params.interface';\nimport { createHtmlElement } from '../../../utils';\nimport { DataDenDefaultHeaderCellRenderer } from './data-den-default-header-cell-renderer';\nimport { Context } from '../../../context';\nimport { DataDenPubSub } from '../../../data-den-pub-sub';\n\nexport class DataDenHeaderCell extends DataDenCell {\n  rowIndex: number;\n  colIndex: number;\n  width: number;\n  #value: any;\n  #left: string;\n  pinned: string;\n  #filterRenderer: DataDenHeaderFilterRenderer | null = null;\n  #sorterRenderer: DataDenHeaderSorterRenderer | null = null;\n  #resizerRenderer: DataDenHeaderResizerRenderer | null = null;\n  #headerMenuRenderer: DataDenHeaderMenuRenderer | null = null;\n  #renderer!: DataDenCellRenderer;\n  #options: DataDenInternalOptions;\n  #order: DataDenSortOrder;\n  #isDropdownInitiated: boolean;\n\n  constructor(\n    value: any,\n    colIndex: number,\n    rowIndex: number,\n    left: number,\n    width: number,\n    pinned: string,\n    options: DataDenInternalOptions,\n    order: DataDenSortOrder,\n    private PubSub: DataDenPubSub\n  ) {\n    super(value, rowIndex, colIndex, left, width, pinned, options);\n\n    this.#value = value;\n    this.#left = pinned ? 'auto' : `${left}px`;\n    this.width = width;\n    this.pinned = pinned;\n    this.colIndex = colIndex;\n    this.rowIndex = rowIndex;\n    this.#options = options;\n    this.#order = order;\n\n    this.#initRenderers();\n  }\n\n  #initRenderers() {\n    const colDef = this.#options.columns[this.colIndex];\n    const cssPrefix = this.#options.cssPrefix;\n    const { field, filter, sort, resize } = colDef;\n    const order = this.#order;\n\n    this.#renderer = new DataDenDefaultHeaderCellRenderer(this.#getCellRendererParams());\n    this.#headerMenuRenderer = new DataDenHeaderMenuRenderer(cssPrefix, colDef, this.colIndex, this.PubSub);\n\n    if (filter) {\n      const filterRenderer = colDef.filterRenderer;\n      const filterParams = this.#getHeaderFilterParams(colDef);\n      this.#filterRenderer = new filterRenderer(filterParams);\n    }\n\n    if (sort) {\n      this.#sorterRenderer = new DataDenHeaderDefaultSorterRenderer(field, order, this.PubSub, this.#options);\n    }\n\n    if (resize) {\n      this.#resizerRenderer = new DataDenHeaderDefaultResizerRenderer(cssPrefix, colDef, this.PubSub);\n    }\n  }\n\n  #getCellRendererParams(): DataDenCellRendererParams {\n    return {\n      value: this.#value,\n      cssPrefix: this.#options.cssPrefix,\n    };\n  }\n\n  #getHeaderFilterParams(colDef: DataDenColDef): DataDenHeaderFilterRendererParams {\n    const field = colDef.field;\n    const { method, debounceTime, listOptions } = colDef.filterOptions;\n\n    const params: DataDenHeaderFilterRendererParams = {\n      colDef,\n      field,\n      method,\n      debounceTime,\n      cssPrefix: this.#options.cssPrefix,\n      listOptions,\n      filterChanged: () => this.#onFilterChange(),\n    };\n\n    return params;\n  }\n\n  #onFilterChange() {\n    const colDef = this.#options.columns[this.colIndex];\n    const field = colDef.field;\n\n    const filter = this.#filterRenderer;\n    const context = new Context('info:filtering:header-filter-changed');\n    const type = filter.getType();\n    const state = filter.getState();\n    const isActive = filter.isActive();\n    const filterFn = filter.getFilterFn();\n\n    const filterChangeEvent: DataDenHeaderFilterChangeEvent = {\n      context,\n      field,\n      type,\n      state,\n      isActive,\n      filterFn,\n    };\n\n    this.PubSub.publish('info:filtering:header-filter-changed', filterChangeEvent);\n  }\n\n  render(): HTMLElement {\n    const isSomeFilterableCol = this.#options.columns.some((col) => col.filter);\n    const template =\n      /* HTML */\n      `<div\n        class=\"${this.#options.cssPrefix}header-cell ${this.#options.draggable && !this.pinned\n        ? `${this.#options.cssPrefix}header-cell-draggable`\n        : ''} ${this.pinned === 'left' ? `${this.#options.cssPrefix}header-cell-pinned-left` : ''} ${this.pinned ===\n          'right'\n          ? `${this.#options.cssPrefix}header-cell-pinned-right`\n          : ''} ${isSomeFilterableCol ? `${this.#options.cssPrefix}header-cell-filterable` : ''}\"\n        role=\"columnheader\"\n        ref=\"headerCell\"\n        style=\"left: ${this.#left}; width: ${this.width}px;\"\n      >\n        <div ref=\"headerCellMain\" class=\"${this.#options.cssPrefix}header-cell-main\">\n          <div ref=\"headerValueAndSorter\" class=\"${this.#options.cssPrefix}header-value-and-sorter\"></div>\n        </div>\n      </div>`;\n\n    const cellElement = createHtmlElement(template);\n    const cellElementMain = cellElement.querySelector('[ref=\"headerCellMain\"]') as HTMLElement;\n    const cellElementValueAndSorter = cellElement.querySelector('[ref=\"headerValueAndSorter\"]') as HTMLElement;\n\n    cellElementValueAndSorter.appendChild(this.#renderer.getGui());\n\n    if (this.#sorterRenderer) {\n      cellElementValueAndSorter.appendChild(this.#sorterRenderer.getGui());\n    }\n\n    if (this.#filterRenderer) {\n      cellElement.appendChild(this.#filterRenderer.getGui());\n    }\n\n    cellElementMain.appendChild(this.#headerMenuRenderer.getGui());\n    this.#renderDropdown(cellElement);\n\n    if (this.#resizerRenderer) {\n      cellElement.appendChild(this.#resizerRenderer.getGui());\n    }\n\n    return cellElement;\n  }\n\n  #renderDropdown(cellElement: HTMLElement) {\n    if (this.#isDropdownInitiated) {\n      return;\n    }\n\n    cellElement.appendChild(this.#headerMenuRenderer?.getDropdownGui());\n\n    this.#isDropdownInitiated = true;\n  }\n}\n","export abstract class DataDenHeaderFilterRenderer {\n  abstract getGui(): HTMLElement;\n  abstract destroy?(): void;\n  abstract getType(): string;\n  abstract getState(): any;\n  abstract isActive(): boolean;\n  abstract getFilterFn(): (state: any, value: any) => boolean;\n}\n","import { createHtmlElement, debounce } from '../../../utils';\nimport { DataDenHeaderFilterRendererParams } from './data-den-header-filter-renderer-params.interface';\nimport { DataDenHeaderFilterRenderer } from './data-den-header-filter-renderer.interface';\n\nexport class DataDenHeaderTextFilterRenderer extends DataDenHeaderFilterRenderer {\n  element: HTMLElement;\n  input: HTMLInputElement;\n  params: DataDenHeaderFilterRendererParams;\n  #cssPrefix: string;\n\n  constructor(params: DataDenHeaderFilterRendererParams) {\n    super();\n    this.params = params;\n    this.#cssPrefix = params.cssPrefix;\n\n    const template =\n      /* HTLM */\n      `\n      <div class=\"${this.#cssPrefix}header-filter\">\n        <input type=\"text\" class=\"${this.#cssPrefix}header-filter-input\">\n      </div>\n    `;\n\n    this.element = createHtmlElement(template);\n    this.input = this.element.querySelector(`.${this.#cssPrefix}header-filter-input`);\n\n    this.attachUiEvents(params);\n  }\n\n  getGui(): HTMLElement {\n    return this.element;\n  }\n\n  getType(): string {\n    return 'text';\n  }\n\n  getState(): any {\n    const value = this.input ? this.input.value : null;\n\n    return {\n      method: this.params.method,\n      searchTerm: value,\n    };\n  }\n\n  isActive(): boolean {\n    const value = this.input ? this.input.value : null;\n\n    return !!value;\n  }\n\n  getFilterFn(): (state: any, value: any) => boolean {\n    const options = this.params.colDef.filterOptions;\n\n    return (state: any, value: any) => {\n      let searchTerm = state.searchTerm;\n      const method = state.method;\n      const caseSensitive = options.caseSensitive;\n      value = caseSensitive ? value : value.toString().toLowerCase();\n      searchTerm = caseSensitive ? searchTerm : searchTerm.toString().toLowerCase();\n\n      switch (method) {\n        case 'includes':\n          return value.includes(searchTerm);\n        default:\n          return false;\n      }\n    };\n  }\n\n  attachUiEvents(params: DataDenHeaderFilterRendererParams) {\n    if (this.input) {\n      const debounceFilter: () => void = debounce(() => params.filterChanged(), params.debounceTime);\n\n      this.input.addEventListener('keyup', () => debounceFilter());\n    }\n  }\n\n  destroy() {}\n}\n","import { createHtmlElement, debounce } from '../../../utils';\nimport { DataDenHeaderFilterRendererParams } from './data-den-header-filter-renderer-params.interface';\nimport { DataDenHeaderFilterRenderer } from './data-den-header-filter-renderer.interface';\n\nexport class DataDenHeaderNumberFilterRenderer extends DataDenHeaderFilterRenderer {\n  element: HTMLElement;\n  input: HTMLInputElement;\n  params: DataDenHeaderFilterRendererParams;\n  #cssPrefix: string;\n\n  constructor(params: DataDenHeaderFilterRendererParams) {\n    super();\n    this.params = params;\n    this.#cssPrefix = params.cssPrefix;\n\n    const template =\n      /* HTML */\n      `\n        <div class=\"${this.#cssPrefix}header-filter\">\n          <input type=\"number\" class=\"${this.#cssPrefix}header-filter-input\" />\n        </div>\n      `;\n\n    this.element = createHtmlElement(template);\n    this.input = this.element.querySelector(`.${this.#cssPrefix}header-filter-input`);\n\n    this.attachUiEvents(params);\n  }\n\n  getGui(): HTMLElement {\n    return this.element;\n  }\n\n  getType(): string {\n    return 'number';\n  }\n\n  getState(): any {\n    const value = this.input.value;\n\n    return {\n      method: this.params.method,\n      searchTerm: value,\n    };\n  }\n\n  isActive(): boolean {\n    const value = this.input.value;\n\n    return !!value;\n  }\n\n  getFilterFn(): (state: any, value: any) => boolean {\n    return (state: any, value: any) => {\n      const method = state.method;\n      const searchTermAsNumber = Number(state.searchTerm);\n      const valueAsNumber = Number(value);\n\n      switch (method) {\n        case 'equals':\n          return valueAsNumber === searchTermAsNumber;\n        default:\n          return false;\n      }\n    };\n  }\n\n  attachUiEvents(params: DataDenHeaderFilterRendererParams) {\n    if (this.input) {\n      const debounceFilter: () => void = debounce(() => params.filterChanged(), params.debounceTime);\n\n      this.input.addEventListener('keyup', () => debounceFilter());\n    }\n  }\n\n  destroy() {}\n}\n","import { createHtmlElement, debounce, isSameDate, parseDate } from '../../../utils';\nimport { DataDenHeaderFilterRendererParams } from './data-den-header-filter-renderer-params.interface';\nimport { DataDenHeaderFilterRenderer } from './data-den-header-filter-renderer.interface';\n\nexport class DataDenHeaderDateFilterRenderer extends DataDenHeaderFilterRenderer {\n  element: HTMLElement;\n  input: HTMLInputElement;\n  params: DataDenHeaderFilterRendererParams;\n  #cssPrefix: string;\n\n  constructor(params: DataDenHeaderFilterRendererParams) {\n    super();\n    this.params = params;\n    this.#cssPrefix = params.cssPrefix;\n\n    const template =\n      /* HTML */\n      `\n        <div class=\"${this.#cssPrefix}header-filter\">\n          <input type=\"date\" class=\"${this.#cssPrefix}header-filter-input\" />\n        </div>\n      `;\n\n    this.element = createHtmlElement(template);\n    this.input = this.element.querySelector(`.${this.#cssPrefix}header-filter-input`);\n\n    this.attachUiEvents(params);\n  }\n\n  getGui(): HTMLElement {\n    return this.element;\n  }\n\n  getType(): string {\n    return 'date';\n  }\n\n  getState(): any {\n    const value = this.input.value;\n\n    return {\n      method: this.params.method,\n      searchTerm: value,\n    };\n  }\n\n  isActive(): boolean {\n    const value = this.input.value;\n\n    return !!value;\n  }\n\n  getFilterFn(): (state: any, value: any) => boolean {\n    const options = this.params.colDef.filterOptions;\n\n    return (state: any, value: any) => {\n      const dateParserFn = options.dateParserFn;\n      const method = state.method;\n      const searchTermAsDate = parseDate(state.searchTerm);\n      const valueAsDate = typeof value === 'string' ? dateParserFn(value) : value;\n\n      switch (method) {\n        case 'equals':\n          return isSameDate(searchTermAsDate, valueAsDate);\n        default:\n          return false;\n      }\n    };\n  }\n\n  attachUiEvents(params: DataDenHeaderFilterRendererParams) {\n    if (this.input) {\n      const debounceFilter: () => void = debounce(() => params.filterChanged(), params.debounceTime);\n\n      this.input.addEventListener('change', () => debounceFilter());\n    }\n  }\n\n  destroy() {}\n}\n","import { createHtmlElement } from '../../../utils';\nimport { DataDenHeaderFilterRendererParams } from './data-den-header-filter-renderer-params.interface';\nimport { DataDenHeaderFilterRenderer } from './data-den-header-filter-renderer.interface';\n\nexport class DataDenHeaderSelectFilterRenderer extends DataDenHeaderFilterRenderer {\n  element: HTMLElement;\n  select: HTMLSelectElement;\n  params: DataDenHeaderFilterRendererParams;\n  #cssPrefix: string;\n\n  constructor(params: DataDenHeaderFilterRendererParams) {\n    super();\n    this.params = params;\n    this.#cssPrefix = params.cssPrefix;\n\n    const template =\n      /* HTML */\n      `\n        <div class=\"${this.#cssPrefix}header-filter\">\n          <select class=\"${this.#cssPrefix}header-filter-select\">\n            <option disabled selected value></option>\n          </select>\n        </div>\n      `;\n\n    this.element = createHtmlElement(template);\n    this.select = this.element.querySelector(`.${this.#cssPrefix}header-filter-select`);\n\n    this.#createSelectOptions(params);\n    this.attachUiEvents(params);\n  }\n\n  #createSelectOptions(params: DataDenHeaderFilterRendererParams) {\n    if (this.select) {\n      const options = params.listOptions;\n      const optionsFragment = document.createDocumentFragment();\n\n      options.forEach((option) => {\n        const optionEl = document.createElement('option');\n        optionEl.label = option.label;\n        optionEl.value = option.value;\n        optionsFragment.appendChild(optionEl);\n      });\n\n      this.select.appendChild(optionsFragment);\n    }\n  }\n\n  getGui(): HTMLElement {\n    return this.element;\n  }\n\n  getType(): string {\n    return 'select';\n  }\n\n  getState() {\n    return {\n      method: this.params.method,\n      searchTerm: this.select.value,\n    };\n  }\n\n  isActive(): boolean {\n    const value = this.select.value;\n\n    return !!value;\n  }\n\n  getFilterFn(): (state: any, value: any) => boolean {\n    return (state: any, value: any) => {\n      const method = state.method;\n      value = value.toString().toLowerCase();\n\n      switch (method) {\n        case 'includes':\n          return value.includes(state.searchTerm);\n        case 'equals':\n          return value === state.searchTerm;\n        default:\n          return false;\n      }\n    };\n  }\n\n  attachUiEvents(params: DataDenHeaderFilterRendererParams) {\n    if (this.select) {\n      this.select.addEventListener('change', () => {\n        params.filterChanged();\n      });\n    }\n  }\n\n  destroy() {}\n}\n","import { DataDenCell } from '../cell/data-den-cell';\nimport { createHtmlElement } from '../../../utils/dom';\nimport { DataDenInternalOptions } from '../../../data-den-options.interface';\n\nexport class DataDenRow {\n  element: HTMLElement;\n  #options: DataDenInternalOptions;\n\n  constructor(public index: number, public cells: DataDenCell[], options: DataDenInternalOptions) {\n    this.#options = options;\n    const template =\n      /* HTML */\n      `<div class=\"${options.cssPrefix}row\" role=\"row\" ref=\"row\" style=\"height: ${options.rowHeight}px;\"></div>`;\n\n    this.element = createHtmlElement(template);\n  }\n\n  render(): HTMLElement {\n    const cells = document.createDocumentFragment();\n\n    const leftCellsWidth = this.cells\n      .filter((cell) => cell.pinned === 'left')\n      .reduce((acc, curr) => acc + curr.width, 0);\n    const rightCellsWidth = this.cells\n      .filter((cell) => cell.pinned === 'right')\n      .reduce((acc, curr) => acc + curr.width, 0);\n\n    const leftCellsWrapper = createHtmlElement(\n      /* HTML */\n      `<div\n        class=\"${this.#options.cssPrefix}pinned-cells-wrapper ${this.#options.cssPrefix}pinned-cells-wrapper-left\"\n      ></div>`\n    );\n    const centerCellsWrapper = createHtmlElement(\n      /* HTML */\n      `<div\n        class=\"${this.#options.cssPrefix}main-cells-wrapper\"\n        style=\"left: ${leftCellsWidth}px; width: calc(100% - ${leftCellsWidth + rightCellsWidth}px);\"\n        ref=\"rowMainCellsWrapper\"\n      ></div>`\n    );\n    const rightCellsWrapper = createHtmlElement(\n      /* HTML */\n      `<div\n        class=\"${this.#options.cssPrefix}pinned-cells-wrapper ${this.#options.cssPrefix}pinned-cells-wrapper-right\"\n      ></div>`\n    );\n\n    cells.appendChild(leftCellsWrapper);\n    cells.appendChild(centerCellsWrapper);\n    cells.appendChild(rightCellsWrapper);\n\n    this.cells.filter((cell) => cell.pinned === 'left').forEach((cell) => leftCellsWrapper.appendChild(cell.render()));\n    this.cells.filter((cell) => !cell.pinned).forEach((cell) => centerCellsWrapper.appendChild(cell.render()));\n    this.cells\n      .filter((cell) => cell.pinned === 'right')\n      .forEach((cell) => rightCellsWrapper.appendChild(cell.render()));\n\n    this.element.appendChild(cells);\n\n    return this.element;\n  }\n}\n","import { DataDenInternalOptions } from '../../../data-den-options.interface';\nimport { createHtmlElement } from '../../../utils';\nimport { DataDenHeaderCell } from '../cell/data-den-header-cell';\nimport { DataDenRow } from './data-den-row';\n\nexport class DataDenHeaderRow extends DataDenRow {\n  #options: DataDenInternalOptions;\n\n  constructor(public index: number, public cells: DataDenHeaderCell[], options: DataDenInternalOptions) {\n    super(index, cells, options);\n    this.#options = options;\n    const height = this.#options.columns.some((el) => el.filter) ? options.headerHeight + 15 : options.headerHeight;\n\n    const template =\n      /* HTML */\n      `<div class=\"${options.cssPrefix}header-row\" role=\"row\" ref=\"headerRow\" style=\"height: ${height}px\"></div>`;\n\n    this.element = createHtmlElement(template);\n  }\n\n  render(): HTMLElement {\n    const cells = document.createDocumentFragment();\n\n    const leftCellsWidth = this.cells\n      .filter((cell) => cell.pinned === 'left')\n      .reduce((acc, curr) => acc + curr.width, 0);\n    const rightCellsWidth = this.cells\n      .filter((cell) => cell.pinned === 'right')\n      .reduce((acc, curr) => acc + curr.width, 0);\n\n    const leftCellsWrapper = createHtmlElement(\n      /* HTML */\n      `<div ref=\"headerLeftCellsWrapper\" class=\"${this.#options.cssPrefix}header-left-cells-wrapper\"></div>`\n    );\n    const centerCellsWrapper = createHtmlElement(\n      /* HTML */\n      `<div\n        ref=\"headerMainCellsWrapper\"\n        class=\"${this.#options.cssPrefix}header-main-cells-wrapper\"\n        style=\"left: ${leftCellsWidth}px; width: calc(100% - ${leftCellsWidth + rightCellsWidth}px)\"\n      ></div>`\n    );\n    const rightCellsWrapper = createHtmlElement(\n      /* HTML */\n      `<div ref=\"headerRightCellsWrapper\" class=\"${this.#options.cssPrefix}header-right-cells-wrapper\"></div>`\n    );\n\n    cells.appendChild(leftCellsWrapper);\n    cells.appendChild(centerCellsWrapper);\n    cells.appendChild(rightCellsWrapper);\n\n    this.cells.filter((cell) => cell.pinned === 'left').forEach((cell) => leftCellsWrapper.appendChild(cell.render()));\n    this.cells.filter((cell) => !cell.pinned).forEach((cell) => centerCellsWrapper.appendChild(cell.render()));\n    this.cells\n      .filter((cell) => cell.pinned === 'right')\n      .forEach((cell) => rightCellsWrapper.appendChild(cell.render()));\n\n    this.element.appendChild(cells);\n\n    return this.element;\n  }\n}\n","import { createHtmlElement } from '../../../utils';\nimport { DataDenPubSub } from '../../../data-den-pub-sub';\nimport { DataDenPaginationOptions } from '../../../data-den-options.interface';\nimport { Context } from '../../../context';\n\nexport class DataDenPaginationRenderer {\n  element: HTMLElement;\n  #cssPrefix: string;\n  options: DataDenPaginationOptions;\n  buttons: Record<string, HTMLButtonElement>;\n\n  constructor(options: DataDenPaginationOptions, cssPrefix: string, private PubSub: DataDenPubSub) {\n    this.options = options;\n    this.#cssPrefix = cssPrefix;\n\n    const template =\n      /* HTML */\n      `<div class=\"${this.#cssPrefix}pagination\">\n        <div class=\"${this.#cssPrefix}pagination-content\">\n          <button class=\"${this.#cssPrefix}pagination-button\" ref=\"data-den-pagination-first-button\">\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n              stroke-width=\"1.5\"\n              stroke=\"currentColor\"\n              class=\"${this.#cssPrefix}pagination-button-svg\"\n            >\n              <path\n                stroke-linecap=\"round\"\n                stroke-linejoin=\"round\"\n                d=\"m18.75 4.5-7.5 7.5 7.5 7.5m-6-15L5.25 12l7.5 7.5\"\n              />\n            </svg>\n          </button>\n          <button class=\"${this.#cssPrefix}pagination-button\" ref=\"data-den-pagination-prev-button\">\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n              stroke-width=\"1.5\"\n              stroke=\"currentColor\"\n              class=\"${this.#cssPrefix}pagination-button-svg\"\n            >\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M15.75 19.5 8.25 12l7.5-7.5\" />\n            </svg>\n          </button>\n          <div class=\"${this.#cssPrefix}pagination-info\" ref=\"data-den-pagination-info\">\n            1-10 ${this.options.ofText || 'of'} 100\n          </div>\n          <button class=\"${this.#cssPrefix}pagination-button\" ref=\"data-den-pagination-next-button\">\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n              stroke-width=\"1.5\"\n              stroke=\"currentColor\"\n              class=\"${this.#cssPrefix}pagination-button-svg\"\n            >\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"m8.25 4.5 7.5 7.5-7.5 7.5\" />\n            </svg>\n          </button>\n          <button class=\"${this.#cssPrefix}pagination-button\" ref=\"data-den-pagination-last-button\">\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n              stroke-width=\"1.5\"\n              stroke=\"currentColor\"\n              class=\"${this.#cssPrefix}pagination-button-svg\"\n            >\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"m5.25 4.5 7.5 7.5-7.5 7.5m6-15 7.5 7.5-7.5 7.5\" />\n            </svg>\n          </button>\n        </div>\n      </div>`;\n\n    this.element = createHtmlElement(template);\n    this.buttons = {\n      first: this.element.querySelector('[ref=data-den-pagination-first-button]') as HTMLButtonElement,\n      prev: this.element.querySelector('[ref=data-den-pagination-prev-button]') as HTMLButtonElement,\n      next: this.element.querySelector('[ref=data-den-pagination-next-button]') as HTMLButtonElement,\n      last: this.element.querySelector('[ref=data-den-pagination-last-button]') as HTMLButtonElement,\n    };\n    this.attachUiEvents();\n    this.subscribeToEvents();\n  }\n\n  getGui(): HTMLElement {\n    return this.element;\n  }\n\n  attachUiEvents(): void {\n    this.buttons.first.addEventListener('click', () => {\n      this.PubSub.publish('command:pagination:load-first-page:start', {\n        context: new Context('command:pagination:load-first-page:start'),\n      });\n    });\n    this.buttons.prev.addEventListener('click', () => {\n      this.PubSub.publish('command:pagination:load-prev-page:start', {\n        context: new Context('command:pagination:load-prev-page:start'),\n      });\n    });\n    this.buttons.next.addEventListener('click', () => {\n      this.PubSub.publish('command:pagination:load-next-page:start', {\n        context: new Context('command:pagination:load-next-page:start'),\n      });\n    });\n    this.buttons.last.addEventListener('click', () => {\n      this.PubSub.publish('command:pagination:load-last-page:start', {\n        context: new Context('command:pagination:load-last-page:start'),\n      });\n    });\n  }\n\n  destroy(): void {\n    this.element.innerHTML = '';\n    document.querySelector('.data-den-pagination')?.remove();\n  }\n\n  private subscribeToEvents(): void {\n    this.PubSub.subscribe(\n      'info:pagination:info-change:done',\n      (event: { data: { firstRowIndex: number; lastRowIndex: number; allTotalRows: number; pageSize: number } }) => {\n        this.updateInfo(event.data.firstRowIndex, event.data.lastRowIndex, event.data.allTotalRows);\n        this.updateButtonsState(event.data.firstRowIndex, event.data.lastRowIndex, event.data.allTotalRows);\n      }\n    );\n  }\n\n  private updateButtonsState(firstRowIndex: number, lastRowIndex: number, allTotalRows: number): void {\n    Object.values(this.buttons).forEach((button: HTMLButtonElement) => (button.disabled = false));\n\n    if (firstRowIndex === 0) {\n      this.buttons.first.disabled = true;\n      this.buttons.prev.disabled = true;\n    }\n\n    if (lastRowIndex === allTotalRows) {\n      this.buttons.next.disabled = true;\n      this.buttons.last.disabled = true;\n    }\n  }\n\n  private updateInfo(firstRowIndex: number, lastRowIndex: number, allTotalRows: number): void {\n    const info = this.element.querySelector('[ref=data-den-pagination-info');\n    info!.innerHTML = `${firstRowIndex + 1}-${lastRowIndex} ${this.options.ofText || 'of'} ${allTotalRows}`;\n  }\n\n  public updatePageSize(pageSize: number): void {\n    this.PubSub.publish('info:pagination:page-size-change:done', {\n      pageSize: pageSize,\n      context: new Context('info:pagination:page-size-change:done'),\n    });\n  }\n}\n","import { DataDenColDef } from '../data-den-options.interface';\n\n// Get Elements\nexport const getPinnedLeftColumns = (columns: DataDenColDef[]) => {\n  return columns.filter((col) => col.pinned === 'left');\n};\n\nexport const getMainColumns = (columns: DataDenColDef[]) => {\n  return columns.filter((col) => !col.pinned);\n};\n\nexport const getPinnedRightColumns = (columns: DataDenColDef[]) => {\n  return columns.filter((col) => col.pinned === 'right');\n};\n\nexport const getMainOrderedColumns = (columns: DataDenColDef[]) => {\n  return getMainColumnIndexes(columns).map((index) => columns[index]);\n};\n\n// Get Indexes\nexport const getMainColumnIndexes = (columns: DataDenColDef[]) => {\n  return getMainColumns(columns).map((col) => columns.indexOf(col));\n};\n\n// Get Orders\nexport const getPinnedLeftColumnsOrder = (columns: DataDenColDef[]) => {\n  return getPinnedLeftColumns(columns).map((_, key) => key);\n};\n\nexport const getMainColumnsOrder = (columns: DataDenColDef[]) => {\n  return getMainColumns(columns).map((_, key) => key);\n};\n\nexport const getPinnedRightColumnsOrder = (columns: DataDenColDef[]) => {\n  return getPinnedRightColumns(columns).map((_, key) => key);\n};\n\nexport const getAllColumnsOrder = (columns: DataDenColDef[]) => {\n  return [\n    ...getPinnedLeftColumns(columns).map((col) => columns.indexOf(col)),\n    ...getMainColumns(columns).map((col) => columns.indexOf(col)),\n    ...getPinnedRightColumns(columns).map((col) => columns.indexOf(col)),\n  ];\n};\n","export class DataDenPinningPreviousState {\n  private data: { [key: string]: any } = {};\n\n  constructor(values: { [key: string]: any }) {\n    this.data = { ...this.data, ...values };\n  }\n\n  getValue(key: string): any {\n    return this.data[key];\n  }\n}\n","export class DataDenEventEmitter {\n  static #callbacks: { [key: string]: any[] } = {};\n\n  static on(name: string, callback: any): void {\n    if (!this.#callbacks[name]) {\n      this.#callbacks[name] = [];\n    }\n    this.#callbacks[name].push(callback);\n  }\n\n  static triggerEvent(name: string, args: any): any {\n    const event = {\n      name,\n      preventDefault: () => {\n        event.defaultPrevented = true;\n      },\n      defaultPrevented: false,\n      ...args,\n    };\n\n    this.#callbacks[name]?.forEach((callback) => {\n      callback(event);\n    });\n\n    return event;\n  }\n}\n","import { DataDenColDef, DataDenInternalOptions } from '../../data-den-options.interface';\nimport { DataDenCell, DataDenHeaderCell } from './cell';\nimport { DataDenPaginationRenderer } from './pagination';\nimport { DataDenHeaderRow, DataDenRow } from './row';\nimport { DataDenPubSub } from '../../data-den-pub-sub';\nimport { DataDenEvent } from '../../data-den-event';\nimport { DataDenSortOrder } from '../sorting/data-den-sorting.interface';\nimport { Context } from '../../context';\nimport {\n  getMainColumnIndexes,\n  getMainOrderedColumns,\n  getPinnedLeftColumns,\n  getMainColumns,\n  getPinnedRightColumns,\n  getAllColumnsOrder,\n} from '../../utils/columns-order';\nimport { DataDenPinningPreviousState } from '../pinning/data-den-pinning-previous-state';\nimport { DataDenEventEmitter } from '../../data-den-event-emitter';\n\nexport class DataDenRenderingService {\n  #container: HTMLElement;\n  #options: DataDenInternalOptions;\n  #orderedColumns: DataDenColDef[];\n  #defaultOrderedColumns: DataDenColDef[];\n  #columnsOrder: number[];\n  #headerRow: DataDenHeaderRow;\n  #rows: DataDenRow[] = [];\n  #paginationRenderer: DataDenPaginationRenderer | null = null;\n\n  constructor(container: HTMLElement, options: DataDenInternalOptions, private PubSub: DataDenPubSub) {\n    this.#container = container;\n    this.#options = options;\n\n    if (options.pagination) {\n      this.#paginationRenderer = new DataDenPaginationRenderer(\n        options.paginationOptions,\n        options.cssPrefix,\n        this.PubSub\n      );\n    }\n\n    this.#init();\n    this.#subscribeToEvents();\n    this.#subscribeFetchDone();\n    this.#publishFetchStart();\n  }\n\n  #init() {\n    this.#orderedColumns = getMainOrderedColumns(this.#options.columns);\n    this.#defaultOrderedColumns = getMainOrderedColumns(this.#options.columns);\n    this.#columnsOrder = getMainColumnIndexes(this.#options.columns);\n    this.#headerRow = this.#createHeaderRow(this.#options.columns, null);\n\n    this.renderTable();\n  }\n\n  #createPinnedHeaderCells(\n    pinnedColumnsDefs: DataDenColDef[],\n    rowIndex: number,\n    order: DataDenSortOrder\n  ): DataDenHeaderCell[] {\n    return pinnedColumnsDefs.map((colDef) => {\n      const value = colDef.headerName;\n      const left = 0;\n      const width = colDef.width || 120;\n      const colIndex = this.#options.columns.map((defaultColumn) => defaultColumn.field).indexOf(colDef.field);\n\n      return new DataDenHeaderCell(\n        value,\n        colIndex,\n        rowIndex,\n        left,\n        width,\n        colDef.pinned,\n        this.#options,\n        order,\n        this.PubSub\n      );\n    });\n  }\n\n  #createMainHeaderCells(\n    mainColumnsDefs: DataDenColDef[],\n    rowIndex: number,\n    order: DataDenSortOrder\n  ): DataDenHeaderCell[] {\n    return mainColumnsDefs.map((colDef, index) => {\n      const value = colDef.headerName;\n      const left = this.#orderedColumns.slice(0, index).reduce((acc, curr) => acc + (curr.width || 120), 0);\n      const width = this.#orderedColumns[index].width || 120;\n      const colIndex = this.#options.columns.map((defaultColumn) => defaultColumn.field).indexOf(colDef.field);\n\n      return new DataDenHeaderCell(\n        value,\n        colIndex,\n        rowIndex,\n        left,\n        width,\n        colDef.pinned,\n        this.#options,\n        order,\n        this.PubSub\n      );\n    });\n  }\n\n  #createHeaderRow(colDefs: DataDenColDef[], order: DataDenSortOrder): DataDenHeaderRow {\n    const rowIndex = 0;\n\n    const pinnedHeaderCellsLeft = this.#createPinnedHeaderCells(getPinnedLeftColumns(colDefs), rowIndex, order);\n    const mainHeaderCells = this.#createMainHeaderCells(getMainColumns(colDefs), rowIndex, order);\n    const pinnedHeaderCellsRight = this.#createPinnedHeaderCells(\n      getPinnedRightColumns(colDefs).reverse(),\n      rowIndex,\n      order\n    );\n\n    const headerCells = [...pinnedHeaderCellsLeft, ...mainHeaderCells, ...pinnedHeaderCellsRight];\n\n    return new DataDenHeaderRow(rowIndex, headerCells, this.#options);\n  }\n\n  #createPinnedCellsLeft(key: string, value: any, colIndex: number, rowIndex: number): DataDenCell | undefined {\n    const colDef = this.#options.columns.find((col) => col.field === key)!;\n    if (colDef.pinned !== 'left') {\n      return undefined;\n    }\n\n    const left = 0;\n    const width = this.#options.columns[colIndex].width || 120;\n\n    return new DataDenCell(value, colIndex, rowIndex, left, width, colDef.pinned, this.#options);\n  }\n\n  #createMainCells(key: string, value: any, colIndex: number, rowIndex: number): DataDenCell | undefined {\n    const colDef = this.#options.columns.find((col) => col.field === key)!;\n    if (colDef.pinned) {\n      return undefined;\n    }\n\n    const orderedColIndex = this.#orderedColumns.findIndex((col) => col.field === key);\n    const left = this.#orderedColumns.slice(0, orderedColIndex).reduce((acc, curr) => acc + (curr.width || 120), 0);\n    const width = this.#orderedColumns[orderedColIndex].width || 120;\n\n    return new DataDenCell(value, colIndex, rowIndex, left, width, colDef.pinned, this.#options);\n  }\n\n  #createPinnedCellsRight(key: string, value: any, colIndex: number, rowIndex: number): DataDenCell | undefined {\n    const colDef = this.#options.columns.find((col) => col.field === key)!;\n    if (colDef.pinned !== 'right') {\n      return undefined;\n    }\n\n    const pinnedColIndex = this.#options.columns\n      .filter((col) => col.pinned === 'right')\n      .map((defaultColumn) => defaultColumn.field)\n      .indexOf(key);\n\n    const left = 0;\n    const width = getPinnedRightColumns(this.#options.columns)[pinnedColIndex].width || 120;\n\n    return new DataDenCell(value, colIndex, rowIndex, left, width, colDef.pinned, this.#options);\n  }\n\n  #createDataRows(rowsData: any): DataDenRow[] {\n    return rowsData.map((rowData: any, rowIndex: number) => {\n      const pinnedCellsLeft = Object.entries(rowData).map(([key, value], colIndex) =>\n        this.#createPinnedCellsLeft(key, value, colIndex, rowIndex)\n      );\n      const mainCells = Object.entries(rowData);\n      mainCells.sort(([aField], [bField]) => {\n        // sort based on this.#orderedColumns order\n        const aIndex = this.#orderedColumns.findIndex((col) => col.field === aField);\n        const bIndex = this.#orderedColumns.findIndex((col) => col.field === bField);\n        return aIndex - bIndex;\n      });\n      const mainCellsSorted = mainCells.map<DataDenCell>(([key, value], colIndex) =>\n        this.#createMainCells(key, value, colIndex, rowIndex)\n      );\n\n      const pinnedCellsRight = Object.entries(rowData)\n        .reverse()\n        .map(([key, value], colIndex) => this.#createPinnedCellsRight(key, value, colIndex, rowIndex));\n\n      const cells = [...pinnedCellsLeft, ...mainCellsSorted, ...pinnedCellsRight].filter((cell) => cell !== undefined);\n\n      return new DataDenRow(rowIndex, cells, this.#options);\n    });\n  }\n\n  #publishFetchStart() {\n    this.PubSub.publish('command:fetch:start', {\n      caller: this,\n      context: new Context('command:fetch:start'),\n    });\n  }\n\n  renderTable(): void {\n    const grid = this.#renderGrid();\n\n    const gridMain = document.createElement('div');\n    gridMain.setAttribute('ref', 'gridMain');\n    gridMain.classList.add(`${this.#options.cssPrefix}grid-main`);\n\n    gridMain.appendChild(this.#renderHeader());\n    gridMain.appendChild(this.#renderBody());\n    grid.appendChild(gridMain);\n\n    if (this.#paginationRenderer) {\n      grid.appendChild(this.#paginationRenderer.getGui());\n    }\n\n    this.#container.appendChild(grid);\n    this.#calculateGridSize();\n  }\n\n  rerenderTable(): void {\n    this.#container.innerHTML = '';\n\n    this.#init();\n    this.#publishFetchStart();\n\n    this.PubSub.publish('command:rerendering:done', {\n      caller: this,\n      context: new Context('command:rerendering:done'),\n    });\n    this.PubSub.publish('command:rerendering:done', {\n      caller: this,\n      context: new Context('command:rerendering:done'),\n    });\n  }\n\n  #calculateGridSize(): void {\n    const header = this.#container.querySelector(`.${this.#options.cssPrefix}header`) as HTMLElement;\n    const body = this.#container.querySelector(`.${this.#options.cssPrefix}grid-rows`) as HTMLElement;\n    const headerMainCellsWrapper = this.#container.querySelector('[ref=headerMainCellsWrapper]') as HTMLElement;\n    const rowMainCellsWrappers = this.#container.querySelectorAll('[ref=rowMainCellsWrapper]');\n\n    const allColsWidth = this.#options.columns.reduce((acc, curr) => acc + (curr.width || 120), 0);\n    const leftPinnedColsWidth = this.#options.columns\n      .filter((col) => col.pinned === 'left')\n      .reduce((acc, curr) => acc + (curr.width || 120), 0);\n    const mainColsWidth = this.#options.columns\n      .filter((col) => !col.pinned)\n      .reduce((acc, curr) => acc + (curr.width || 120), 0);\n    const rowsHeight = this.#options.rowHeight * this.#rows.length;\n\n    header.style.width = `${allColsWidth}px`;\n    body.style.width = `${allColsWidth}px`;\n    body.style.height = `${rowsHeight}px`;\n    headerMainCellsWrapper.style.left = `${leftPinnedColsWidth}px`;\n    headerMainCellsWrapper.style.width = `${mainColsWidth}px`;\n\n    if (rowMainCellsWrappers) {\n      rowMainCellsWrappers.forEach((rowMainCellsWrapper: HTMLElement) => {\n        rowMainCellsWrapper.style.left = `${leftPinnedColsWidth}px`;\n        rowMainCellsWrapper.style.width = `${mainColsWidth}px`;\n      });\n    }\n  }\n\n  #renderGrid(): HTMLElement {\n    const grid = document.createElement('div');\n    grid.classList.add(`${this.#options.cssPrefix}grid`);\n\n    return grid;\n  }\n\n  #renderHeader(): HTMLElement {\n    const headerContainer = document.createElement('div');\n    headerContainer.classList.add(`${this.#options.cssPrefix}header`);\n    headerContainer.setAttribute('role', 'rowgroup');\n\n    const headerRow = this.#headerRow.render();\n    headerContainer.appendChild(headerRow);\n\n    return headerContainer;\n  }\n\n  #renderEditor(e: MouseEvent): HTMLElement {\n    const target = e.target as HTMLElement;\n    if (target.tagName !== 'SPAN') return;\n\n    const cellElement = target.parentElement;\n    const rowIndex = Number(cellElement.getAttribute('rowIndex'));\n    const colIndex = Number(cellElement.getAttribute('colIndex'));\n    const cell = this.#rows[rowIndex].cells[colIndex] as DataDenCell;\n\n    const cells: DataDenCell[] = [];\n    let editable, selectedCell: DataDenCell;\n\n    if (this.#options.rowEditMode) {\n      this.#rows[rowIndex].cells.forEach((cell: DataDenCell) => {\n        cells.push(cell);\n        if (selectedCell) return;\n        selectedCell =\n          cell === this.#rows[rowIndex].cells[colIndex] && this.#options.columns[cell.colIndex].editable ? cell : null;\n      });\n    } else {\n      selectedCell = cell;\n      cells.push(cell);\n    }\n\n    cells.forEach((cell: DataDenCell) => {\n      editable = this.#options.columns[cell.colIndex].editable;\n\n      if ((typeof editable === `function` && !editable()) || editable === false) return;\n\n      if (!selectedCell) {\n        selectedCell = editable ? cell : null;\n      }\n\n      cell.startEditMode(selectedCell, cells);\n    });\n  }\n\n  #renderBody(): HTMLElement {\n    const rowContainer = document.createElement('div');\n    rowContainer.classList.add(`${this.#options.cssPrefix}grid-rows`);\n    rowContainer.setAttribute('role', 'rowgroup');\n    rowContainer.addEventListener('dblclick', (e: MouseEvent) => this.#renderEditor(e));\n\n    const rows = document.createDocumentFragment();\n    this.#rows.forEach((row) => rows.appendChild(row.render()));\n    rowContainer.appendChild(rows);\n\n    return rowContainer;\n  }\n\n  #subscribeToEvents(): void {\n    this.PubSub.subscribe('info:dragging:columns-reorder:done', (event: DataDenEvent) => {\n      this.#columnsOrder = event.data.columnsOrder;\n      this.#orderedColumns = this.#columnsOrder.map((columnIndex) => this.#defaultOrderedColumns[columnIndex]);\n    });\n    this.PubSub.subscribe('info:resizing:start', (event: DataDenEvent) => {\n      const currentColIndex = getAllColumnsOrder(this.#options.columns)[event.data.currentColIndex];\n      this.#options.columns[currentColIndex].width = event.data.newCurrentColWidth;\n      this.#calculateGridSize();\n    });\n    this.PubSub.subscribe('command:pin-column:start', (event: DataDenEvent) => {\n      const pinningPreviousState = new DataDenPinningPreviousState({\n        pin: this.#options.columns[event.data.colIndex].pinned,\n      });\n      this.#options.columns[event.data.colIndex].pinned = event.data.pin;\n\n      const pinningStartEvent = DataDenEventEmitter.triggerEvent('pinningStart', {\n        pin: event.data.pin,\n        colIndex: event.data.colIndex,\n        columns: this.#options.columns,\n      });\n\n      if (pinningStartEvent.defaultPrevented) {\n        this.#options.columns[event.data.colIndex].pinned = pinningPreviousState.getValue('pin');\n        return;\n      }\n\n      this.rerenderTable();\n\n      DataDenEventEmitter.triggerEvent('pinningDone', {\n        pin: event.data.pin,\n        colIndex: event.data.colIndex,\n        columns: this.#options.columns,\n      });\n    });\n  }\n\n  #subscribeFetchDone(): void {\n    this.PubSub.subscribe('info:fetch:done', (event: DataDenEvent) => {\n      this.#updateRows(event);\n    });\n  }\n\n  #updateRows(event: DataDenEvent): void {\n    const { rows } = event.data;\n\n    const rowsEl = document.createDocumentFragment();\n    this.#rows = this.#createDataRows(rows);\n    this.#rows.forEach((row) => rowsEl.appendChild(row.render()));\n\n    const rowContainer = this.#container.querySelector(`.${this.#options.cssPrefix}grid-rows`)!;\n    rowContainer.innerHTML = '';\n    rowContainer.appendChild(rowsEl);\n    this.#calculateGridSize();\n  }\n}\n","import { DataDenPubSub } from '../../data-den-pub-sub';\nimport { DataDenInternalOptions, DataDenPaginationOptions } from '../../data-den-options.interface';\nimport { Context } from '../../context';\nimport { DataDenEvent } from '../../data-den-event';\n\nexport class DataDenPaginationService {\n  #options: DataDenPaginationOptions;\n  #currentPage: number;\n  #pageSize: number;\n  #allTotalRows: number;\n\n  constructor(options: DataDenInternalOptions, private PubSub: DataDenPubSub) {\n    this.#options = options.paginationOptions;\n\n    this.#currentPage = 0;\n    this.#allTotalRows = 0;\n    this.#pageSize = this.#options.pageSize || 10;\n\n    this.#subscribeToEvents();\n  }\n\n  #subscribeToEvents() {\n    this.PubSub.subscribe('command:pagination:load-first-page:start', () => {\n      this.#loadFirstPage();\n    });\n    this.PubSub.subscribe('command:pagination:load-prev-page:start', () => {\n      this.#loadPrevPage();\n    });\n    this.PubSub.subscribe('command:pagination:load-next-page:start', () => {\n      this.#loadNextPage();\n    });\n    this.PubSub.subscribe('command:pagination:load-last-page:start', () => {\n      this.#loadLastPage();\n    });\n    this.PubSub.subscribe('info:pagination:page-size-change:done', (event: { data: { pageSize: number } }) => {\n      this.#pageSize = event.data.pageSize;\n      this.#currentPage = 0;\n      this.#updateState();\n    });\n    this.PubSub.subscribe('info:fetch:done', (event: DataDenEvent) => {\n      if (this.#allTotalRows || this.#allTotalRows === event.data.rows.length) {\n        return;\n      }\n      this.#allTotalRows = event.data.rows.length;\n      this.#updateState();\n    });\n  }\n\n  #updateState(): void {\n    const firstRowIndex = this.#currentPage * this.#pageSize;\n    const lastRowIndex = Math.min(this.#allTotalRows, this.#currentPage * this.#pageSize + this.#pageSize);\n\n    this.#publishEvents(firstRowIndex, lastRowIndex, this.#allTotalRows);\n  }\n\n  #publishEvents(firstRowIndex: number, lastRowIndex: number, allTotalRows: number) {\n    this.PubSub.publish('info:pagination:info-change:done', {\n      firstRowIndex,\n      lastRowIndex,\n      allTotalRows,\n      pageSize: this.#pageSize,\n      context: new Context('info:pagination:info-change:done'),\n    });\n  }\n\n  #loadFirstPage() {\n    this.#currentPage = 0;\n    this.#updateState();\n  }\n\n  #loadPrevPage() {\n    if (this.#currentPage === 0) {\n      return;\n    }\n\n    this.#currentPage--;\n    this.#updateState();\n  }\n\n  #loadNextPage() {\n    if (this.#currentPage * this.#pageSize + this.#pageSize >= this.#allTotalRows) {\n      return;\n    }\n\n    this.#currentPage++;\n    this.#updateState();\n  }\n\n  #loadLastPage() {\n    if (this.#allTotalRows / this.#pageSize - 1 >= this.#allTotalRows) {\n      return;\n    }\n\n    this.#currentPage = Math.ceil(this.#allTotalRows / this.#pageSize - 1);\n    this.#updateState();\n  }\n}\n","import { DataDenInternalOptions } from '../../data-den-options.interface';\nimport { DataDenPubSub } from '../../data-den-pub-sub';\nimport { Context } from '../../context';\nimport { getMainColumnsOrder } from '../../utils/columns-order';\n\nexport class DataDenDraggingService {\n  #container: HTMLElement;\n  #gridMain: HTMLElement;\n  #options: DataDenInternalOptions;\n  #isInitiated: boolean;\n  #isDragging: boolean;\n  #headerMainCellsWrapper: HTMLElement | null;\n  #headers: HTMLElement[];\n  #currentIndex: number;\n  #targetIndex: number;\n  #prevTargetIndex: number;\n  #columns: HTMLElement[][];\n  #columnPositions: { left: string; width: number }[];\n  #breakpoints: number[];\n  #mainColumnsOrder: number[];\n  #defaultGridOffsetLeft: number;\n  #cssPrefix: string;\n\n  #handleGridMouseMove: (e: MouseEvent) => void;\n  #handleDocumentMouseUp: (e: MouseEvent) => void;\n  #handleHeaderMouseDown: (e: MouseEvent) => void;\n\n  constructor(container: HTMLElement, options: DataDenInternalOptions, private PubSub: DataDenPubSub) {\n    this.#container = container;\n    this.#gridMain = container.querySelector('[ref=\"gridMain\"]')!;\n    this.#options = options;\n    this.#isInitiated = false;\n    this.#isDragging = false;\n    this.#headerMainCellsWrapper = null;\n    this.#headers = [];\n    this.#currentIndex = -1;\n    this.#targetIndex = -1;\n    this.#prevTargetIndex = -1;\n    this.#columns = [];\n    this.#columnPositions = [];\n    this.#breakpoints = [];\n    this.#mainColumnsOrder = [];\n    this.#defaultGridOffsetLeft = 0;\n    this.#cssPrefix = options.cssPrefix;\n\n    this.#handleGridMouseMove = () => {};\n    this.#handleDocumentMouseUp = () => {};\n    this.#handleHeaderMouseDown = () => {};\n\n    this.#subscribeFetchDone();\n    this.#subscribeRerenderingDone();\n  }\n\n  init() {\n    this.#setDefaultColumnsOrder();\n    this.#setHeaderElements();\n    this.update();\n    this.#setColumnParams();\n    this.#addColumnDragEventHandlers();\n    this.#subscribeResizingDone();\n\n    this.#isInitiated = true;\n  }\n\n  dispose() {\n    this.#removeDraggableClass();\n    this.#removeDocumentEventListeners();\n  }\n\n  update() {\n    const tempColumns = [...this.#getAllColumnElements()];\n    this.#columns = this.#mainColumnsOrder.map((columnIndex) => tempColumns[columnIndex]);\n  }\n\n  #subscribeFetchDone() {\n    this.PubSub.subscribe('info:fetch:done', () => {\n      if (this.#isInitiated) {\n        this.update();\n      } else {\n        this.init();\n      }\n    });\n  }\n\n  #subscribeRerenderingDone() {\n    this.PubSub.subscribe('command:rerendering:done', () => {\n      this.#setDefaultColumnsOrder();\n      this.#setHeaderElements();\n\n      setTimeout(() => {\n        this.#gridMain = this.#container.querySelector('[ref=\"gridMain\"]')!;\n        this.update();\n        this.#setColumnParams();\n        this.#addColumnDragEventHandlers();\n      }, 0);\n    });\n  }\n\n  #setHeaderElements() {\n    this.#headerMainCellsWrapper = this.#container.querySelector('[ref=\"headerMainCellsWrapper\"]')!;\n    this.#headers = Array.from(this.#headerMainCellsWrapper.querySelectorAll('[ref=\"headerCell\"]'))!;\n  }\n\n  #setColumnParams() {\n    this.#columnPositions = [...this.#getAllColumnPositions()];\n    this.#setBreakpoints();\n    this.#defaultGridOffsetLeft =\n      this.#gridMain!.getBoundingClientRect().left + parseFloat(this.#headerMainCellsWrapper!.style.left);\n  }\n\n  #setBreakpoints() {\n    this.#breakpoints = [];\n    this.#columnPositions.forEach((column) => {\n      if (column.left === 'auto') {\n        return;\n      }\n\n      this.#breakpoints.push(parseFloat(column.left));\n    });\n    this.#breakpoints.sort((a, b) => a - b);\n  }\n\n  #getOffsetX(pageX: number) {\n    return pageX - this.#defaultGridOffsetLeft + this.#gridMain.scrollLeft;\n  }\n\n  #getAllColumnPositions() {\n    return this.#headers.map((column: HTMLElement) => ({\n      left: column.style.left,\n      width: parseFloat(column.style.width),\n    }));\n  }\n\n  #getAllColumnElements() {\n    return this.#headers.map((_: HTMLElement, key: number) => [...this.#getColumnElements(key)]);\n  }\n\n  #getColumnElements(index: number) {\n    const colHeader = this.#headers[index];\n    const rows = this.#container.querySelectorAll('[ref=\"row\"]');\n    const cells = Array.from(rows).map(\n      (row) => row.querySelectorAll('.data-den-main-cells-wrapper [ref=\"cell\"]')[index] as HTMLElement\n    );\n\n    return [colHeader, ...cells];\n  }\n\n  #addColumnDragEventHandlers() {\n    this.#handleHeaderMouseDown = this.#onHeaderMouseDown.bind(this);\n    this.#handleGridMouseMove = this.#onGridMouseMove.bind(this);\n    this.#handleDocumentMouseUp = this.#onDocumentMouseUp.bind(this);\n\n    this.#headerMainCellsWrapper!.addEventListener('mousedown', this.#handleHeaderMouseDown);\n    this.#container.addEventListener('mousemove', this.#handleGridMouseMove);\n    document.addEventListener('mouseup', this.#handleDocumentMouseUp);\n  }\n\n  #setDefaultColumnsOrder() {\n    this.#mainColumnsOrder = getMainColumnsOrder(this.#options.columns);\n  }\n\n  #subscribeResizingDone() {\n    this.PubSub.subscribe('info:resizing:done', () => {\n      const orderedColumnPositions = [...this.#getAllColumnPositions()];\n      this.#columnPositions = this.#mainColumnsOrder.map((columnIndex) => orderedColumnPositions[columnIndex]);\n      this.#setBreakpoints();\n      this.#defaultGridOffsetLeft =\n        this.#gridMain!.getBoundingClientRect().left + parseFloat(this.#headerMainCellsWrapper!.style.left);\n    });\n  }\n\n  #onHeaderMouseDown(event: MouseEvent) {\n    event.stopPropagation();\n    const target = event.target as HTMLElement;\n\n    if (\n      event.button !== 0 ||\n      (target.getAttribute('ref') !== 'headerCell' &&\n        target.getAttribute('ref') !== 'headerCellMain' &&\n        target.getAttribute('ref') !== 'headerValueAndSorter')\n    ) {\n      return;\n    }\n\n    this.#onMouseDown(this.#getOffsetX(event.pageX));\n  }\n\n  #onMouseDown(offsetX: number) {\n    this.#getCurrentIndex(offsetX);\n    this.#isDragging = true;\n    this.#enableTransition();\n    this.#setActiveStyle();\n  }\n\n  #getCurrentIndex(offsetX: number) {\n    this.#currentIndex = this.#getMinBreakpointIndex(this.#breakpoints, offsetX);\n  }\n\n  #onGridMouseMove(event: MouseEvent) {\n    if (!this.#isDragging) {\n      return;\n    }\n\n    const offsetX = this.#getOffsetX(event.pageX);\n    this.#targetIndex = this.#getMinBreakpointIndex(this.#breakpoints, offsetX);\n\n    const currentColumnWidth = this.#columnPositions[this.#currentIndex].width;\n    const gap = this.#getColumnsGap(this.#currentIndex);\n\n    // prevent swapping if there is no space for it (current column is wider than target column)\n    if (\n      (this.#getDirection() === 'right' && this.#breakpoints[this.#targetIndex] + gap > offsetX) ||\n      (this.#getDirection() === 'left' && this.#breakpoints[this.#targetIndex] + currentColumnWidth < offsetX)\n    ) {\n      this.#targetIndex = this.#currentIndex;\n      return;\n    }\n\n    if (this.#prevTargetIndex !== this.#targetIndex && this.#targetIndex !== -1) {\n      this.#updateColumnPositions();\n      this.#prevTargetIndex = this.#targetIndex;\n    }\n  }\n\n  #onDocumentMouseUp() {\n    if (!this.#isDragging) {\n      return;\n    }\n\n    this.#finalizeDragging();\n  }\n\n  #enableTransition() {\n    this.#columns.forEach((column) => {\n      column.forEach((cell) => {\n        cell.classList.add(`${this.#cssPrefix}dragging`);\n      });\n    });\n  }\n\n  #setActiveStyle() {\n    this.#container.children[0].classList.add(`${this.#options.cssPrefix}dragging`);\n    this.#columns[this.#currentIndex].forEach((cell) => {\n      cell.classList.add(`${this.#cssPrefix}active`);\n    });\n  }\n\n  #unsetActiveStyle() {\n    this.#container.children[0].classList.remove(`${this.#options.cssPrefix}dragging`);\n    this.#columns.forEach((column) => {\n      column.forEach((cell) => {\n        cell.classList.remove(`${this.#cssPrefix}active`);\n      });\n    });\n  }\n\n  #disableTransition() {\n    this.#columns.forEach((column) => {\n      column.forEach((cell) => {\n        cell.classList.remove(`${this.#cssPrefix}dragging`);\n      });\n    });\n  }\n\n  #getMinBreakpointIndex(array: number[], value: number): number {\n    for (let i = 0; i < array.length - 1; i++) {\n      if (array[i] < value && array[i + 1] >= value) {\n        return i;\n      }\n    }\n    return array.length - 1;\n  }\n\n  #updateColumnPositions() {\n    if (this.#currentIndex === this.#targetIndex && this.#prevTargetIndex === -1) {\n      return;\n    }\n\n    const direction = this.#getDirection();\n    const currentOrderedIndex = direction === 'right' ? this.#targetIndex - 1 : this.#targetIndex + 1;\n    const gap = this.#getColumnsGap(currentOrderedIndex);\n\n    if (direction === 'right') {\n      this.#breakpoints[this.#targetIndex] = this.#breakpoints[this.#targetIndex] + gap;\n    } else {\n      this.#breakpoints[this.#targetIndex + 1] = this.#breakpoints[this.#targetIndex + 1] - gap;\n    }\n\n    this.#swapArrayElements(this.#columnPositions, currentOrderedIndex, this.#targetIndex);\n    this.#swapArrayElements(this.#columns, currentOrderedIndex, this.#targetIndex);\n    this.#swapArrayElements(this.#mainColumnsOrder, currentOrderedIndex, this.#targetIndex);\n\n    this.#columns.forEach((column, index) => {\n      column.forEach((cell) => {\n        cell.style.left = `${this.#breakpoints[index]}px`;\n      });\n    });\n\n    this.#publishColumnsOrder();\n  }\n\n  #getDirection() {\n    return this.#prevTargetIndex > this.#targetIndex ? 'left' : 'right';\n  }\n\n  #getColumnsGap(sourceIndex: number) {\n    const sourceColumnWidth = this.#columnPositions[sourceIndex].width;\n    const targetColumnWidth = this.#columnPositions[this.#targetIndex].width;\n    return targetColumnWidth - sourceColumnWidth;\n  }\n\n  #swapArrayElements(array: HTMLElement[][] | any[], sourceIndex: number, targetIndex: number) {\n    if (sourceIndex === -1) {\n      return;\n    }\n\n    const temp = array[sourceIndex];\n    array[sourceIndex] = array[targetIndex];\n    array[targetIndex] = temp;\n  }\n\n  #finalizeDragging() {\n    this.#isDragging = false;\n    this.#disableTransition();\n    this.#unsetActiveStyle();\n    this.#resetIndexes();\n  }\n\n  #resetIndexes() {\n    this.#currentIndex = -1;\n    this.#targetIndex = -1;\n    this.#prevTargetIndex = -1;\n  }\n\n  #removeDraggableClass() {\n    this.#headers.forEach((header) => {\n      header.classList.remove('data-den-header-cell-draggable');\n    });\n  }\n\n  #removeDocumentEventListeners() {\n    this.#headerMainCellsWrapper!.removeEventListener('mousedown', this.#handleHeaderMouseDown);\n    this.#container.removeEventListener('mousemove', this.#handleGridMouseMove);\n    document.removeEventListener('mouseup', this.#handleDocumentMouseUp);\n  }\n\n  #publishColumnsOrder() {\n    this.PubSub.publish('info:dragging:columns-reorder:done', {\n      columnsOrder: this.#mainColumnsOrder,\n      context: new Context('info:dragging:columns-reorder:done'),\n    });\n  }\n}\n","import { Context } from '../../context';\nimport { DataDenEvent } from '../../data-den-event';\nimport { DataDenInternalOptions } from '../../data-den-options.interface';\nimport { DataDenPubSub } from '../../data-den-pub-sub';\nimport { getAllColumnsOrder } from '../../utils/columns-order';\n\nexport class DataDenResizingService {\n  #container: HTMLElement;\n  #options: DataDenInternalOptions;\n  #isInitiated: boolean;\n  #isResizing: boolean;\n  #headers: HTMLElement[];\n  #headersMain: HTMLElement[];\n  #rows: HTMLElement[];\n  #currentHeader: HTMLElement | null;\n  #currentCol: HTMLElement[] | null;\n  #headersOnTheRight: HTMLElement[];\n  #columnsOrder: number[];\n  #isResizingPinnedRightColumn: boolean;\n  readonly #columnMinWidth = 45;\n\n  constructor(container: HTMLElement, options: DataDenInternalOptions, private PubSub: DataDenPubSub) {\n    this.#container = container;\n    this.#options = options;\n    this.#isInitiated = false;\n    this.#isResizing = false;\n    this.#headers = [];\n    this.#headersMain = [];\n    this.#columnsOrder = [];\n    this.#rows = [];\n    this.#currentHeader = null;\n    this.#currentCol = null;\n    this.#headersOnTheRight = [];\n    this.#isResizingPinnedRightColumn;\n\n    this.#subscribeFetchDone();\n    this.#subscribeRerenderingDone();\n  }\n\n  init() {\n    this.#headers = Array.from(this.#container.querySelectorAll('[ref=\"headerCell\"]'))!;\n    this.#headersMain = Array.from(\n      this.#container.querySelector('[ref=\"headerMainCellsWrapper\"]').querySelectorAll('[ref=\"headerCell\"]')\n    )!;\n    this.#columnsOrder = getAllColumnsOrder(this.#options.columns);\n\n    this.#subscribeResizingEvents();\n    this.#subscribeDraggingEvent();\n\n    this.#isInitiated = true;\n  }\n\n  #subscribeFetchDone(): void {\n    this.PubSub.subscribe('info:fetch:done', () => {\n      if (!this.#isInitiated) {\n        this.init();\n      }\n\n      setTimeout(() => {\n        this.#rows = Array.from(this.#container.querySelectorAll('[ref=\"row\"]'));\n      }, 0);\n    });\n  }\n\n  #subscribeRerenderingDone(): void {\n    this.PubSub.subscribe('command:rerendering:done', () => {\n      this.#headers = Array.from(this.#container.querySelectorAll('[ref=\"headerCell\"]'))!;\n      this.#headersMain = Array.from(\n        this.#container.querySelector('[ref=\"headerMainCellsWrapper\"]').querySelectorAll('[ref=\"headerCell\"]')\n      )!;\n      this.#columnsOrder = getAllColumnsOrder(this.#options.columns);\n    });\n  }\n\n  #subscribeResizingEvents() {\n    this.PubSub.subscribe('info:resizing:mousedown', this.#onMousedown.bind(this));\n    document.addEventListener('mousemove', this.#onMousemove.bind(this));\n    document.addEventListener('mouseup', this.#onMouseup.bind(this));\n  }\n\n  #subscribeDraggingEvent() {\n    this.PubSub.subscribe('info:dragging:columns-reorder:done', (event: DataDenEvent) => {\n      this.#columnsOrder = event.data.columnsOrder;\n    });\n  }\n\n  #onMousedown(event: DataDenEvent) {\n    this.#container.children[0].classList.add(`${this.#options.cssPrefix}resizing`);\n    this.#currentHeader = event.data.target.parentElement;\n    this.#currentCol = this.#getColumnElements(this.#currentHeader);\n    this.#isResizingPinnedRightColumn = event.data.isPinnedRight;\n\n    if (!this.#currentHeader || !this.#currentHeader.parentElement) {\n      return;\n    }\n\n    this.#isResizing = true;\n    this.#headersOnTheRight = this.#getHeadersOnTheRight();\n  }\n\n  #onMouseup() {\n    this.#container.children[0].classList.remove(`${this.#options.cssPrefix}resizing`);\n    if (!this.#isResizing) {\n      return;\n    }\n\n    this.#isResizing = false;\n\n    this.PubSub.publish('info:resizing:done', {\n      context: new Context('info:resizing:done'),\n    });\n  }\n\n  #onMousemove(event: MouseEvent) {\n    if (!this.#isResizing || !this.#currentHeader || this.#currentCol.some((cell) => cell === undefined)) {\n      this.#isResizing = false;\n      return;\n    }\n\n    const movementX = this.#isResizingPinnedRightColumn ? -event.movementX : event.movementX;\n    const currentWidth = this.#currentHeader?.style.width;\n    const headerLeft = this.#currentHeader.querySelector(`.${this.#options.cssPrefix}header-resizer`);\n    const newWidth = parseInt(currentWidth || '0') + movementX;\n\n    if ((movementX > 0 && event.clientX < headerLeft.getClientRects()[0].left) || newWidth < this.#columnMinWidth)\n      return;\n\n    this.#resizeCurrentColumn(newWidth);\n    this.#updateRemainingColumnsPosition(movementX);\n    this.PubSub.publish('info:resizing:start', {\n      currentColIndex: this.#headers.indexOf(this.#currentHeader),\n      newCurrentColWidth: parseInt(this.#currentHeader.style.width, 10),\n      context: new Context('info:resizing:start'),\n    });\n  }\n\n  #resizeCurrentColumn(newWidth: number) {\n    this.#currentCol.forEach((cell) => (cell.style.width = `${newWidth}px`));\n  }\n\n  #updateRemainingColumnsPosition(movementX: number) {\n    if (!this.#currentHeader) {\n      return;\n    }\n\n    this.#headersOnTheRight.forEach((header) => {\n      const currentLeft = header.style.left;\n      // prevent right pinned columns from moving\n      if (currentLeft === 'auto') {\n        return;\n      }\n      const newLeft = parseInt(currentLeft || '0') + movementX;\n      const col = this.#getColumnElements(header);\n      col.forEach((cell: HTMLElement) => (cell.style.left = `${newLeft}px`));\n    });\n  }\n\n  #getHeadersOnTheRight(): HTMLElement[] {\n    const currentHeaderLeft = parseInt(this.#currentHeader?.style.left || '0', 10);\n    return this.#headersMain.filter((header) => parseInt(header.style.left || '0', 10) > currentHeaderLeft);\n  }\n\n  #getColumnElements(colHeader: HTMLElement | null): HTMLElement[] {\n    if (!colHeader || !colHeader.parentElement) {\n      return [];\n    }\n\n    const colHeaderIndex = this.#headers.indexOf(colHeader);\n    const colCells = this.#rows.map(\n      (row: HTMLElement) => row.querySelectorAll('[ref=\"cell\"]')[colHeaderIndex] as HTMLElement\n    );\n\n    return [colHeader, ...colCells];\n  }\n}\n","import { Context } from '../../context';\nimport { DataDenEvent } from '../../data-den-event';\nimport { DataDenInternalOptions } from '../../data-den-options.interface';\nimport { DataDenPubSub } from '../../data-den-pub-sub';\nimport { DataDenActiveFiltersChangeEvent } from './data-den-active-filter-change-event.interface';\nimport { DataDenActiveHeaderFilter } from './data-den-active-header-filter.interface';\nimport { DataDenActiveQuickFilterChangeEvent } from './data-den-active-quick-filter-change-event.interface';\nimport { DataDenActiveQuickFilter } from './data-den-active-quick-filter.interface';\n\nexport class DataDenFilteringService {\n  activeHeaderFilters: { [key: string]: DataDenActiveHeaderFilter } = {};\n  activeQuickFilter: DataDenActiveQuickFilter;\n  options: DataDenInternalOptions;\n\n  constructor(options: DataDenInternalOptions, private PubSub: DataDenPubSub) {\n    this.options = options;\n    this.activeQuickFilter = {\n      searchTerm: '',\n      filterFn: options.quickFilterOptions.filterFn,\n      columns: options.columns,\n    };\n\n    this.PubSub.subscribe('info:filtering:header-filter-changed', this.#handleHeaderFilterChange.bind(this));\n    this.PubSub.subscribe('info:filtering:quick-filter-changed', this.#handleQuickFilterChange.bind(this));\n  }\n\n  #handleHeaderFilterChange(event: DataDenEvent) {\n    const { field, type, state, isActive, filterFn } = event.data;\n    const filter: DataDenActiveHeaderFilter = { type, state, filterFn };\n\n    this.#updateActiveHeaderFilters(field, filter, isActive);\n\n    const activeFiltersChangeEvent: DataDenActiveFiltersChangeEvent = {\n      context: new Context('info:filtering:active-filters-changed'),\n      filters: this.activeHeaderFilters,\n    };\n\n    this.PubSub.publish('info:filtering:active-filters-changed', activeFiltersChangeEvent);\n  }\n\n  #updateActiveHeaderFilters(field: string, filter: DataDenActiveHeaderFilter, isActive: boolean) {\n    if (isActive) {\n      this.activeHeaderFilters[field] = filter;\n    } else {\n      delete this.activeHeaderFilters[field];\n    }\n  }\n\n  #handleQuickFilterChange(event: DataDenEvent) {\n    const { searchTerm } = event.data;\n\n    this.activeQuickFilter.searchTerm = searchTerm;\n    this.activeQuickFilter.columns = this.options.columns;\n\n    const activeQuickFilterChangeEvent: DataDenActiveQuickFilterChangeEvent = {\n      context: new Context('info:filtering:active-quick-filter-changed'),\n      filter: this.activeQuickFilter,\n    };\n\n    this.PubSub.publish('info:filtering:active-quick-filter-changed', activeQuickFilterChangeEvent);\n  }\n}\n","import { DataDenActiveFilterParams, DataDenQuickFilterOptions } from '../../data-den-options.interface';\n\nconst defaultQuickFilterFn = (params: DataDenActiveFilterParams) => {\n  const searchTerm = params.searchTerm\n    .toString()\n    .toLowerCase()\n    .split(',')\n    .filter((term: string) => term !== '');\n\n  const value = params.value.toString().toLowerCase();\n\n  let res = true;\n\n  searchTerm.forEach((term: string) => {\n    const someCellIncludeTerm = value.includes(term);\n    if (!someCellIncludeTerm) res = false;\n  });\n\n  return res;\n};\n\nexport const defaultQuickFilterOptions: Required<DataDenQuickFilterOptions> = {\n  filterFn: defaultQuickFilterFn,\n};\n","export class DataDenSortingPreviousState {\n  private data: { [key: string]: any } = {};\n\n  constructor(values: { [key: string]: any }) {\n    this.data = { ...this.data, ...values };\n  }\n\n  getValue(key: string): any {\n    return this.data[key];\n  }\n}\n","import { DataDenSortOrder } from './data-den-sorting.interface';\nimport { DataDenPubSub } from '../../data-den-pub-sub';\nimport { DataDenEvent } from '../../data-den-event';\nimport { DataDenEventEmitter } from '../../data-den-event-emitter';\nimport { DataDenSortingPreviousState } from './data-den-sorting-previous-state';\nimport { DataDenInternalOptions, DataDenSortComparator } from '../../data-den-options.interface';\nimport { Context } from '../../context';\n\nexport interface DataDenActiveSorter {\n  field: string;\n  order: DataDenSortOrder;\n  comparator: DataDenSortComparator;\n  sortIndex: number;\n}\n\nexport class DataDenSortingService {\n  #field: string;\n  #order: DataDenSortOrder;\n  #options: DataDenInternalOptions;\n  activeSortersMap: Map<string, DataDenActiveSorter>;\n  #sortOptions: (string | null)[];\n\n  constructor(options: DataDenInternalOptions, private PubSub: DataDenPubSub) {\n    this.#field = '';\n    this.#order = null;\n    this.#options = options;\n\n    this.activeSortersMap = new Map();\n\n    this.PubSub.subscribe('command:sorting:start', (event: DataDenEvent) => {\n      this.#sortOptions = options.columns.find((x) => x.field === event.data.field).sortOrder;\n      const sortingPreviousState = new DataDenSortingPreviousState({ field: this.#field, order: this.#order });\n\n      const { field, isMultiSort } = event.data;\n      const isCurrentSorterActive = this.activeSortersMap.has(field);\n      const currentSorterOrder = isCurrentSorterActive ? this.activeSortersMap.get(field).order : null;\n\n      let order: DataDenSortOrder;\n\n      if (event.data.order) {\n        order = event.data.order;\n      } else {\n        const currentSorterOrderIdx = this.#sortOptions.indexOf(currentSorterOrder);\n        order = this.#sortOptions[(currentSorterOrderIdx + 1) % this.#sortOptions.length] as DataDenSortOrder;\n      }\n\n      this.#field = event.data.field;\n      const colDef = this.#options.columns.find((column) => column.field === this.#field);\n      const comparator = colDef.sortOptions.comparator;\n\n      const sortingStartEvent = DataDenEventEmitter.triggerEvent('sortingStart', {\n        field: field,\n        order: order,\n        comparator,\n        sortFn: this.sort,\n      });\n\n      if (sortingStartEvent.defaultPrevented) {\n        this.#field = sortingPreviousState.getValue('field');\n        this.#order = sortingPreviousState.getValue('order');\n        return;\n      }\n\n      if (isMultiSort) {\n        this.updateActiveSortersMap(field, order, comparator);\n      } else {\n        this.activeSortersMap.clear();\n        this.updateActiveSortersMap(field, order, comparator);\n      }\n\n      this.PubSub.publish('command:fetch:sort-start', {\n        caller: this,\n        context: event.context,\n        field: field,\n        order: order,\n        comparator,\n        sortFn: this.sort,\n        activeSorters: this.getActiveSortersArray(),\n        isMultiSort,\n      });\n    });\n\n    this.#setColumnDefaultSort(options);\n  }\n\n  #setColumnDefaultSort(options: DataDenInternalOptions) {\n    this.#options.columns.forEach((colDef) => {\n      const order = colDef.defaultSort;\n\n      if (order && colDef.sortOrder.includes(order)) {\n        this.PubSub.publish('command:sorting:start', {\n          caller: this,\n          context: new Context('command:sorting:start'),\n          field: colDef.field,\n          order: order,\n          multiSort: options.multiSort,\n        });\n      }\n    });\n  }\n\n  updateActiveSortersMap(field: string, order: DataDenSortOrder, comparator: DataDenSortComparator) {\n    const sorterExist = this.activeSortersMap.has(field);\n\n    if (order === null && sorterExist) {\n      this.activeSortersMap.delete(field);\n      this.updateSortIndexes();\n      return;\n    }\n\n    if (sorterExist && order !== null) {\n      const sort = this.activeSortersMap.get(field);\n      sort.order = order;\n    } else if (!sorterExist && order !== null) {\n      const sortIndex = this.activeSortersMap.size;\n      this.activeSortersMap.set(this.#field, { field, order, comparator, sortIndex });\n    }\n  }\n\n  updateSortIndexes() {\n    let currentIndex = 0;\n\n    for (const sorter of this.activeSortersMap.values()) {\n      sorter.sortIndex = currentIndex++;\n    }\n  }\n\n  getActiveSortersArray(): DataDenActiveSorter[] {\n    return Array.from(this.activeSortersMap.values()).sort((a, b) => a.sortIndex - b.sortIndex);\n  }\n\n  sort(rows: any, activeSorters: DataDenActiveSorter[]): any[] {\n    rows.sort((a: any, b: any) => {\n      let sortResult = 0;\n\n      for (const sorter of activeSorters) {\n        const { order, field, comparator } = sorter;\n\n        if (sortResult === 0) {\n          const isAscending = order === 'asc';\n          const fieldA = a[field];\n          const fieldB = b[field];\n\n          const result = comparator(fieldA, fieldB);\n\n          sortResult = isAscending ? result : result * -1;\n        } else {\n          break;\n        }\n      }\n\n      return sortResult;\n    });\n\n    return rows;\n  }\n}\n","import {\n  DataDenFetchOptions,\n  DataDenFiltersOptions,\n  DataDenPaginationOptions,\n  DataDenQuickFilterOptions,\n  DataDenSortOptions,\n} from '../data-den-fetch-options.interface';\n\nexport abstract class DataDenDataLoaderStrategy {\n  abstract getData(options: DataDenFetchOptions): Promise<any[]>;\n  abstract filterData(data: any[], params: DataDenFiltersOptions): Promise<any[]>;\n  abstract sortData(data: any[], params: DataDenSortOptions): Promise<any[]>;\n  abstract quickFilterData(data: any[], params: DataDenQuickFilterOptions): Promise<any[]>;\n  abstract paginateData(data: any[], params: DataDenPaginationOptions): Promise<any[]>;\n}\n","import { DataDenDataLoaderStrategy } from './data-den-data-loader-strategy';\nimport {\n  DataDenFetchOptions,\n  DataDenFiltersOptions,\n  DataDenPaginationOptions,\n  DataDenQuickFilterOptions,\n  DataDenSortOptions,\n} from '../data-den-fetch-options.interface';\nimport { deepCopy } from '../../../utils';\n\nexport class DataDenClientDataLoaderStrategy extends DataDenDataLoaderStrategy {\n  #data: any[];\n\n  constructor(data: any[]) {\n    super();\n\n    this.#data = data;\n  }\n\n  getData(options: DataDenFetchOptions): Promise<any[]> {\n    return this.filterData(deepCopy(this.#data), options.filtersOptions)\n      .then((filtered) => this.quickFilterData(filtered, options.quickFilterOptions))\n      .then((quickFiltered) => this.sortData(quickFiltered, options.sortingOptions))\n      .then((sorted) => this.paginateData(sorted, options.paginationOptions));\n  }\n\n  filterData(rows: any[], filtersOptions: DataDenFiltersOptions | undefined): Promise<any[]> {\n    if (!filtersOptions) {\n      return Promise.resolve(rows);\n    }\n\n    const headers = Object.keys(filtersOptions.filters);\n    const filtered = headers.reduce((res, header) => {\n      return res.filter((row: any) => {\n        const filterFn = filtersOptions.filters[header].filterFn;\n        const state = filtersOptions.filters[header].state;\n        const value = row[header];\n\n        return filterFn(state, value);\n      });\n    }, rows);\n\n    return Promise.resolve(filtered);\n  }\n\n  paginateData(rows: any[], paginationOptions: DataDenPaginationOptions | undefined): Promise<any[]> {\n    if (!paginationOptions) {\n      return Promise.resolve(rows);\n    }\n\n    const { firstRowIndex, lastRowIndex } = paginationOptions;\n\n    const paginated = rows.slice(firstRowIndex, lastRowIndex);\n\n    return Promise.resolve(paginated);\n  }\n\n  sortData(rows: any[], sortOptions: DataDenSortOptions | undefined): Promise<any[]> {\n    if (!sortOptions) {\n      return Promise.resolve(rows);\n    }\n\n    const { sortFn, activeSorters } = sortOptions;\n\n    const sorted = sortFn(rows, activeSorters);\n\n    return Promise.resolve(sorted);\n  }\n\n  quickFilterData(rows: any[], quickFilterOptions: DataDenQuickFilterOptions | undefined): Promise<any[]> {\n    if (!quickFilterOptions) {\n      return Promise.resolve(rows);\n    }\n\n    const { searchTerm, filterFn, columns } = quickFilterOptions;\n\n    const filtered = rows.filter((row) => {\n      return filterFn({\n        searchTerm,\n        value: Object.values(row),\n        columns,\n      });\n    });\n\n    return Promise.resolve(filtered);\n  }\n}\n","import { DataDenDataLoaderStrategy } from './data-den-data-loader-strategy';\nimport {\n  DataDenFetchOptions,\n  DataDenFiltersOptions,\n  DataDenPaginationOptions,\n  DataDenQuickFilterOptions,\n  DataDenSortOptions,\n} from '../data-den-fetch-options.interface';\n\nexport class DataDenServerDataLoaderStrategy extends DataDenDataLoaderStrategy {\n  getData(options: DataDenFetchOptions): Promise<any[]> {\n    return fetch('url' + new URLSearchParams(options as any)).then((res) => res.json());\n  }\n  sortData(data: any[], sortOptions: DataDenSortOptions): Promise<any[]> {\n    return fetch('url' + new URLSearchParams(sortOptions as any)).then((res) => res.json());\n  }\n  filterData(data: any[], filtersOptions: DataDenFiltersOptions): Promise<any[]> {\n    return fetch('url' + new URLSearchParams(filtersOptions as any)).then((res) => res.json());\n  }\n  quickFilterData(data: any[], quickFilterOptions: DataDenQuickFilterOptions): Promise<any[]> {\n    return fetch('url' + new URLSearchParams(quickFilterOptions as any)).then((res) => res.json());\n  }\n  paginateData(data: any[], paginationOptions: DataDenPaginationOptions): Promise<any[]> {\n    return fetch('url' + new URLSearchParams(paginationOptions as any)).then((res) => res.json());\n  }\n}\n","import { Context } from '../../context';\nimport { DataDenEvent } from '../../data-den-event';\nimport { DataDenPubSub } from '../../data-den-pub-sub';\nimport { DataDenFetchDoneEvent } from './data-den-fetch-done.event.interface';\nimport { DataDenFetchOptions } from './data-den-fetch-options.interface';\nimport { DataDenDataLoaderStrategy } from './strategy/data-den-data-loader-strategy';\nimport { DataDenEventEmitter } from '../../data-den-event-emitter';\n\nexport class DataDenFetchService {\n  #loader: DataDenDataLoaderStrategy;\n  #fetchOptions: DataDenFetchOptions;\n\n  constructor(loader: DataDenDataLoaderStrategy, private PubSub: DataDenPubSub) {\n    this.#loader = loader;\n    this.#fetchOptions = {};\n    this.#subscribeFetchStart();\n    this.#subscribeSortingDone();\n    this.#subscribeQuickFilterChanged();\n    this.#subscribeFilterChange();\n    this.#subscribePaginationChange();\n  }\n\n  #getData(fetchOptions: DataDenFetchOptions): Promise<any[]> {\n    return this.#loader.getData(fetchOptions);\n  }\n\n  #publishFetchDone(context: Context, data: any[]): void {\n    const EventData: DataDenFetchDoneEvent = {\n      caller: this,\n      context,\n      rows: data,\n    };\n    this.PubSub.publish('info:fetch:done', EventData);\n  }\n\n  #subscribeFetchStart(): void {\n    this.PubSub.subscribe('command:fetch:start', (event: DataDenEvent) => {\n      this.#getData(this.#fetchOptions).then((data: any[]) => {\n        this.#publishFetchDone(event.context, data);\n      });\n    });\n  }\n\n  #subscribeSortingDone(): void {\n    this.PubSub.subscribe('command:fetch:sort-start', (event: DataDenEvent) => {\n      this.#fetchOptions.sortingOptions = {\n        field: event.data.field,\n        order: event.data.order,\n        comparator: event.data.comparator,\n        sortFn: event.data.sortFn,\n        activeSorters: event.data.activeSorters,\n      };\n      this.#getData(this.#fetchOptions).then((data: any[]) => {\n        this.#publishFetchDone(event.context, data);\n        DataDenEventEmitter.triggerEvent('sortingDone', this.#fetchOptions.sortingOptions);\n      });\n    });\n  }\n\n  #subscribeQuickFilterChanged(): void {\n    this.PubSub.subscribe('info:filtering:active-quick-filter-changed', (event: DataDenEvent) => {\n      this.#fetchOptions.quickFilterOptions = {\n        searchTerm: event.data.filter.searchTerm,\n        columns: event.data.filter.columns,\n        filterFn: event.data.filter.filterFn,\n      };\n      this.#getData(this.#fetchOptions).then((data: any[]) => {\n        this.#publishFetchDone(event.context, data);\n      });\n    });\n  }\n\n  #subscribeFilterChange(): void {\n    this.PubSub.subscribe('info:filtering:active-filters-changed', (event: DataDenEvent) => {\n      this.#fetchOptions.filtersOptions = {\n        filters: event.data.filters,\n      };\n      this.#getData(this.#fetchOptions).then((data: any[]) => {\n        this.#publishFetchDone(event.context, data);\n      });\n    });\n  }\n\n  #subscribePaginationChange(): void {\n    this.PubSub.subscribe('info:pagination:info-change:done', (event: DataDenEvent) => {\n      this.#fetchOptions.paginationOptions = {\n        firstRowIndex: event.data.firstRowIndex,\n        lastRowIndex: event.data.lastRowIndex,\n      };\n      this.#getData(this.#fetchOptions).then((data: any[]) => {\n        this.#publishFetchDone(event.context, data);\n      });\n    });\n  }\n}\n","import { Context } from './context';\n\nexport class DataDenEvent {\n  public key: string;\n\n  constructor(public name: string, public data: any, public context: Context) {\n    this.key = '' + Math.random();\n  }\n}\n","import { DataDenPublishedEvent } from './data-den-published-event';\nimport { DataDenEvent } from './data-den-event';\n\ntype DataDenEventCallback = (event: DataDenEvent) => void;\n\nexport class DataDenPubSub {\n  #listeners: { [key: string]: DataDenEventCallback[] } = {\n    'command:pagination:load-first-page:start': [],\n    'command:pagination:load-prev-page:start': [],\n    'command:pagination:load-next-page:start': [],\n    'command:pagination:load-last-page:start': [],\n    'info:pagination:data-change:done': [],\n    'info:pagination:info-change:done': [],\n    'info:pagination:page-size-change:done': [],\n    'info:dragging:columns-reorder:done': [],\n    'command:sorting:start': [],\n    'info:filtering:get-active-quick-filter:done': [],\n    'info:filtering:header-filter-changed': [],\n    'info:filtering:active-filters-changed': [],\n    'info:filtering:quick-filter-changed': [],\n    'info:filtering:active-quick-filter-changed': [],\n    'info:resizing:mousedown': [],\n    'info:resizing:start': [],\n    'info:resizing:done': [],\n    'command:fetch:start': [],\n    'command:fetch:sort-start': [],\n    'info:fetch:done': [],\n    'command:pin-column:start': [],\n    'command:rerendering:done': [],\n  };\n\n  publish(name: string, data: DataDenPublishedEvent) {\n    if (!this.#listeners[name]) {\n      return;\n    }\n\n    const event = new DataDenEvent(name, data, data.context);\n    this.#listeners[name].forEach((callback) => {\n      callback(event);\n    });\n  }\n\n  subscribe(name: string, callback: DataDenEventCallback) {\n    if (!this.#listeners[name]) {\n      throw new Error(`Could not subscribe: Unsupported event: ${name}`);\n    }\n    this.#listeners[name].push(callback);\n\n    return () => {\n      this.#unsubscribe(name, callback);\n    };\n  }\n\n  #unsubscribe(name: string, callback: DataDenEventCallback) {\n    if (!this.#listeners[name]) {\n      return;\n    }\n    this.#listeners[name] = this.#listeners[name].filter((cb) => cb !== callback);\n  }\n}\n","import { createHtmlElement } from '../../../utils';\nimport { DataDenCellEditor } from './data-den-cell-editor';\nimport { DataDenCellEditorParams } from './data-den-cell-editor-params';\n\nexport class DataDenCellTextEditor implements DataDenCellEditor {\n  element: HTMLElement;\n  input: HTMLInputElement;\n  params: DataDenCellEditorParams;\n  #cssPrefix: string;\n\n  constructor(params: DataDenCellEditorParams) {\n    this.#cssPrefix = params.cssPrefix;\n    this.params = params;\n\n    const template = `<input class=\"${this.#cssPrefix}cell-editor\" type=\"text\" value=\"${params.value}\" />`;\n\n    this.element = createHtmlElement(template);\n    this.input = this.element as HTMLInputElement;\n\n    this.attachUiEvents();\n  }\n\n  attachUiEvents() {\n    if (this.input) {\n      this.input.addEventListener('keyup', (e) => this.params.onKeyUp(e));\n    }\n  }\n\n  afterUiRender(): void {\n    this.input.select();\n  }\n\n  getGui(): HTMLElement {\n    return this.element;\n  }\n\n  getValue(): any {\n    return this.input.value;\n  }\n}\n","import {\n  DataDenDateFilterParserFn,\n  DataDenInternalOptions,\n  DataDenPaginationOptions,\n  DataDenSortComparator,\n  DataDenSortOptions,\n} from './data-den-options.interface';\nimport { defaultQuickFilterOptions } from './modules/filtering';\nimport { DataDenHeaderTextFilterRenderer } from './modules/rendering';\nimport { DataDenDefaultCellRenderer } from './modules/rendering/cell';\nimport { DataDenCellTextEditor } from './modules/rendering/editor';\n\nconst defaultPaginationOptions: Required<DataDenPaginationOptions> = {\n  pageSize: 10,\n  pageSizeOptions: [5, 10, 25],\n  ofText: 'of',\n};\n\nconst defaultDateParserFn: DataDenDateFilterParserFn = (dateString: string) => {\n  const dateParts = dateString.split('/').map((part) => Number(part));\n  const [day, month, year] = dateParts;\n\n  return new Date(year, month - 1, day);\n};\n\nconst defaultSortComparator: DataDenSortComparator = (fieldA, fieldB) => {\n  if (typeof fieldA === 'string') {\n    fieldA = fieldA.toLowerCase();\n  }\n\n  if (typeof fieldB === 'string') {\n    fieldB = fieldB.toLowerCase();\n  }\n\n  if (fieldA === fieldB) {\n    return 0;\n  }\n\n  return fieldA > fieldB ? 1 : -1;\n};\n\nconst defaultSortOptions: Required<DataDenSortOptions> = {\n  comparator: defaultSortComparator,\n};\n\nexport const defaultOptions: DataDenInternalOptions = {\n  cssPrefix: 'data-den-',\n  mode: 'client',\n  columns: [],\n  defaultColDef: {\n    sort: false,\n    sortOptions: defaultSortOptions,\n    defaultSort: null,\n    sortOrder: ['asc', 'desc', null],\n    filter: false,\n    filterRenderer: DataDenHeaderTextFilterRenderer,\n    filterOptions: {\n      method: 'includes',\n      debounceTime: 500,\n      caseSensitive: false,\n      dateParserFn: defaultDateParserFn,\n      listOptions: [],\n    },\n    resize: false,\n    width: 200,\n    cellRenderer: DataDenDefaultCellRenderer,\n    cellEditor: DataDenCellTextEditor,\n    editable: false,\n  },\n  rows: [],\n  draggable: false,\n  pagination: false,\n  paginationOptions: defaultPaginationOptions,\n  quickFilterOptions: defaultQuickFilterOptions,\n  resizable: false,\n  rowHeight: 42,\n  headerHeight: 42,\n  multiSortKey: 'shift',\n  rowEditMode: false,\n  multiSort: true,\n};\n","export const isObject = (obj: any) => obj && typeof obj === 'object';\n","import { isObject } from './object';\n\nexport const deepMerge = (object: any, source: any) => {\n  if (!isObject(object) || !isObject(source)) {\n    return source;\n  }\n\n  Object.keys(source).forEach((key) => {\n    const objValue = object[key];\n    const srcValue = source[key];\n\n    if (Array.isArray(objValue) && Array.isArray(srcValue)) {\n      object[key] = (srcValue) ? srcValue : objValue;\n    } else if (isObject(objValue) && isObject(srcValue)) {\n      object[key] = deepMerge(Object.assign({}, objValue), srcValue);\n    } else {\n      object[key] = srcValue;\n    }\n  });\n\n  return object;\n};\n","import './scss/index.scss';\n\nimport { DataDenRenderingService } from './modules/rendering';\nimport { DataDenPaginationService } from './modules/pagination';\nimport { DataDenDraggingService } from './modules/dragging';\nimport { DataDenResizingService } from './modules/resizing';\nimport { DataDenFilteringService } from './modules/filtering';\nimport { DataDenSortingService } from './modules/sorting';\nimport { DataDenFetchService } from './modules/fetch';\nimport {\n  DataDenClientDataLoaderStrategy,\n  DataDenServerDataLoaderStrategy,\n  DataDenDataLoaderStrategy,\n} from './modules/fetch';\nimport { DataDenPubSub } from './data-den-pub-sub';\nimport { DataDenEventEmitter } from './data-den-event-emitter';\nimport { Context } from './context';\nimport { DataDenColDef, DataDenInternalOptions, DataDenOptions } from './data-den-options.interface';\nimport { defaultOptions } from './default-options.interface';\nimport { deepMerge } from './utils/deep-merge';\nimport { deepCopy } from './utils';\nimport { DataDenQuickFilterChangeEvent } from './modules/rendering/filter/data-den-quick-filter-change-event.interface';\n\nexport class DataDen {\n  #rendering: DataDenRenderingService;\n  #sorting: DataDenSortingService;\n  #filtering: DataDenFilteringService;\n  #pagination: DataDenPaginationService;\n  #dragging: DataDenDraggingService | null;\n  #resizing: DataDenResizingService | null;\n  #dataLoaderStrategy: DataDenDataLoaderStrategy | null = null;\n  #fetch: DataDenFetchService | null = null;\n\n  private PubSub: DataDenPubSub = new DataDenPubSub();\n\n  constructor(container: HTMLElement, options: DataDenOptions) {\n    const gridOptions = this.#createOptions(defaultOptions, options);\n    this.#dataLoaderStrategy = this.#getDataLoaderStrategy(gridOptions);\n\n    if (this.#dataLoaderStrategy) {\n      this.#fetch = new DataDenFetchService(this.#dataLoaderStrategy, this.PubSub);\n    }\n\n    this.#rendering = new DataDenRenderingService(container, gridOptions, this.PubSub);\n    this.#sorting = new DataDenSortingService(gridOptions, this.PubSub);\n    this.#filtering = new DataDenFilteringService(gridOptions, this.PubSub);\n    this.#pagination = new DataDenPaginationService(gridOptions, this.PubSub);\n    this.#dragging = options.draggable ? new DataDenDraggingService(container, gridOptions, this.PubSub) : null;\n    this.#resizing = options.columns.some((column) => column.resize)\n      ? new DataDenResizingService(container, gridOptions, this.PubSub)\n      : null;\n  }\n\n  on(name: string, callback: any) {\n    DataDenEventEmitter.on(name, callback);\n  }\n\n  #createOptions(defaultOptions: DataDenInternalOptions, userOptions: DataDenOptions): DataDenInternalOptions {\n    const options = deepMerge(deepCopy(defaultOptions), userOptions);\n\n    options.columns.forEach((colDef: DataDenColDef, index: number) => {\n      options.columns[index] = deepMerge(deepCopy(options.defaultColDef), colDef);\n    });\n\n    return options;\n  }\n\n  #getDataLoaderStrategy(options: DataDenOptions): DataDenDataLoaderStrategy | null {\n    const { mode, rows } = options;\n\n    if (mode === 'client' && rows.length) {\n      return new DataDenClientDataLoaderStrategy(options.rows);\n    }\n\n    if (mode === 'server') {\n      return new DataDenServerDataLoaderStrategy();\n    }\n\n    return null;\n  }\n\n  sort(field: string, order: string): void {\n    const command = 'command:sorting:start';\n    this.PubSub.publish(command, {\n      context: new Context(command),\n      field,\n      order,\n    });\n  }\n\n  quickFilter(searchTerm: any) {\n    const context = new Context('info:filtering:quick-filter-changed');\n    const event: DataDenQuickFilterChangeEvent = {\n      context,\n      searchTerm,\n    };\n\n    this.PubSub.publish('info:filtering:quick-filter-changed', event);\n  }\n\n  pinColumn(pin: string | boolean, colIndex: number) {\n    const command = 'command:pin-column:start';\n    this.PubSub.publish(command, {\n      context: new Context(command),\n      pin,\n      colIndex,\n    });\n  }\n}\n"],"names":["createHtmlElement","template","elementName","placeholder","debounce","callback","debounceTime","timeout","args","debounceFn","deepCopy","obj","arr","item","i","newObj","key","parseDate","dateString","dateParts","part","year","month","day","isSameDate","date1","date2","escapeHtml","html","text","div","DataDenCell","value","colIndex","rowIndex","left","width","pinned","options","__privateAdd","_initRenderers","_getCellRendererParams","_getCellEditorParams","_onBlur","_onKeyUp","_cancelEditMode","_stopEditMode","_value","_options","_renderer","_editor","_left","e","__privateGet","__privateMethod","onBlur_fn","__privateSet","initRenderers_fn","selectedCell","cells","editor","cellElement","colDef","cellRenderer","cellEditor","cellRendererParams","getCellRendererParams_fn","cellEditorParams","getCellEditorParams_fn","onKeyUp_fn","stopEditMode_fn","target","cancelEditMode_fn","cell","_a","_b","DataDenDefaultCellRenderer","params","DataDenDefaultHeaderCellRenderer","_cssPrefix","DataDenHeaderSorterRenderer","Context","action","DataDenHeaderDefaultSorterRenderer","field","order","PubSub","_subscribeSortingStartEvent","_updateArrowDirectionAfterSort","_getArrowDirection","_updateSortIndexOrder","_field","_multiSortKey","_multiSortActive","_arrowDirection","_sortSequence","x","getArrowDirection_fn","event","isMultiSortKeyPressed","isMultiSort","subscribeSortingStartEvent_fn","command","activeSorters","updateArrowDirectionAfterSort_fn","updateSortIndexOrder_fn","arrowElements","arrowElement","nextOrderIdx","indexElement","activeSorter","sorter","sortIndexNumber","DataDenHeaderResizerRenderer","DataDenHeaderDefaultResizerRenderer","cssPrefix","_onMouseDown","_isPinnedRight","onMouseDown_fn","top","bottom","right","auto","basePlacements","start","end","clippingParents","viewport","popper","reference","variationPlacements","acc","placement","placements","beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite","modifierPhases","getNodeName","element","getWindow","node","ownerDocument","isElement","OwnElement","isHTMLElement","isShadowRoot","applyStyles","_ref","state","name","style","attributes","effect","_ref2","initialStyles","styleProperties","property","attribute","applyStyles$1","getBasePlacement","max","min","round","getUAString","uaData","isLayoutViewport","getBoundingClientRect","includeScale","isFixedStrategy","clientRect","scaleX","scaleY","visualViewport","addVisualOffsets","y","height","getLayoutRect","contains","parent","child","rootNode","next","getComputedStyle","isTableElement","getDocumentElement","getParentNode","getTrueOffsetParent","getContainingBlock","isFirefox","isIE","elementCss","currentNode","css","getOffsetParent","window","offsetParent","getMainAxisFromPlacement","within","mathMax","mathMin","withinMaxClamp","v","getFreshSideObject","mergePaddingObject","paddingObject","expandToHashMap","keys","hashMap","toPaddingObject","padding","arrow","_state$modifiersData$","popperOffsets","basePlacement","axis","isVertical","len","arrowRect","minProp","maxProp","endDiff","startDiff","arrowOffsetParent","clientSize","centerToReference","center","offset","axisProp","_options$element","arrow$1","getVariation","unsetSides","roundOffsetsByDPR","win","dpr","mapToStyles","_Object$assign2","popperRect","variation","offsets","position","gpuAcceleration","adaptive","roundOffsets","isFixed","_offsets$x","_offsets$y","_ref3","hasX","hasY","sideX","sideY","heightProp","widthProp","offsetY","offsetX","commonStyles","_ref4","_Object$assign","computeStyles","_ref5","_options$gpuAccelerat","_options$adaptive","_options$roundOffsets","computeStyles$1","passive","instance","_options$scroll","scroll","_options$resize","resize","scrollParents","scrollParent","eventListeners","hash","getOppositePlacement","matched","getOppositeVariationPlacement","getWindowScroll","scrollLeft","scrollTop","getWindowScrollBarX","getViewportRect","strategy","layoutViewport","getDocumentRect","_element$ownerDocumen","winScroll","body","isScrollParent","_getComputedStyle","overflow","overflowX","overflowY","getScrollParent","listScrollParents","list","isBody","updatedList","rectToClientRect","rect","getInnerBoundingClientRect","getClientRectFromMixedType","clippingParent","getClippingParents","canEscapeClipping","clipperElement","getClippingRect","boundary","rootBoundary","mainClippingParents","firstClippingParent","clippingRect","accRect","computeOffsets","commonX","commonY","mainAxis","detectOverflow","_options$placement","_options$strategy","_options$boundary","_options$rootBoundary","_options$elementConte","elementContext","_options$altBoundary","altBoundary","_options$padding","altContext","clippingClientRect","referenceClientRect","popperClientRect","elementClientRect","overflowOffsets","offsetData","multiply","computeAutoPlacement","flipVariations","_options$allowedAutoP","allowedAutoPlacements","allPlacements","allowedPlacements","overflows","a","b","getExpandedFallbackPlacements","oppositePlacement","flip","_options$mainAxis","checkMainAxis","_options$altAxis","checkAltAxis","specifiedFallbackPlacements","_options$flipVariatio","preferredPlacement","isBasePlacement","fallbackPlacements","referenceRect","checksMap","makeFallbackChecks","firstFittingPlacement","_basePlacement","isStartVariation","mainVariationSide","altVariationSide","checks","check","numberOfChecks","_loop","_i","fittingPlacement","_ret","flip$1","getSideOffsets","preventedOffsets","isAnySideFullyClipped","side","hide","referenceOverflow","popperAltOverflow","referenceClippingOffsets","popperEscapeOffsets","isReferenceHidden","hasPopperEscaped","hide$1","distanceAndSkiddingToXY","rects","invertDistance","skidding","distance","_options$offset","data","_data$state$placement","offset$1","popperOffsets$1","getAltAxis","preventOverflow","_options$tether","tether","_options$tetherOffset","tetherOffset","altAxis","tetherOffsetValue","normalizedTetherOffsetValue","offsetModifierState","_offsetModifierState$","mainSide","altSide","additive","minLen","maxLen","arrowPaddingObject","arrowPaddingMin","arrowPaddingMax","arrowLen","minOffset","maxOffset","clientOffset","offsetModifierValue","tetherMin","tetherMax","preventedOffset","_offsetModifierState$2","_mainSide","_altSide","_offset","_len","_min","_max","isOriginSide","_offsetModifierValue","_tetherMin","_tetherMax","_preventedOffset","preventOverflow$1","getHTMLElementScroll","getNodeScroll","isElementScaled","getCompositeRect","elementOrVirtualElement","isOffsetParentAnElement","offsetParentIsScaled","documentElement","modifiers","map","visited","result","modifier","sort","requires","dep","depModifier","orderModifiers","orderedModifiers","phase","fn","pending","resolve","mergeByName","merged","current","existing","DEFAULT_OPTIONS","areValidElements","_key","popperGenerator","generatorOptions","_generatorOptions","_generatorOptions$def","defaultModifiers","_generatorOptions$def2","defaultOptions","effectCleanupFns","isDestroyed","setOptionsAction","cleanupModifierEffects","m","runModifierEffects","_state$elements","index","_state$orderedModifie","_state$orderedModifie2","_ref$options","cleanupFn","noopFn","createPopper","DataDenHeaderMenuRenderer","_toggleDropdown","_openDropdown","_closeDropdown","_initDropdown","dropdownTemplate","initDropdown_fn","toggleDropdown_fn","closeDropdown_fn","openDropdown_fn","unPinTrigger","pinLeftTrigger","pinRightTrigger","DataDenHeaderCell","_getHeaderFilterParams","_onFilterChange","_renderDropdown","_filterRenderer","_sorterRenderer","_resizerRenderer","_headerMenuRenderer","_order","_isDropdownInitiated","isSomeFilterableCol","col","cellElementMain","cellElementValueAndSorter","renderDropdown_fn","filter","filterRenderer","filterParams","getHeaderFilterParams_fn","method","listOptions","onFilterChange_fn","context","type","isActive","filterFn","filterChangeEvent","DataDenHeaderFilterRenderer","DataDenHeaderTextFilterRenderer","searchTerm","caseSensitive","debounceFilter","DataDenHeaderNumberFilterRenderer","searchTermAsNumber","valueAsNumber","DataDenHeaderDateFilterRenderer","dateParserFn","searchTermAsDate","valueAsDate","DataDenHeaderSelectFilterRenderer","_createSelectOptions","createSelectOptions_fn","optionsFragment","option","optionEl","DataDenRow","leftCellsWidth","curr","rightCellsWidth","leftCellsWrapper","centerCellsWrapper","rightCellsWrapper","DataDenHeaderRow","el","DataDenPaginationRenderer","firstRowIndex","lastRowIndex","allTotalRows","button","info","pageSize","getPinnedLeftColumns","columns","getMainColumns","getPinnedRightColumns","getMainOrderedColumns","getMainColumnIndexes","getMainColumnsOrder","_","getAllColumnsOrder","DataDenPinningPreviousState","values","DataDenEventEmitter","_callbacks","DataDenRenderingService","container","_init","_createPinnedHeaderCells","_createMainHeaderCells","_createHeaderRow","_createPinnedCellsLeft","_createMainCells","_createPinnedCellsRight","_createDataRows","_publishFetchStart","_calculateGridSize","_renderGrid","_renderHeader","_renderEditor","_renderBody","_subscribeToEvents","_subscribeFetchDone","_updateRows","_container","_orderedColumns","_defaultOrderedColumns","_columnsOrder","_headerRow","_rows","_paginationRenderer","init_fn","subscribeToEvents_fn","subscribeFetchDone_fn","publishFetchStart_fn","grid","renderGrid_fn","gridMain","renderHeader_fn","renderBody_fn","calculateGridSize_fn","createHeaderRow_fn","createPinnedHeaderCells_fn","pinnedColumnsDefs","defaultColumn","createMainHeaderCells_fn","mainColumnsDefs","colDefs","pinnedHeaderCellsLeft","mainHeaderCells","pinnedHeaderCellsRight","headerCells","createPinnedCellsLeft_fn","createMainCells_fn","orderedColIndex","createPinnedCellsRight_fn","pinnedColIndex","createDataRows_fn","rowsData","rowData","pinnedCellsLeft","mainCells","aField","bField","aIndex","bIndex","mainCellsSorted","pinnedCellsRight","header","headerMainCellsWrapper","rowMainCellsWrappers","allColsWidth","leftPinnedColsWidth","mainColsWidth","rowsHeight","rowMainCellsWrapper","headerContainer","headerRow","renderEditor_fn","editable","rowContainer","rows","row","columnIndex","currentColIndex","pinningPreviousState","updateRows_fn","rowsEl","DataDenPaginationService","_updateState","_publishEvents","_loadFirstPage","_loadPrevPage","_loadNextPage","_loadLastPage","_currentPage","_pageSize","_allTotalRows","loadFirstPage_fn","loadPrevPage_fn","loadNextPage_fn","loadLastPage_fn","updateState_fn","publishEvents_fn","__privateWrapper","DataDenDraggingService","_subscribeRerenderingDone","_setHeaderElements","_setColumnParams","_setBreakpoints","_getOffsetX","_getAllColumnPositions","_getAllColumnElements","_getColumnElements","_addColumnDragEventHandlers","_setDefaultColumnsOrder","_subscribeResizingDone","_onHeaderMouseDown","_getCurrentIndex","_onGridMouseMove","_onDocumentMouseUp","_enableTransition","_setActiveStyle","_unsetActiveStyle","_disableTransition","_getMinBreakpointIndex","_updateColumnPositions","_getDirection","_getColumnsGap","_swapArrayElements","_finalizeDragging","_resetIndexes","_removeDraggableClass","_removeDocumentEventListeners","_publishColumnsOrder","_gridMain","_isInitiated","_isDragging","_headerMainCellsWrapper","_headers","_currentIndex","_targetIndex","_prevTargetIndex","_columns","_columnPositions","_breakpoints","_mainColumnsOrder","_defaultGridOffsetLeft","_handleGridMouseMove","_handleDocumentMouseUp","_handleHeaderMouseDown","subscribeRerenderingDone_fn","setDefaultColumnsOrder_fn","setHeaderElements_fn","setColumnParams_fn","addColumnDragEventHandlers_fn","subscribeResizingDone_fn","removeDraggableClass_fn","removeDocumentEventListeners_fn","tempColumns","getAllColumnElements_fn","getAllColumnPositions_fn","setBreakpoints_fn","column","getOffsetX_fn","pageX","getColumnElements_fn","colHeader","onHeaderMouseDown_fn","onGridMouseMove_fn","onDocumentMouseUp_fn","orderedColumnPositions","getCurrentIndex_fn","enableTransition_fn","setActiveStyle_fn","getMinBreakpointIndex_fn","currentColumnWidth","gap","getColumnsGap_fn","getDirection_fn","updateColumnPositions_fn","finalizeDragging_fn","unsetActiveStyle_fn","disableTransition_fn","array","direction","currentOrderedIndex","swapArrayElements_fn","publishColumnsOrder_fn","sourceIndex","sourceColumnWidth","targetIndex","temp","resetIndexes_fn","DataDenResizingService","_subscribeResizingEvents","_subscribeDraggingEvent","_onMousedown","_onMouseup","_onMousemove","_resizeCurrentColumn","_updateRemainingColumnsPosition","_getHeadersOnTheRight","_isResizing","_headersMain","_currentHeader","_currentCol","_headersOnTheRight","_isResizingPinnedRightColumn","_columnMinWidth","subscribeResizingEvents_fn","subscribeDraggingEvent_fn","onMousedown_fn","onMousemove_fn","onMouseup_fn","getHeadersOnTheRight_fn","movementX","currentWidth","headerLeft","newWidth","resizeCurrentColumn_fn","updateRemainingColumnsPosition_fn","currentLeft","newLeft","currentHeaderLeft","colHeaderIndex","colCells","DataDenFilteringService","_handleHeaderFilterChange","_updateActiveHeaderFilters","_handleQuickFilterChange","handleHeaderFilterChange_fn","handleQuickFilterChange_fn","updateActiveHeaderFilters_fn","activeFiltersChangeEvent","activeQuickFilterChangeEvent","defaultQuickFilterFn","term","res","defaultQuickFilterOptions","DataDenSortingPreviousState","DataDenSortingService","_setColumnDefaultSort","_sortOptions","sortingPreviousState","currentSorterOrder","currentSorterOrderIdx","comparator","setColumnDefaultSort_fn","sorterExist","sortIndex","currentIndex","sortResult","isAscending","fieldA","fieldB","DataDenDataLoaderStrategy","DataDenClientDataLoaderStrategy","_data","filtered","quickFiltered","sorted","filtersOptions","paginationOptions","paginated","sortOptions","sortFn","quickFilterOptions","DataDenServerDataLoaderStrategy","DataDenFetchService","loader","_getData","_publishFetchDone","_subscribeFetchStart","_subscribeSortingDone","_subscribeQuickFilterChanged","_subscribeFilterChange","_subscribePaginationChange","_loader","_fetchOptions","subscribeFetchStart_fn","subscribeSortingDone_fn","subscribeQuickFilterChanged_fn","subscribeFilterChange_fn","subscribePaginationChange_fn","getData_fn","fetchOptions","publishFetchDone_fn","EventData","DataDenEvent","DataDenPubSub","_unsubscribe","_listeners","unsubscribe_fn","cb","DataDenCellTextEditor","defaultPaginationOptions","defaultDateParserFn","defaultSortComparator","defaultSortOptions","isObject","deepMerge","object","source","objValue","srcValue","DataDen","_createOptions","_getDataLoaderStrategy","_rendering","_sorting","_filtering","_pagination","_dragging","_resizing","_dataLoaderStrategy","_fetch","gridOptions","createOptions_fn","getDataLoaderStrategy_fn","pin","userOptions","mode"],"mappings":"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","x_google_ignoreList":[13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66]}